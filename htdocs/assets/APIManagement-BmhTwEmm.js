var _=Object.defineProperty,W=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var S=(n,a,c)=>a in n?_(n,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[a]=c,P=(n,a)=>{for(var c in a||(a={}))Q.call(a,c)&&S(n,c,a[c]);if(C)for(var c of C(a))X.call(a,c)&&S(n,c,a[c]);return n},R=(n,a)=>W(n,J(a));import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as w}from"./react-vendor-BvqlMsL5.js";import{u as Y,B as i,D as $,F as ee,m as se,n as ae,o as te,p as ie,L as d,I as D,S as le,q as re,r as ce,t as ne,v as j,C as x,d as h,h as de,i as xe,j as u,k as g,a as v,b as N,e as y}from"./index-ZwIgorfy.js";import{T as I,a as E,b,c as l,d as L,e as r}from"./table-6WL4qh3Z.js";import{N as F}from"./router-vendor-CEyBJ8vK.js";import{N as he,S as U,E as me,bz as q,J as oe,A as je,bA as f,j as pe,k as ue,an as ge,aa as ve,aR as Ne,ak as ye,Z as be,aF as fe,t as T}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const Le=()=>{const{user:n,profile:a,loading:c}=Y(),[H,z]=w.useState("keys"),[M,O]=w.useState(!1),[k,V]=w.useState({});if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading API management..."})]})});if(!n||!a)return e.jsx(F,{to:"/auth",replace:!0});if(a.role!=="admin")return e.jsx(F,{to:"/unauthorized",replace:!0});const p=[{id:"key-001",name:"Mobile App Integration",key:"lsr_live_1234567890abcdef1234567890abcdef",status:"active",permissions:["read:vehicles","read:drivers","write:tracking"],lastUsed:"2024-01-16T14:30:00Z",createdAt:"2024-01-01T10:00:00Z",expiresAt:"2024-12-31T23:59:59Z",usageCount:15420,rateLimit:1e3},{id:"key-002",name:"Third-party GPS Provider",key:"lsr_live_abcdef1234567890abcdef1234567890",status:"active",permissions:["read:tracking","write:locations"],lastUsed:"2024-01-16T15:45:00Z",createdAt:"2024-01-15T09:30:00Z",usageCount:8943,rateLimit:500},{id:"key-003",name:"Analytics Dashboard",key:"lsr_test_fedcba0987654321fedcba0987654321",status:"inactive",permissions:["read:analytics","read:reports"],lastUsed:"2024-01-10T11:20:00Z",createdAt:"2024-01-10T11:00:00Z",usageCount:245,rateLimit:100}],m=[{id:"endpoint-001",name:"Get Vehicles",method:"GET",path:"/api/v1/vehicles",description:"Retrieve list of all vehicles",status:"active",responseTime:45,successRate:99.8,lastHour:142},{id:"endpoint-002",name:"Update Vehicle Location",method:"POST",path:"/api/v1/vehicles/{id}/location",description:"Update real-time vehicle location",status:"active",responseTime:23,successRate:99.9,lastHour:1847},{id:"endpoint-003",name:"Get Driver Status",method:"GET",path:"/api/v1/drivers/{id}/status",description:"Get current driver availability status",status:"active",responseTime:38,successRate:98.7,lastHour:543},{id:"endpoint-004",name:"Create Route",method:"POST",path:"/api/v1/routes",description:"Create a new transportation route",status:"maintenance",responseTime:156,successRate:95.2,lastHour:23}],A=s=>{const t={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",expired:"bg-red-100 text-red-800",maintenance:"bg-yellow-100 text-yellow-800",deprecated:"bg-orange-100 text-orange-800"};return e.jsx(y,{className:t[s]||"bg-gray-100 text-gray-800",children:s})},Z=s=>{const t={GET:"bg-blue-100 text-blue-800",POST:"bg-green-100 text-green-800",PUT:"bg-orange-100 text-orange-800",DELETE:"bg-red-100 text-red-800"};return e.jsx(y,{className:t[s]||"bg-gray-100 text-gray-800",children:s})},B=s=>{V(t=>R(P({},t),{[s]:!t[s]}))},G=s=>s.substring(0,12)+"•••••••••••••••••••••••••••••••••",K=s=>{navigator.clipboard.writeText(s)},o={totalKeys:p.length,activeKeys:p.filter(s=>s.status==="active").length,totalRequests:p.reduce((s,t)=>s+t.usageCount,0),activeEndpoints:m.filter(s=>s.status==="active").length,avgResponseTime:Math.round(m.reduce((s,t)=>s+t.responseTime,0)/m.length),avgSuccessRate:Math.round(m.reduce((s,t)=>s+t.successRate,0)/m.length*10)/10};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(he,{className:"w-8 h-8 text-purple-600"}),"API Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage API keys, endpoints, and integration settings"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(i,{variant:"outline",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs($,{open:M,onOpenChange:O,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(i,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Create API Key"]})}),e.jsxs(se,{className:"max-w-2xl",children:[e.jsxs(ae,{children:[e.jsx(te,{children:"Create New API Key"}),e.jsx(ie,{children:"Create a new API key with specific permissions and rate limits for external integrations."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"key-name",children:"Key Name"}),e.jsx(D,{id:"key-name",placeholder:"Enter a descriptive name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"permissions",children:"Permissions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"read-vehicles"}),e.jsx(d,{htmlFor:"read-vehicles",children:"Read Vehicles"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"write-vehicles"}),e.jsx(d,{htmlFor:"write-vehicles",children:"Write Vehicles"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"read-drivers"}),e.jsx(d,{htmlFor:"read-drivers",children:"Read Drivers"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"read-tracking"}),e.jsx(d,{htmlFor:"read-tracking",children:"Read Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"write-tracking"}),e.jsx(d,{htmlFor:"write-tracking",children:"Write Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"read-analytics"}),e.jsx(d,{htmlFor:"read-analytics",children:"Read Analytics"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"rate-limit",children:"Rate Limit (requests/hour)"}),e.jsxs(le,{children:[e.jsx(re,{children:e.jsx(ce,{placeholder:"Select rate limit"})}),e.jsxs(ne,{children:[e.jsx(j,{value:"100",children:"100 requests/hour"}),e.jsx(j,{value:"500",children:"500 requests/hour"}),e.jsx(j,{value:"1000",children:"1,000 requests/hour"}),e.jsx(j,{value:"5000",children:"5,000 requests/hour"}),e.jsx(j,{value:"unlimited",children:"Unlimited"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expiry",children:"Expiry Date (Optional)"}),e.jsx(D,{id:"expiry",type:"date"})]}),e.jsx(i,{className:"w-full bg-purple-600 hover:bg-purple-700",children:"Create API Key"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Keys"}),e.jsx("p",{className:"text-2xl font-bold",children:o.totalKeys})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Keys"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.activeKeys})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.totalRequests.toLocaleString()})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Endpoints"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:o.activeEndpoints})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Response"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[o.avgResponseTime,"ms"]})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"w-8 h-8 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[o.avgSuccessRate,"%"]})]})]})})})]}),e.jsxs(de,{value:H,onValueChange:z,className:"space-y-6",children:[e.jsxs(xe,{className:"grid w-full grid-cols-4",children:[e.jsx(u,{value:"keys",children:"API Keys"}),e.jsx(u,{value:"endpoints",children:"Endpoints"}),e.jsx(u,{value:"analytics",children:"Analytics"}),e.jsx(u,{value:"docs",children:"Documentation"})]}),e.jsx(g,{value:"keys",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"API Keys Management"]})}),e.jsx(h,{children:e.jsxs(I,{children:[e.jsx(E,{children:e.jsxs(b,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"API Key"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Permissions"}),e.jsx(l,{children:"Usage"}),e.jsx(l,{children:"Last Used"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(L,{children:p.map(s=>e.jsxs(b,{children:[e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Rate: ",s.rateLimit,"/hour"]})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:k[s.id]?s.key:G(s.key)}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>B(s.id),children:k[s.id]?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>K(s.key),children:e.jsx(Ne,{className:"w-4 h-4"})})]})}),e.jsx(r,{children:A(s.status)}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.permissions.slice(0,2).map(t=>e.jsx(y,{variant:"outline",className:"text-xs",children:t},t)),s.permissions.length>2&&e.jsxs(y,{variant:"outline",className:"text-xs",children:["+",s.permissions.length-2]})]})}),e.jsx(r,{children:e.jsx("span",{className:"font-medium",children:s.usageCount.toLocaleString()})}),e.jsx(r,{children:e.jsx("span",{className:"text-sm",children:new Date(s.lastUsed).toLocaleDateString()})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(fe,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})}),e.jsx(g,{value:"endpoints",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"API Endpoints"]})}),e.jsx(h,{children:e.jsxs(I,{children:[e.jsx(E,{children:e.jsxs(b,{children:[e.jsx(l,{children:"Endpoint"}),e.jsx(l,{children:"Method"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Performance"}),e.jsx(l,{children:"Usage (Last Hour)"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(L,{children:m.map(s=>e.jsxs(b,{children:[e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("code",{className:"text-sm text-gray-600",children:s.path}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description})]})}),e.jsx(r,{children:Z(s.method)}),e.jsx(r,{children:A(s.status)}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:[s.responseTime,"ms"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.successRate,"% success"]})]})}),e.jsx(r,{children:e.jsx("span",{className:"font-medium",children:s.lastHour})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(U,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})}),e.jsx(g,{value:"analytics",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"API Analytics"]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"API Usage Analytics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Detailed analytics on API usage, performance metrics, and error tracking."}),e.jsx(i,{className:"bg-purple-600 hover:bg-purple-700",children:"View Analytics Dashboard"})]})})]})}),e.jsx(g,{value:"docs",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"API Documentation"]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Interactive API Documentation"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Comprehensive API documentation with interactive examples and testing tools."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(i,{className:"bg-purple-600 hover:bg-purple-700",children:"View Documentation"}),e.jsx(i,{variant:"outline",children:"Download OpenAPI Spec"})]})]})})]})})]})]})};export{Le as default};
