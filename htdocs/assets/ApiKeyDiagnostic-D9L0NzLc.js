const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BSwnDmYO.js","assets/supabase-vendor-B984m0TI.js","assets/react-vendor-BvqlMsL5.js"])))=>i.map(i=>d[i]);
var p=(t,u,n)=>new Promise((c,d)=>{var l=i=>{try{o(n.next(i))}catch(a){d(a)}},h=i=>{try{o(n.throw(i))}catch(a){d(a)}},o=i=>i.done?c(i.value):Promise.resolve(i.value).then(l,h);o((n=n.apply(t,u)).next())});import{_ as N}from"./supabase-vendor-B984m0TI.js";import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as y}from"./react-vendor-BvqlMsL5.js";const M=()=>{var l,h,o,i,a,m,f,k,j,T,b,w,v,C,_,A,R,K,I,P,D,S,G,O,E;const[t,u]=y.useState({}),[n,c]=y.useState(!1),d=()=>p(void 0,null,function*(){c(!0);const r={};if(r.envCheck={hasApiKey:!0,apiKeyLength:36,apiKeyStartsWith:"re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo".startsWith("re_")||!1,isPlaceholder:!1,mode:"production",baseUrl:"Configured"},r.envCheck.hasApiKey&&!r.envCheck.isPlaceholder)try{const{Resend:s}=yield N(()=>p(void 0,null,function*(){const{Resend:g}=yield import("./index-BSwnDmYO.js");return{Resend:g}}),__vite__mapDeps([0,1,2])),x=yield new s("re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo").emails.send({from:"onboarding@resend.dev",to:["test@example.com"],subject:"API Key Test",html:"<p>Test email</p>"});r.apiTest={success:!0,emailId:x.id,message:"API key is valid and working"}}catch(s){r.apiTest={success:!1,error:s.message,statusCode:s.statusCode,details:s}}else r.apiTest={success:!1,error:"API key not configured or is placeholder"};r.networkTests={};try{const s=yield fetch("https://api.resend.com/emails",{method:"OPTIONS",headers:{Authorization:"Bearer re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo","Content-Type":"application/json"}});r.networkTests.basicConnectivity={success:s.ok,status:s.status,statusText:s.statusText,headers:Object.fromEntries(s.headers.entries())}}catch(s){r.networkTests.basicConnectivity={success:!1,error:s.message,type:s.name}}try{const s=yield fetch("https://api.resend.com/emails",{method:"OPTIONS",headers:{"Content-Type":"application/json"}});r.networkTests.noAuthTest={success:s.ok,status:s.status,statusText:s.statusText}}catch(s){r.networkTests.noAuthTest={success:!1,error:s.message,type:s.name}}if(r.envCheck.hasApiKey&&!r.envCheck.isPlaceholder)try{const{Resend:s}=yield N(()=>p(void 0,null,function*(){const{Resend:g}=yield import("./index-BSwnDmYO.js");return{Resend:g}}),__vite__mapDeps([0,1,2])),x=yield new s("re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo").emails.send({from:"onboarding@resend.dev",to:["test@example.com"],subject:"Network Test",html:"<p>Testing network connectivity</p>"});r.networkTests.sdkTest={success:!0,emailId:x.id,message:"SDK test successful"}}catch(s){r.networkTests.sdkTest={success:!1,error:s.message,statusCode:s.statusCode,details:s}}u(r),c(!1)});return y.useEffect(()=>{d()},[]),e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",maxWidth:"800px"},children:[e.jsx("h1",{children:"üîç Resend API Key Diagnostic Tool"}),e.jsx("p",{children:"This tool will help diagnose issues with your Resend API key configuration."}),e.jsx("button",{onClick:d,disabled:n,style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",marginBottom:"20px"},children:n?"Running Diagnostics...":"Run Diagnostics"}),Object.keys(t).length>0&&e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h3",{children:"üåç Environment Variables"}),e.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"3px",overflow:"auto"},children:JSON.stringify(t.envCheck,null,2)})]}),e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h3",{children:"üîë API Key Test"}),e.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"3px",overflow:"auto"},children:JSON.stringify(t.apiTest,null,2)})]}),e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h3",{children:"üåê Network Connectivity Tests"}),e.jsxs("p",{style:{fontSize:"14px",color:"#666",marginBottom:"15px"},children:[e.jsx("strong",{children:"Note:"}),' "Load failed" errors in Basic/No Auth tests are normal CORS restrictions. The important test is the "SDK Direct Test" - if that passes, your email system is working!']}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("h4",{children:"Basic Connectivity Test"}),e.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"3px",overflow:"auto"},children:JSON.stringify((l=t.networkTests)==null?void 0:l.basicConnectivity,null,2)})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("h4",{children:"No Auth Test (should fail)"}),e.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"3px",overflow:"auto"},children:JSON.stringify((h=t.networkTests)==null?void 0:h.noAuthTest,null,2)})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("h4",{children:"SDK Direct Test"}),e.jsx("pre",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"3px",overflow:"auto"},children:JSON.stringify((o=t.networkTests)==null?void 0:o.sdkTest,null,2)})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"5px"},children:[e.jsx("h3",{children:"üí° Recommendations"}),e.jsxs("ul",{children:[!((i=t.envCheck)!=null&&i.hasApiKey)&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"Missing API Key:"})," Add VITE_RESEND_API_KEY to your .env file"]}),((a=t.envCheck)==null?void 0:a.isPlaceholder)&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"Placeholder Detected:"})," Replace 're_your_api_key_here' with your actual API key"]}),((m=t.envCheck)==null?void 0:m.hasApiKey)&&!((f=t.envCheck)!=null&&f.apiKeyStartsWith)&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"Invalid Format:"})," API key should start with 're_'"]}),((j=(k=t.apiTest)==null?void 0:k.error)==null?void 0:j.includes("401"))&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"Authentication Failed:"})," Your API key is invalid or expired. Get a new one from ",e.jsx("a",{href:"https://resend.com/api-keys",target:"_blank",rel:"noopener noreferrer",children:"Resend Dashboard"})]}),((w=(b=(T=t.networkTests)==null?void 0:T.sdkTest)==null?void 0:b.error)==null?void 0:w.includes("401"))&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"API Key Invalid:"})," Your API key is not working. Generate a new one from ",e.jsx("a",{href:"https://resend.com/api-keys",target:"_blank",rel:"noopener noreferrer",children:"Resend Dashboard"})]}),((_=(C=(v=t.networkTests)==null?void 0:v.basicConnectivity)==null?void 0:C.error)==null?void 0:_.includes("Failed to fetch"))&&e.jsxs("li",{children:["‚ùå ",e.jsx("strong",{children:"Network Issue:"})," Cannot reach Resend servers. Check your internet connection and firewall settings."]}),((R=(A=t.networkTests)==null?void 0:A.sdkTest)==null?void 0:R.success)&&e.jsxs("li",{children:["‚úÖ ",e.jsx("strong",{children:"Everything Working!"}),' Your API key is valid and the Resend SDK can send emails successfully. The "Load failed" errors are just CORS restrictions in the browser - your email system is working!']}),((K=t.apiTest)==null?void 0:K.success)&&!((P=(I=t.networkTests)==null?void 0:I.sdkTest)!=null&&P.success)&&e.jsxs("li",{children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Partial Success:"})," API key looks valid but SDK test is failing. Try refreshing the page."]}),((G=(S=(D=t.networkTests)==null?void 0:D.basicConnectivity)==null?void 0:S.error)==null?void 0:G.includes("Load failed"))&&((E=(O=t.networkTests)==null?void 0:O.sdkTest)==null?void 0:E.success)&&e.jsxs("li",{children:["‚ÑπÔ∏è ",e.jsx("strong",{children:"CORS Issue:"})," Direct API calls are blocked by browser CORS, but the SDK works fine. This is normal and expected."]})]})]})]})]})};export{M as default};
