const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BSwnDmYO.js","assets/supabase-vendor-B984m0TI.js","assets/react-vendor-BvqlMsL5.js"])))=>i.map(i=>d[i]);
var u=(a,l,r)=>new Promise((o,n)=>{var c=i=>{try{t(r.next(i))}catch(s){n(s)}},d=i=>{try{t(r.throw(i))}catch(s){n(s)}},t=i=>i.done?o(i.value):Promise.resolve(i.value).then(c,d);t((r=r.apply(a,l)).next())});import{_ as k}from"./supabase-vendor-B984m0TI.js";import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as y}from"./react-vendor-BvqlMsL5.js";import{l as _,C as g,a as p,b as f,d as N,e as R,B as b,A as h,g as x}from"./index-ZwIgorfy.js";import{bz as K,J as v,ao as j,an as E,aa as T,G as S}from"./icons-vendor-b0I7fGSL.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./router-vendor-CEyBJ8vK.js";import"./ui-components-7w1-MJre.js";const J=()=>{const{toast:a}=_(),[l,r]=y.useState(!1),[o,n]=y.useState(!1),[c,d]=y.useState(null),t="re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo",i=t.length>10,s=i&&t.startsWith("re_"),I=()=>u(void 0,null,function*(){if(!s){a({title:"Invalid API Key",description:"Please configure a valid Resend API key first",variant:"destructive"});return}n(!0),d(null);try{const{Resend:m}=yield k(()=>u(void 0,null,function*(){const{Resend:w}=yield import("./index-BSwnDmYO.js");return{Resend:w}}),__vite__mapDeps([0,1,2])),A=yield new m(t).emails.send({from:"LSR Transport <onboarding@resend.dev>",to:["test@example.com"],subject:"Test Email from LSR Transport",html:"<h1>Test Email</h1><p>This is a test email to verify your API key is working.</p>"});d({success:!0,message:`Email sent successfully! Email ID: ${A.id}`}),a({title:"Email Test Successful!",description:"Your Resend API key is working correctly"})}catch(m){d({success:!1,message:m.message||"Failed to send test email"}),a({title:"Email Test Failed",description:m.message||"Failed to send test email",variant:"destructive"})}finally{n(!1)}}),P=()=>l?t:`${t.substring(0,8)}...${t.substring(t.length-4)}`;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Resend API Key Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Check if your Resend API key is properly configured"})]}),e.jsxs(g,{children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"API Key Status"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s?e.jsx(v,{className:"h-6 w-6 text-green-600"}):e.jsx(j,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s?"API Key Valid":"API Key Invalid"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Your Resend API key is properly configured":"Please check your API key configuration"})]}),e.jsx(R,{variant:s?"default":"destructive",children:s?"Ready":"Not Ready"})]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"API Key:"}),e.jsx("p",{className:"font-mono text-sm",children:P()})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>r(!l),children:l?e.jsx(E,{className:"h-4 w-4"}):e.jsx(T,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Environment:"}),e.jsx("p",{className:"text-sm text-blue-600",children:"production"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Key Length:"}),e.jsxs("p",{className:"text-sm text-green-600",children:[t.length," characters"]})]})]}),!i&&e.jsxs(h,{children:[e.jsx(j,{className:"h-4 w-4"}),e.jsxs(x,{children:[e.jsx("strong",{children:"API Key Not Found:"})," Please add your Resend API key to the ",e.jsx("code",{children:".env"})," file.",e.jsx("br",{}),e.jsx("strong",{children:"Format:"})," ",e.jsx("code",{children:"VITE_RESEND_API_KEY=re_your_actual_key_here"})]})]}),t==="re_your_api_key_here",i&&!s&&e.jsxs(h,{children:[e.jsx(j,{className:"h-4 w-4"}),e.jsxs(x,{children:[e.jsx("strong",{children:"Invalid API Key Format:"})," Your API key should start with ",e.jsx("code",{children:"re_"}),". Please check your Resend API key format."]})]}),s&&e.jsxs(h,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsxs(x,{children:[e.jsx("strong",{children:"API Key Valid!"})," Your Resend API key is properly configured. You can now test the email functionality."]})]}),c&&e.jsxs(h,{children:[c.success?e.jsx(v,{className:"h-4 w-4"}):e.jsx(j,{className:"h-4 w-4"}),e.jsxs(x,{children:[e.jsx("strong",{children:"Test Result:"})," ",c.message]})]})]})]}),s&&e.jsxs(g,{children:[e.jsx(p,{children:e.jsx(f,{children:"Test Email Sending"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the button below to test if your API key can actually send emails."}),e.jsx(b,{onClick:I,disabled:o,className:"flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4"}),"Test Email Sending"]})})]})})]}),e.jsxs(g,{children:[e.jsx(p,{children:e.jsx(f,{children:"Next Steps"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-green-600",children:"✅ Your API key is ready!"}),e.jsx("p",{children:"You can now:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Test email sending with the button above"}),e.jsxs("li",{children:["Go to ",e.jsx("code",{children:"/test-email"})," for advanced email testing"]}),e.jsx("li",{children:"Test agreement notifications"}),e.jsx("li",{children:"Send welcome emails"}),e.jsx("li",{children:"Use batch email functionality"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-red-600",children:"❌ API key needs to be configured"}),e.jsx("p",{children:"Please:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:["Get your API key from ",e.jsx("a",{href:"https://resend.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Resend Dashboard"})]}),e.jsxs("li",{children:["Add it to your ",e.jsx("code",{children:".env"})," file"]}),e.jsx("li",{children:"Restart your development server"}),e.jsx("li",{children:"Refresh this page"})]})]})})})]})]})};export{J as default};
