var h=(i,c,r)=>new Promise((n,l)=>{var a=s=>{try{t(r.next(s))}catch(o){l(o)}},u=s=>{try{t(r.throw(s))}catch(o){l(o)}},t=s=>s.done?n(s.value):Promise.resolve(s.value).then(a,u);t((r=r.apply(i,c)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as m}from"./react-vendor-BvqlMsL5.js";import{b as x,a as p}from"./router-vendor-CEyBJ8vK.js";import{C as g,a as j,b as w,c as y,d as f,B as v,s as C}from"./index-ZwIgorfy.js";import{a as N,V as b,J as k,ao as S}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const Y=()=>{const[i]=x(),c=p(),[r,n]=m.useState("loading"),[l,a]=m.useState("");return m.useEffect(()=>{h(void 0,null,function*(){try{const t=i.get("token_hash"),s=i.get("type"),o=i.get("redirect_to");if(!t||!s){n("error"),a("Invalid verification link");return}const{error:d}=yield C.auth.verifyOtp({token_hash:t,type:s});d?(console.error("Verification error:",d),n("error"),a(d.message||"Verification failed")):(n("success"),a(s==="signup"?"Email verified successfully! You can now sign in.":s==="recovery"?"Password reset verified! You can now set a new password.":s==="email_change"?"Email change confirmed successfully!":"Verification completed successfully!"),setTimeout(()=>{s==="recovery"?c("/reset-password"):o?window.location.href=o:c("/")},2e3))}catch(t){console.error("Callback error:",t),n("error"),a("An unexpected error occurred")}})},[i,c]),e.jsx("div",{className:"min-h-screen bg-gradient-bg flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Logistics Solution Resources"})]})}),e.jsxs(g,{children:[e.jsxs(j,{className:"text-center",children:[e.jsxs("div",{className:"flex justify-center mb-4",children:[r==="loading"&&e.jsx(b,{className:"w-12 h-12 text-primary animate-spin"}),r==="success"&&e.jsx(k,{className:"w-12 h-12 text-green-500"}),r==="error"&&e.jsx(S,{className:"w-12 h-12 text-red-500"})]}),e.jsxs(w,{children:[r==="loading"&&"Verifying...",r==="success"&&"Success!",r==="error"&&"Verification Failed"]}),e.jsx(y,{children:l||"Please wait while we verify your email..."})]}),r==="error"&&e.jsx(f,{children:e.jsx(v,{className:"w-full",onClick:()=>c("/auth"),children:"Back to Sign In"})}),r==="success"&&e.jsx(f,{children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Redirecting you now..."})})]})]})})};export{Y as default};
