var is=Object.defineProperty,ns=Object.defineProperties;var rs=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var cs=Object.prototype.hasOwnProperty,ds=Object.prototype.propertyIsEnumerable;var Ne=(m,x,o)=>x in m?is(m,x,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[x]=o,g=(m,x)=>{for(var o in x||(x={}))cs.call(x,o)&&Ne(m,o,x[o]);if(fe)for(var o of fe(x))ds.call(x,o)&&Ne(m,o,x[o]);return m},f=(m,x)=>ns(m,rs(x));var q=(m,x,o)=>new Promise((y,w)=>{var Z=h=>{try{B(o.next(h))}catch(L){w(L)}},z=h=>{try{B(o.throw(h))}catch(L){w(L)}},B=h=>h.done?y(h.value):Promise.resolve(h.value).then(Z,z);B((o=o.apply(m,x)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as i,a as os}from"./react-vendor-BvqlMsL5.js";import{u as xs,l as ms,R as hs,U as js,V as us,W as ps,B as n,C as N,a as E,b as R,d as v,h as gs,i as fs,j as G,k as Ns,I as C,S as A,q as F,r as T,t as M,v as c,L as r,w as V,e as K,D as ve,m as ye,n as we,o as Ce,p as vs,P as ys,T as ws}from"./index-ZwIgorfy.js";import{T as Cs,a as Ds,b as De,c as D,d as bs,e as b}from"./table-6WL4qh3Z.js";import{N as Ss}from"./router-vendor-CEyBJ8vK.js";import{T as ks,Z as zs,a5 as be,E as Se,F as P,J as ke,j as ze,am as As,t as Ae,aU as Fs,aV as Ts,a2 as Ms,a8 as Ps,a9 as Us,a7 as Bs,a6 as Ls,aW as Os,a4 as _s,ab as Fe,aT as Te,aF as Me,aX as Pe,aq as Ue,aa as Be,ak as Le,aY as Es,k as Rs,aZ as Oe,ae as te,f as Vs,S as Is,ad as Ws,ag as Hs,Y as Ys,ac as qs}from"./icons-vendor-b0I7fGSL.js";import{f as U}from"./utils-vendor-B2FlkASS.js";import"./supabase-vendor-B984m0TI.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";function ra(){const{user:m,profile:x,loading:o}=xs(),{toast:y}=ms(),[w,Z]=i.useState(""),[z,B]=i.useState("all"),[h,L]=i.useState("all"),[I,X]=i.useState("list"),[le,_e]=i.useState("date"),[$,Ee]=i.useState("desc"),[Re,Ve]=i.useState(!1),[S,W]=i.useState([]),[Gs,Ie]=i.useState(!1);i.useState(!1),i.useState(!1);const[We,He]=i.useState("documents"),[Ye,qe]=i.useState("30d"),[ie,Ge]=i.useState(!1);i.useState([]),i.useState([]);const[Ke,O]=i.useState(!1),[Ze,ne]=i.useState(!1),[Ks,Xe]=i.useState(!1),[Zs,$e]=i.useState(!1),[d,re]=i.useState(null),[l,u]=i.useState({name:"",category:"",description:"",expiryDate:"",tags:"",isConfidential:!1,isPinned:!1,isStarred:!1}),[_,ce]=i.useState([]),[de,J]=i.useState(0),[Q,oe]=i.useState(!1),{data:H=[],isLoading:Je,error:xe,refetch:Y}=hs(),Qe=js();us();const me=ps(),p=os.useMemo(()=>{const s={total:H.length,approved:0,pending:0,rejected:0,expired:0,archived:0,confidential:0,expiringSoon:0,totalSize:0,categories:{}},t=new Date;return t.setDate(t.getDate()+30),H.forEach(a=>{s[a.status]++,a.is_public||s.confidential++,a.expiry_date&&new Date(a.expiry_date)<=t&&s.expiringSoon++;const j=a.category||"other";s.categories[j]=(s.categories[j]||0)+1,s.totalSize+=a.file_size||0}),s},[H]);if(o||Je)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading document management..."})]})});if(!m||!x)return e.jsx(Ss,{to:"/auth",replace:!0});if(xe)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsx(ks,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"text-red-700 mb-4 text-sm",children:xe.message}),e.jsxs(n,{onClick:()=>Y(),variant:"outline",className:"w-full",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})});const ee=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,j)).toFixed(2))+" "+a[j]},es=H.map(s=>{var t;return{id:s.id,name:s.name,type:((t=s.file_type)==null?void 0:t.toUpperCase())||"UNKNOWN",category:s.category||"other",size:ee(s.file_size),uploadedBy:s.uploaded_by||"Unknown",uploadedAt:s.created_at,status:s.status||"pending",expiryDate:s.expiry_date,tags:s.tags||[],isConfidential:!s.is_public,downloadCount:s.download_count||0,isPinned:s.is_pinned||!1,isStarred:s.is_starred||!1,description:s.description,version:s.version,approvalDate:s.approval_date,approvedBy:s.approved_by,rejectionReason:s.rejection_reason}}),he=[{id:"compliance",name:"Compliance Documents",icon:Rs,color:"text-blue-600",bgColor:"bg-blue-50"},{id:"insurance",name:"Insurance & Certificates",icon:Oe,color:"text-green-600",bgColor:"bg-green-50"},{id:"vehicle",name:"Vehicle Documents",icon:te,color:"text-purple-600",bgColor:"bg-purple-50"},{id:"driver",name:"Driver Documents",icon:Vs,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"operational",name:"Operational Documents",icon:Is,color:"text-indigo-600",bgColor:"bg-indigo-50"},{id:"financial",name:"Financial Documents",icon:Ae,color:"text-emerald-600",bgColor:"bg-emerald-50"},{id:"other",name:"Other Documents",icon:P,color:"text-gray-600",bgColor:"bg-gray-50"}],se=s=>{const t={approved:{className:"bg-green-100 text-green-800",icon:ke},pending:{className:"bg-yellow-100 text-yellow-800",icon:ze},rejected:{className:"bg-red-100 text-red-800",icon:Hs},expired:{className:"bg-gray-100 text-gray-800",icon:Ys},active:{className:"bg-blue-100 text-blue-800",icon:Oe},archived:{className:"bg-slate-100 text-slate-800",icon:qs}},a=t[s]||t.pending,j=a.icon;return e.jsxs(K,{className:`${a.className} flex items-center gap-1`,children:[e.jsx(j,{className:"w-3 h-3"}),s]})},ae=s=>{switch(s.toLowerCase()){case"pdf":return e.jsx(P,{className:"w-4 h-4 text-red-600"});case"xlsx":case"xls":return e.jsx(te,{className:"w-4 h-4 text-green-600"});case"jpg":case"jpeg":case"png":return e.jsx(Ws,{className:"w-4 h-4 text-purple-600"});case"doc":case"docx":return e.jsx(P,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(te,{className:"w-4 h-4 text-gray-600"})}},k=es.filter(s=>{var ge;const t=s.name.toLowerCase().includes(w.toLowerCase())||((ge=s.description)==null?void 0:ge.toLowerCase().includes(w.toLowerCase()))||s.tags.some(ls=>ls.toLowerCase().includes(w.toLowerCase())),a=z==="all"||s.category===z,j=h==="all"||s.status===h;return t&&a&&j}).sort((s,t)=>{let a=0;if(s.isPinned&&!t.isPinned?a=-1:!s.isPinned&&t.isPinned?a=1:s.isStarred&&!t.isStarred?a=-1:!s.isStarred&&t.isStarred&&(a=1),a!==0)return a;switch(le){case"name":a=s.name.localeCompare(t.name);break;case"date":a=new Date(s.uploadedAt).getTime()-new Date(t.uploadedAt).getTime();break;case"size":a=parseInt(s.size)-parseInt(t.size);break;case"status":a=s.status.localeCompare(t.status);break;case"category":a=s.category.localeCompare(t.category);break;default:a=new Date(s.uploadedAt).getTime()-new Date(t.uploadedAt).getTime()}return $==="asc"?a:-a}),ss=s=>{W(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},je=()=>{S.length===k.length?W([]):W(k.map(s=>s.id))},ue=s=>{re(s),ne(!0)},pe=s=>{re(s),u({name:s.name,category:s.category,description:s.description||"",expiryDate:s.expiryDate||"",tags:s.tags.join(", "),isConfidential:s.isConfidential,isPinned:s.isPinned||!1,isStarred:s.isStarred||!1}),Xe(!0)},as=s=>q(this,null,function*(){try{yield me.mutateAsync(s),y({title:"Document deleted",description:"The document has been successfully deleted."}),Y()}catch(t){y({title:"Error",description:"Failed to delete document. Please try again.",variant:"destructive"})}}),ts=()=>q(this,null,function*(){try{yield Promise.all(S.map(s=>me.mutateAsync(s))),y({title:"Documents deleted",description:`${S.length} documents have been successfully deleted.`}),W([]),Y()}catch(s){y({title:"Error",description:"Failed to delete some documents. Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Document Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize, track, and manage all your transport documents"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:()=>Ve(!Re),children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Filters"]}),e.jsxs(n,{onClick:()=>O(!0),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(N,{children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ee(p.totalSize)," total size"]})]})]}),e.jsxs(N,{children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Approved"}),e.jsx(ke,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.approved}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.total>0?Math.round(p.approved/p.total*100):0,"% of total"]})]})]}),e.jsxs(N,{children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(ze,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.pending}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.expiringSoon," expiring soon"]})]})]}),e.jsxs(N,{children:[e.jsxs(E,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Confidential"}),e.jsx(As,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.confidential}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure documents"})]})]})]}),e.jsxs(gs,{value:We,onValueChange:s=>He(s),className:"space-y-4",children:[e.jsxs(fs,{className:"grid w-full grid-cols-4",children:[e.jsxs(G,{value:"documents",className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Documents"]}),e.jsxs(G,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Analytics"]}),e.jsxs(G,{value:"workflow",className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),"Workflow"]}),e.jsxs(G,{value:"templates",className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-4 h-4"}),"Templates"]})]}),e.jsxs(Ns,{value:"documents",className:"space-y-4",children:[e.jsx(N,{children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(C,{placeholder:"Search documents by name, description, or tags...",value:w,onChange:s=>Z(s.target.value),className:"pl-10"})]})}),e.jsxs(A,{value:z,onValueChange:B,children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(T,{placeholder:"All Categories"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"All Categories"}),he.map(s=>e.jsxs(c,{value:s.id,children:[s.name," (",p.categories[s.id]||0,")"]},s.id))]})]}),e.jsxs(A,{value:h,onValueChange:L,children:[e.jsx(F,{className:"w-[150px]",children:e.jsx(T,{placeholder:"All Status"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"All Status"}),e.jsx(c,{value:"approved",children:"Approved"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"rejected",children:"Rejected"}),e.jsx(c,{value:"expired",children:"Expired"}),e.jsx(c,{value:"archived",children:"Archived"})]})]}),e.jsxs(A,{value:Ye,onValueChange:s=>qe(s),children:[e.jsx(F,{className:"w-[120px]",children:e.jsx(T,{placeholder:"Date Range"})}),e.jsxs(M,{children:[e.jsx(c,{value:"7d",children:"Last 7 days"}),e.jsx(c,{value:"30d",children:"Last 30 days"}),e.jsx(c,{value:"90d",children:"Last 90 days"}),e.jsx(c,{value:"1y",children:"Last year"}),e.jsx(c,{value:"all",children:"All time"})]})]}),e.jsxs(A,{value:le,onValueChange:s=>_e(s),children:[e.jsx(F,{className:"w-[140px]",children:e.jsx(T,{placeholder:"Sort by"})}),e.jsxs(M,{children:[e.jsx(c,{value:"date",children:"Date"}),e.jsx(c,{value:"name",children:"Name"}),e.jsx(c,{value:"size",children:"Size"}),e.jsx(c,{value:"status",children:"Status"}),e.jsx(c,{value:"category",children:"Category"})]})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>Ee($==="asc"?"desc":"asc"),children:$==="asc"?e.jsx(Ps,{className:"w-4 h-4"}):e.jsx(Us,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(n,{variant:I==="list"?"default":"ghost",size:"sm",onClick:()=>X("list"),children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsx(n,{variant:I==="grid"?"default":"ghost",size:"sm",onClick:()=>X("grid"),children:e.jsx(Ls,{className:"w-4 h-4"})}),e.jsx(n,{variant:I==="kanban"?"default":"ghost",size:"sm",onClick:()=>X("kanban"),children:e.jsx(Os,{className:"w-4 h-4"})})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ge(!ie),children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Advanced"]})]}),ie&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"File Size Range"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(C,{placeholder:"Min size (KB)",className:"text-xs"}),e.jsx(C,{placeholder:"Max size (MB)",className:"text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Upload Date Range"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(C,{type:"date",className:"text-xs"}),e.jsx(C,{type:"date",className:"text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Document Owner"}),e.jsxs(A,{children:[e.jsx(F,{className:"text-xs",children:e.jsx(T,{placeholder:"Select owner"})}),e.jsxs(M,{children:[e.jsx(c,{value:"all",children:"All Users"}),e.jsx(c,{value:"me",children:"My Documents"}),e.jsx(c,{value:"team",children:"Team Documents"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Apply Filters"]}),e.jsx(n,{variant:"ghost",size:"sm",children:"Clear All"})]})]})]})}),S.length>0&&e.jsx(N,{className:"border-blue-200 bg-blue-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[S.length," document(s) selected"]}),e.jsx(n,{variant:"outline",size:"sm",onClick:je,children:"Select All"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ie(!0),children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>$e(!0),children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(n,{variant:"destructive",size:"sm",onClick:ts,children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})}),I==="list"?e.jsxs(N,{children:[e.jsx(E,{children:e.jsx(R,{children:"Documents"})}),e.jsx(v,{children:e.jsxs(Cs,{children:[e.jsx(Ds,{children:e.jsxs(De,{children:[e.jsx(D,{className:"w-12",children:e.jsx(V,{checked:S.length===k.length&&k.length>0,onCheckedChange:je})}),e.jsx(D,{children:"Document"}),e.jsx(D,{children:"Category"}),e.jsx(D,{children:"Status"}),e.jsx(D,{children:"Size"}),e.jsx(D,{children:"Uploaded"}),e.jsx(D,{children:"Downloads"}),e.jsx(D,{className:"w-32",children:"Actions"})]})}),e.jsx(bs,{children:k.map(s=>e.jsxs(De,{children:[e.jsx(b,{children:e.jsx(V,{checked:S.includes(s.id),onCheckedChange:()=>ss(s.id)})}),e.jsx(b,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.isPinned&&e.jsx(Pe,{className:"w-4 h-4 text-blue-600"}),s.isStarred&&e.jsx(Ue,{className:"w-4 h-4 text-yellow-600"}),ae(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.uploadedBy," • ",U(new Date(s.uploadedAt),"MMM dd, yyyy")]})]})]})}),e.jsx(b,{children:e.jsx(K,{variant:"outline",children:s.category})}),e.jsx(b,{children:se(s.status)}),e.jsx(b,{children:s.size}),e.jsx(b,{children:U(new Date(s.uploadedAt),"MMM dd, yyyy")}),e.jsx(b,{children:s.downloadCount}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ue(s),children:e.jsx(Be,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>pe(s),children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>as(s.id),children:e.jsx(Me,{className:"w-4 h-4"})})]})})]},s.id))})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.map(s=>e.jsx(N,{className:"relative group hover:shadow-lg transition-shadow",children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ae(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.size})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.isPinned&&e.jsx(Pe,{className:"w-4 h-4 text-blue-600"}),s.isStarred&&e.jsx(Ue,{className:"w-4 h-4 text-yellow-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:s.category}),se(s.status)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Uploaded by ",s.uploadedBy]}),e.jsx("div",{children:U(new Date(s.uploadedAt),"MMM dd, yyyy")}),e.jsxs("div",{children:[s.downloadCount," downloads"]})]}),e.jsxs("div",{className:"flex gap-1 pt-2",children:[e.jsxs(n,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>ue(s),children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs(n,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>pe(s),children:[e.jsx(Le,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})]})},s.id))}),k.length===0&&e.jsx(N,{children:e.jsx(v,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w||z!=="all"||h!=="all"?"Try adjusting your search or filters":"Get started by uploading your first document"}),e.jsxs(n,{onClick:()=>O(!0),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})})})]})]}),e.jsx(ve,{open:Ke,onOpenChange:O,children:e.jsxs(ye,{className:"max-w-2xl",children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Upload Document"}),e.jsx(vs,{children:"Upload a new document to your organization's document library."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Es,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop files here, or click to select"}),e.jsx(n,{variant:"outline",onClick:()=>{var s;return(s=document.getElementById("file-upload"))==null?void 0:s.click()},children:"Choose Files"}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,className:"hidden",onChange:s=>ce(Array.from(s.target.files||[]))})]}),Q&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[de,"%"]})]}),e.jsx(ys,{value:de})]}),_.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Selected Files:"}),e.jsx("div",{className:"space-y-1",children:_.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ee(s.size)})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",children:"Document Name"}),e.jsx(C,{id:"name",value:l.name,onChange:s=>u(f(g({},l),{name:s.target.value})),placeholder:"Enter document name"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"category",children:"Category"}),e.jsxs(A,{value:l.category,onValueChange:s=>u(f(g({},l),{category:s})),children:[e.jsx(F,{children:e.jsx(T,{placeholder:"Select category"})}),e.jsx(M,{children:he.map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(ws,{id:"description",value:l.description,onChange:s=>u(f(g({},l),{description:s.target.value})),placeholder:"Enter document description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),e.jsx(C,{id:"expiryDate",type:"date",value:l.expiryDate,onChange:s=>u(f(g({},l),{expiryDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"tags",children:"Tags (Optional)"}),e.jsx(C,{id:"tags",value:l.tags,onChange:s=>u(f(g({},l),{tags:s.target.value})),placeholder:"Enter tags separated by commas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"confidential",checked:l.isConfidential,onCheckedChange:s=>u(f(g({},l),{isConfidential:s}))}),e.jsx(r,{htmlFor:"confidential",children:"Mark as confidential"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"pinned",checked:l.isPinned,onCheckedChange:s=>u(f(g({},l),{isPinned:s}))}),e.jsx(r,{htmlFor:"pinned",children:"Pin document"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"starred",checked:l.isStarred,onCheckedChange:s=>u(f(g({},l),{isStarred:s}))}),e.jsx(r,{htmlFor:"starred",children:"Star document"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(n,{onClick:()=>q(this,null,function*(){var s,t;oe(!0),J(0);try{for(let a=0;a<=100;a+=10)J(a),yield new Promise(j=>setTimeout(j,100));yield Qe.mutateAsync({name:l.name,category:l.category,description:l.description,expiry_date:l.expiryDate||null,tags:l.tags.split(",").map(a=>a.trim()).filter(a=>a),is_public:!l.isConfidential,is_pinned:l.isPinned,is_starred:l.isStarred,file_type:((s=_[0])==null?void 0:s.type)||"application/octet-stream",file_size:((t=_[0])==null?void 0:t.size)||0}),y({title:"Document uploaded",description:"Your document has been successfully uploaded."}),O(!1),ce([]),u({name:"",category:"",description:"",expiryDate:"",tags:"",isConfidential:!1,isPinned:!1,isStarred:!1}),Y()}catch(a){y({title:"Upload failed",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{oe(!1),J(0)}}),disabled:Q||_.length===0||!l.name||!l.category,children:Q?"Uploading...":"Upload Document"})]})]})}),e.jsx(ve,{open:Ze,onOpenChange:ne,children:e.jsxs(ye,{className:"max-w-4xl",children:[e.jsx(we,{children:e.jsx(Ce,{children:"Document Details"})}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ae(d.type),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.type," • ",d.size]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Category"}),e.jsx("p",{className:"text-sm",children:d.category})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Status"}),e.jsx("div",{className:"mt-1",children:se(d.status)})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Uploaded By"}),e.jsx("p",{className:"text-sm",children:d.uploadedBy})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Upload Date"}),e.jsx("p",{className:"text-sm",children:U(new Date(d.uploadedAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Downloads"}),e.jsx("p",{className:"text-sm",children:d.downloadCount})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Confidential"}),e.jsx("p",{className:"text-sm",children:d.isConfidential?"Yes":"No"})]}),d.expiryDate&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Expiry Date"}),e.jsx("p",{className:"text-sm",children:U(new Date(d.expiryDate),"MMM dd, yyyy")})]}),d.approvalDate&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Approved On"}),e.jsx("p",{className:"text-sm",children:U(new Date(d.approvalDate),"MMM dd, yyyy")})]})]}),d.description&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm mt-1",children:d.description})]}),d.tags.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:d.tags.map((s,t)=>e.jsx(K,{variant:"secondary",className:"text-xs",children:s},t))})]}),d.rejectionReason&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-red-600",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm mt-1 text-red-600",children:d.rejectionReason})]})]})]})})]})}export{ra as default};
