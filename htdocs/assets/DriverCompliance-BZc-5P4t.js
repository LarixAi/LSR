var Ve=Object.defineProperty,He=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var $e=(a,n,c)=>n in a?Ve(a,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[n]=c,ce=(a,n)=>{for(var c in n||(n={}))Be.call(n,c)&&$e(a,c,n[c]);if(_e)for(var c of _e(n))Ge.call(n,c)&&$e(a,c,n[c]);return a},le=(a,n)=>He(a,Je(n));var L=(a,n,c)=>new Promise((f,i)=>{var $=w=>{try{b(c.next(w))}catch(F){i(F)}},v=w=>{try{b(c.throw(w))}catch(F){i(F)}},b=w=>w.done?f(w.value):Promise.resolve(w.value).then($,v);b((c=c.apply(a,n)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{u as ye,s as W,J as se,B as g,C as S,a as te,b as ae,d as I,e as E,f as Qe,h as We,i as Ye,j as oe,k as de,D as Xe,F as Ze,m as Ke,n as es,o as ss,P as ts,M as as}from"./index-ZwIgorfy.js";import{r as x}from"./react-vendor-BvqlMsL5.js";import{bp as Ce,bq as ns,br as is,Z as je,J as ne,ao as rs,T as K,k as ee,af as me,az as G,F as xe,aa as cs,ab as Te,j as ls,g as os}from"./icons-vendor-b0I7fGSL.js";import{N as Re}from"./router-vendor-CEyBJ8vK.js";import{f as J}from"./utils-vendor-B2FlkASS.js";import"./supabase-vendor-B984m0TI.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const ue={ENABLED:!0,LOG_LEVEL:"verbose",TIMEOUT_WARNING_THRESHOLD:3e3,TIMEOUT_ERROR_THRESHOLD:8e3,PERFORMANCE_MONITORING:!0,NETWORK_MONITORING:!0,ERROR_TRACKING:!0},r=(a,n,c)=>{const f=new Date().toISOString(),i=ue.LOG_LEVEL;if(a==="error"||a==="warn"||a==="info"||i==="debug"){const $=`[DriverCompliance:${a.toUpperCase()}]`,v=`${f} ${$} ${n}`;a==="error"?console.error(v,c):a==="warn"?console.warn(v,c):console.log(v,c)}},y={startTime:0,checkpoints:new Map,start(a){this.startTime=performance.now(),this.checkpoints.set(a,this.startTime),r("debug",`â±ï¸ Performance monitoring started: ${a}`)},checkpoint(a){const n=performance.now(),c=this.checkpoints.get(a)||this.startTime,f=n-c;return r("debug",`â±ï¸ Checkpoint [${a}]: ${f.toFixed(2)}ms`),f>ue.TIMEOUT_WARNING_THRESHOLD&&r("warn",`âš ï¸ Slow operation detected [${a}]: ${f.toFixed(2)}ms`),f},end(a){const n=this.checkpoint(a);return r("info",`âœ… Operation completed [${a}]: ${n.toFixed(2)}ms`),n>ue.TIMEOUT_ERROR_THRESHOLD&&r("error",`âŒ Operation timeout [${a}]: ${n.toFixed(2)}ms`),n}},Se={checkConnection(){return L(this,null,function*(){try{const a=performance.now(),n=yield fetch("/api/health",{method:"HEAD",cache:"no-cache"}),c=performance.now()-a;return r("debug",`ðŸŒ Network check: ${c.toFixed(2)}ms, status: ${n.status}`),{connected:n.ok,latency:c}}catch(a){return r("warn","ðŸŒ Network check failed:",a),{connected:!1,latency:0}}})},checkSupabaseConnection(){return L(this,null,function*(){try{const a=performance.now(),{data:n,error:c}=yield W.from("profiles").select("id").limit(1),f=performance.now()-a;return r("debug",`ðŸ”— Supabase connection check: ${f.toFixed(2)}ms, error: ${(c==null?void 0:c.message)||"none"}`),{connected:!c,latency:f,error:c}}catch(a){return r("warn","ðŸ”— Supabase connection check failed:",a),{connected:!1,latency:0,error:a}}})}},he={activeRequests:new Map,deduplicate(a,n){return L(this,null,function*(){if(this.activeRequests.has(a))return r("debug",`ðŸ”„ Request deduplicated: ${a}`),this.activeRequests.get(a);const c=n().finally(()=>{this.activeRequests.delete(a),r("debug",`ðŸ§¹ Request cleaned up: ${a}`)});return this.activeRequests.set(a,c),r("debug",`ðŸ†• New request started: ${a}`),c})},clear(){this.activeRequests.clear(),r("debug","ðŸ§¹ All requests cleared")}},Ie=()=>{const{user:a,profile:n}=ye(),[c,f]=x.useState(null),[i,$]=x.useState([]),[v,b]=x.useState([]),[w,F]=x.useState([]),[Y,T]=x.useState([]),[U,O]=x.useState([]),[z,C]=x.useState(!0),[P,R]=x.useState(null),A=x.useRef(!1),D=x.useRef(null),B=x.useRef(null),q=x.useRef(0),V=x.useRef(0),M=x.useRef(new Set),d=x.useRef(!1),s=x.useRef(null),m=(h,N,l)=>{const o=setTimeout(()=>{r("warn",`â° Timeout triggered: ${l}`),M.current.delete(o),h()},N);return M.current.add(o),o},p=x.useCallback(()=>L(void 0,null,function*(){if(d.current){r("warn","ðŸ”„ Fetch already in progress, skipping duplicate request");return}const h=++q.current,N=Date.now();if(r("info",`ðŸ”„ Starting compliance data fetch #${h}`,{userId:a==null?void 0:a.id,profileId:n==null?void 0:n.id,timestamp:new Date().toISOString()}),!(a!=null&&a.id)||!(n!=null&&n.id)){r("warn","âŒ No user or profile found, skipping compliance data fetch",{userId:a==null?void 0:a.id,profileId:n==null?void 0:n.id,fetchId:h}),C(!1);return}s.current=new AbortController,d.current=!0;try{if(ue.NETWORK_MONITORING){r("debug","ðŸŒ Checking network connectivity...");const l=yield Se.checkConnection(),o=yield Se.checkSupabaseConnection();if(r("info","ðŸŒ Network status:",{networkStatus:l,supabaseStatus:o}),!l.connected||!o.connected){r("error","âŒ Network connectivity issues detected",{networkStatus:l,supabaseStatus:o}),R("Network connectivity issues detected"),C(!1);return}}y.start(`fetch_compliance_data_${h}`),C(!0),R(null),V.current=N,yield he.deduplicate(`compliance_fetch_${a.id}_${n.id}`,()=>L(void 0,null,function*(){r("debug","ðŸ“Š Fetching driver licenses..."),y.start("fetch_licenses");let l=[];try{const{data:t,error:u}=yield W.from("driver_licenses").select("*").eq("driver_id",a.id).eq("organization_id",n.organization_id).order("created_at",{ascending:!1});y.end("fetch_licenses"),u?(r("warn","driver_licenses table not found, using empty data",{error:u}),l=[]):(r("debug",`âœ… Fetched ${(t==null?void 0:t.length)||0} driver licenses`),l=t||[])}catch(t){y.end("fetch_licenses"),r("warn","driver_licenses table not accessible, using empty data",{error:t}),l=[]}r("debug","ðŸ“š Fetching training completions..."),y.start("fetch_training");let o=[];try{const{data:t,error:u}=yield W.from("training_completions").select("*").eq("driver_id",a.id).eq("organization_id",n.organization_id).order("completion_date",{ascending:!1});y.end("fetch_training"),u?(r("warn","training_completions table not found, using empty data",{error:u}),o=[]):(r("debug",`âœ… Fetched ${(t==null?void 0:t.length)||0} training records`),o=t||[])}catch(t){y.end("fetch_training"),r("warn","training_completions table not accessible, using empty data",{error:t}),o=[]}r("debug","âš ï¸ Fetching compliance violations..."),y.start("fetch_violations");let _=[];try{const{data:t,error:u}=yield W.from("compliance_violations").select("*").eq("driver_id",a.id).eq("organization_id",n.organization_id).order("violation_date",{ascending:!1});y.end("fetch_violations"),u?(r("warn","compliance_violations table not found, using empty data",{error:u}),_=[]):(r("debug",`âœ… Fetched ${(t==null?void 0:t.length)||0} violation records`),_=t||[])}catch(t){y.end("fetch_violations"),r("warn","compliance_violations table not accessible, using empty data",{error:t}),_=[]}r("debug","ðŸ“ˆ Fetching compliance scores..."),y.start("fetch_scores");let X=[];try{const{data:t,error:u}=yield W.from("driver_compliance_scores").select("*").eq("driver_id",a.id).eq("organization_id",n.organization_id).order("last_assessment_date",{ascending:!1});y.end("fetch_scores"),u?(r("warn","driver_compliance_scores table not found, using empty data",{error:u}),X=[]):(r("debug",`âœ… Fetched ${(t==null?void 0:t.length)||0} compliance score records`),X=t||[])}catch(t){y.end("fetch_scores"),r("warn","driver_compliance_scores table not accessible, using empty data",{error:t}),X=[]}r("debug","ðŸ§® Processing data..."),y.start("process_data");const pe=(l==null?void 0:l.filter(t=>t.status==="valid"&&new Date(t.expiry_date)>new Date))||[],ie=(l==null?void 0:l.filter(t=>new Date(t.expiry_date)<=new Date))||[];r("debug",`ðŸ“‹ License processing: ${pe.length} valid, ${ie.length} expired`);const ge=[],ms=[],Q=(_==null?void 0:_.filter(t=>t.status==="active"||t.status==="pending"))||[],Ne=(_==null?void 0:_.filter(t=>t.status==="resolved"||t.status==="closed"))||[];r("debug",`âš ï¸ Violation processing: ${Q.length} active, ${Ne.length} resolved`);let k=0;if(X.length>0)k=X[0].overall_score,r("debug",`ðŸ“Š Using existing compliance score: ${k}`);else{r("debug","ðŸ“Š Calculating new compliance score...");const u=Math.min(pe.length*8,40);if(k+=u,o.length>0){const Ae=ge.length/5*100,qe=Math.round(Ae/100*30);k+=qe}const H=Q.length===0?20:0;k+=H;const re=Math.min(Ne.length*2,10);k+=re,k=Math.min(k,100),r("debug",`ðŸ“Š Calculated compliance score: ${k}`,{licensePoints:u,trainingPoints:o.length>0?Math.round(ge.length/5*30):0,noViolationsBonus:H,resolvedViolationPoints:re})}let Z="low";ie.length>0||Q.length>2?Z="high":(Q.length>0||ie.length>0)&&(Z="medium"),r("debug",`âš ï¸ Risk level determined: ${Z}`,{expiredLicenses:ie.length,activeViolations:Q.length});const ke=(o==null?void 0:o.length)>0?new Date(Math.max(...o.map(t=>new Date(t.completion_date).getTime()))):new Date,ve={overallScore:Math.round(k),riskLevel:Z.charAt(0).toUpperCase()+Z.slice(1),lastAssessment:new Date().toISOString(),trainingProgress:o.length>0?Math.round(ge.length/5*100):0,certificationsCount:pe.length,infringementsCount:Q.length,nextTrainingDue:ke.toISOString().split("T")[0]};f(ve),r("debug","âœ… Compliance data set:",ve),O(l||[]);const be=(_||[]).map(t=>({id:t.id,violationType:t.violation_type||"Unknown",description:t.description||"No description provided",severity:t.severity||"moderate",violationDate:t.violation_date||t.created_at,status:t.status||"pending",resolvedDate:t.resolved_at}));b(be),r("debug",`âœ… Processed ${be.length} violations`);const Ee={"driver-safety-fundamentals":"Driver Safety Fundamentals","vehicle-inspection-training":"Daily Vehicle Inspection Procedures","emergency-procedures":"Emergency Response Procedures","legal-compliance":"Legal Compliance and Documentation","passenger-assistance":"Passenger Assistance Training","defensive-driving":"Defensive Driving Techniques","first-aid":"First Aid Training","customer-service":"Customer Service Excellence"};let fe=[];o.length>0&&(fe=Object.entries(Ee).map(([t,u])=>{const H=o==null?void 0:o.find(re=>re.training_type===t);return H?{id:t,name:u,status:H.status,progress:H.progress||(H.status==="completed"?100:0),dueDate:H.due_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}:{id:t,name:u,status:"not_started",progress:0,dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}})),$(fe),r("debug",`âœ… Generated ${fe.length} training modules`);const Me=(l||[]).slice(0,2).map(t=>({id:`license_${t.id}`,type:"license",description:`License ${t.license_number} ${t.status==="valid"?"verified":"expired"}`,timestamp:t.created_at,status:t.status==="valid"?"success":"warning"})),Le=(o||[]).slice(0,2).map(t=>({id:`training_${t.id}`,type:"training",description:`Training ${t.training_type} ${t.status}`,timestamp:t.completion_date||t.created_at,status:t.status==="completed"?"success":"info"})),Fe=(_||[]).slice(0,2).map(t=>({id:`violation_${t.id}`,type:"violation",description:`Compliance violation: ${t.violation_type}`,timestamp:t.violation_date||t.created_at,status:"warning"})),we=[...Me,...Le,...Fe].sort((t,u)=>new Date(u.timestamp).getTime()-new Date(t.timestamp).getTime()).slice(0,5);T(we),r("debug",`âœ… Generated ${we.length} recent activities`);const Ue=(l||[]).map(t=>({id:`license_${t.id}`,type:"License Verification",date:t.created_at,status:t.status==="valid"?"Verified":"Expired",description:`${t.license_type} License: ${t.license_number}`})),Oe=(o||[]).map(t=>({id:`training_${t.id}`,type:"Training Completion",date:t.completion_date||t.created_at,status:t.status==="completed"?"Completed":"In Progress",description:`Training: ${t.training_type}`})),ze=(_||[]).map(t=>({id:`violation_${t.id}`,type:"Compliance Review",date:t.violation_date||t.created_at,status:t.status==="active"?"Under Review":"Resolved",description:`${t.violation_type}: ${t.description}`})),De=[...Ue,...Oe,...ze].sort((t,u)=>new Date(u.date).getTime()-new Date(t.date).getTime()).slice(0,10);F(De),r("debug",`âœ… Generated ${De.length} compliance history records`),y.end("process_data"),y.end(`fetch_compliance_data_${h}`);const Pe=Date.now()-N;return r("info",`âœ… Compliance data fetch #${h} completed successfully`,{duration:`${Pe}ms`,fetchId:h,timestamp:new Date().toISOString()}),{success:!0}}))}catch(l){const o=Date.now()-N;r("error",`âŒ Compliance data fetch #${h} failed`,{error:l.message,stack:l.stack,duration:`${o}ms`,fetchId:h,timestamp:new Date().toISOString()}),R(l.message||"Failed to load compliance data"),se.error("Failed to load compliance data")}finally{C(!1),d.current=!1,s.current=null}}),[a==null?void 0:a.id,n==null?void 0:n.id]);x.useEffect(()=>{r("info","ðŸ”„ useDriverCompliance effect triggered",{userId:a==null?void 0:a.id,profileId:n==null?void 0:n.id,timestamp:new Date().toISOString()});const h=a==null?void 0:a.id,N=n==null?void 0:n.id;(h!==D.current||N!==B.current)&&(r("info","ðŸ”„ User or profile changed, updating refs and fetching data",{oldUserId:D.current,newUserId:h,oldProfileId:B.current,newProfileId:N}),D.current=h,B.current=N,A.current=!1,he.clear());const l=m(()=>{z&&d.current&&(r("warn","âš ï¸ Compliance data fetch timeout, aborting request",{fetchAttempts:q.current,lastFetchTime:V.current,currentTime:Date.now()}),s.current&&s.current.abort(),C(!1),R("Failed to load compliance data: timeout"),d.current=!1)},15e3,"compliance_fetch_timeout");return h&&N&&!A.current&&!d.current?(A.current=!0,p()):h||m(()=>{a!=null&&a.id||(r("warn","âŒ No user found after delay, stopping loading"),C(!1))},2e3,"no_user_timeout"),()=>{clearTimeout(l),M.current.delete(l)}},[a==null?void 0:a.id,n==null?void 0:n.id]);const j=x.useCallback(()=>{r("info","ðŸ”„ Manual refresh triggered"),A.current=!1,d.current=!1,s.current&&s.current.abort(),he.clear(),p()},[p]);return r("debug","ðŸ“Š Current compliance state",{loading:z,error:P,hasData:!!c,fetchAttempts:q.current,lastFetchTime:V.current,activeTimeouts:M.current.size,isFetching:d.current,activeRequests:he.activeRequests.size}),{complianceData:c,trainingModules:i,violations:v,complianceHistory:w,recentActivity:Y,driverLicenses:U,loading:z,error:P,refreshData:j}},ds=()=>{var V,M;const{user:a,profile:n}=ye(),{complianceData:c,trainingModules:f,violations:i,complianceHistory:$,recentActivity:v,driverLicenses:b,loading:w,error:F,refreshData:Y}=Ie(),[T,U]=x.useState({fetchAttempts:0,lastFetchTime:0,averageResponseTime:0,networkLatency:0,supabaseLatency:0,errorCount:0,timeoutCount:0,activeConnections:0}),[O,z]=x.useState(!1),[C,P]=x.useState({online:navigator.onLine,supabaseConnected:!1,lastCheck:Date.now()}),[R,A]=x.useState([]);x.useEffect(()=>{const d=()=>L(void 0,null,function*(){const m=navigator.onLine;let p=!1;try{const j=performance.now(),{data:h,error:N}=yield W.from("profiles").select("id").limit(1),l=performance.now()-j;p=!N,U(o=>le(ce({},o),{supabaseLatency:l}))}catch(j){p=!1}P({online:m,supabaseConnected:p,lastCheck:Date.now()})}),s=setInterval(d,5e3);return d(),()=>clearInterval(s)},[]),x.useEffect(()=>{const d=console.log,s=console.warn,m=console.error,p=/â±ï¸ Checkpoint \[([^\]]+)\]: ([\d.]+)ms/;return console.log=(...j)=>{d.apply(console,j);const h=j.join(" "),N=h.match(p);if(N){const[,l,o]=N;A(_=>[..._.slice(-9),{timestamp:Date.now(),operation:l,duration:parseFloat(o),success:!0}])}h.includes("âŒ Compliance data fetch")&&U(l=>le(ce({},l),{errorCount:l.errorCount+1})),h.includes("â° Timeout triggered: compliance_fetch_timeout")&&U(l=>le(ce({},l),{timeoutCount:l.timeoutCount+1}))},console.warn=(...j)=>{s.apply(console,j)},console.error=(...j)=>{m.apply(console,j)},()=>{console.log=d,console.warn=s,console.error=m}},[]);const D=d=>d?"text-green-500":"text-red-500",B=d=>d?e.jsx(ne,{className:"w-4 h-4"}):e.jsx(rs,{className:"w-4 h-4"}),q=R.length>0?R.reduce((d,s)=>d+s.duration,0)/R.length:0;return O?e.jsx("div",{className:"fixed bottom-4 right-4 z-50 w-96 max-h-96 overflow-auto",children:e.jsxs(S,{className:"bg-background/95 backdrop-blur-sm border-2 border-orange-200",children:[e.jsx(te,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ae,{className:"text-sm flex items-center",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Compliance Debug Panel"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(g,{onClick:()=>z(!1),size:"sm",variant:"ghost",children:"Ã—"})})]})}),e.jsxs(I,{className:"space-y-4 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Network Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:D(C.online),children:C.online?e.jsx(ns,{className:"w-3 h-3"}):e.jsx(is,{className:"w-3 h-3"})}),e.jsx("span",{className:D(C.supabaseConnected),children:B(C.supabaseConnected)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Network Latency:"}),e.jsxs("span",{className:"ml-1",children:[T.networkLatency.toFixed(0),"ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Supabase Latency:"}),e.jsxs("span",{className:"ml-1",children:[T.supabaseLatency.toFixed(0),"ms"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Performance"}),e.jsx(g,{onClick:Y,size:"sm",variant:"outline",className:"h-6 px-2",children:e.jsx(je,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Response Time:"}),e.jsxs("span",{className:q>3e3?"text-orange-500":"text-green-500",children:[q.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fetch Attempts:"}),e.jsx("span",{children:T.fetchAttempts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Errors:"}),e.jsx("span",{className:"text-red-500",children:T.errorCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Timeouts:"}),e.jsx("span",{className:"text-orange-500",children:T.timeoutCount})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Current State"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Loading:"}),e.jsx(E,{variant:w?"destructive":"secondary",className:"text-xs",children:w?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Has Data:"}),e.jsx(E,{variant:c?"default":"secondary",className:"text-xs",children:c?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Error:"}),e.jsx("span",{className:"text-red-500 max-w-32 truncate",children:F||"None"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Data Counts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:["Licenses: ",b.length]}),e.jsxs("div",{children:["Training: ",f.length]}),e.jsxs("div",{children:["Violations: ",i.length]}),e.jsxs("div",{children:["History: ",$.length]}),e.jsxs("div",{children:["Activity: ",v.length]})]})]}),R.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Recent Operations"}),e.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:R.slice(-3).map((d,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"truncate max-w-24",children:d.operation}),e.jsxs("span",{className:d.duration>3e3?"text-orange-500":"text-green-500",children:[d.duration.toFixed(0),"ms"]})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"User Info"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"User ID:"}),e.jsxs("span",{className:"font-mono text-xs truncate max-w-24",children:[(V=a==null?void 0:a.id)==null?void 0:V.slice(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Profile ID:"}),e.jsxs("span",{className:"font-mono text-xs truncate max-w-24",children:[(M=n==null?void 0:n.id)==null?void 0:M.slice(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Role:"}),e.jsx("span",{children:(n==null?void 0:n.role)||"Unknown"})]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})}):e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs(g,{onClick:()=>z(!0),size:"sm",variant:"outline",className:"bg-background/80 backdrop-blur-sm",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Debug"]})})},Ds=()=>{const{user:a,profile:n,session:c,loading:f}=ye(),i=Qe(),{complianceData:$,trainingModules:v,violations:b,complianceHistory:w,recentActivity:F,driverLicenses:Y,loading:T,error:U,refreshData:O}=Ie(),z=(s,m)=>L(void 0,null,function*(){try{const p=yield fetch("https://dznbihypzmvcmradijqn.supabase.co/functions/v1/update-training-progress",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c==null?void 0:c.access_token}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bmJpaHlwem12Y21yYWRpanFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NzQsImV4cCI6MjA3MDUzMDU3NH0.dS4mQBL0q_JhsZQF14KKB0nL2f3H--2hPoxXzitPOgo"},body:JSON.stringify({training_id:s,progress:m,status:m===100?"completed":"in_progress"}),mode:"cors",credentials:"omit"});if(!p.ok){const h=yield p.text();throw new Error(`HTTP ${p.status}: ${h}`)}const j=yield p.json();se.success("Training progress updated!"),O()}catch(p){se.error(p instanceof Error?p.message:"Failed to update training progress")}}),C=s=>L(void 0,null,function*(){try{const m=yield fetch("https://dznbihypzmvcmradijqn.supabase.co/functions/v1/update-training-progress",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c==null?void 0:c.access_token}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bmJpaHlwem12Y21yYWRpanFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NzQsImV4cCI6MjA3MDUzMDU3NH0.dS4mQBL0q_JhsZQF14KKB0nL2f3H--2hPoxXzitPOgo"},body:JSON.stringify({training_id:s,progress:100,status:"completed",completion_date:new Date().toISOString()}),mode:"cors",credentials:"omit"});if(!m.ok){const j=yield m.text();throw new Error(`HTTP ${m.status}: ${j}`)}const p=yield m.json();se.success("Training completed successfully!"),O()}catch(m){se.error(m instanceof Error?m.message:"Failed to complete training")}});if(f||T)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading compliance dashboard..."})]})});if(!a||!n)return e.jsx(Re,{to:"/auth",replace:!0});if(n.role!=="driver")return e.jsx(Re,{to:"/dashboard",replace:!0});if(U)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Compliance Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:U}),e.jsxs(g,{onClick:O,variant:"outline",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})});const P=(s,m)=>s==="expired"||m<0?e.jsx(E,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Expired"}):s==="due_soon"||m<=30&&m>0?e.jsx(E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Due Soon"}):s==="valid"?e.jsx(E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Valid"}):s==="completed"?e.jsx(E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Completed"}):s==="in_progress"?e.jsx(E,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"In Progress"}):s==="due"?e.jsx(E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Due"}):e.jsx(E,{variant:"secondary",children:s}),R=s=>{switch(s){case"license":return e.jsx(ee,{className:"w-5 h-5 text-blue-600"});case"medical":return e.jsx(xe,{className:"w-5 h-5 text-green-600"});case"training":return e.jsx(G,{className:"w-5 h-5 text-purple-600"});case"background":return e.jsx(ne,{className:"w-5 h-5 text-orange-600"});case"inspection":return e.jsx(ne,{className:"w-5 h-5 text-red-600"});default:return e.jsx(xe,{className:"w-5 h-5"})}},A=s=>s>=90?"text-green-600":s>=75?"text-yellow-600":"text-red-600",D=Y.map(s=>{const m=new Date(s.expiry_date),p=new Date,j=Math.ceil((m.getTime()-p.getTime())/(1e3*60*60*24));return{id:s.id,name:`${s.license_type} License`,type:"license",status:j>0?"valid":"expired",expiryDate:s.expiry_date,daysUntilExpiry:j,lastUpdated:s.created_at,documentUrl:"#",licenseNumber:s.license_number,issuingAuthority:s.issuing_authority}}),B=D.filter(s=>s.status==="valid"&&s.daysUntilExpiry>0),q=D.filter(s=>s.status==="expired"||s.daysUntilExpiry<=0),V=D.filter(s=>s.status==="valid"&&s.daysUntilExpiry<=30&&s.daysUntilExpiry>0),M=D.length>0||v.length>0||b.length>0||w.length>0,d=e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:`${i?"space-y-3":"flex justify-between items-center"}`,children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`${i?"text-2xl":"text-3xl"} font-bold text-gray-900 flex items-center gap-2 sm:gap-3`,children:[e.jsx(ee,{className:`${i?"w-6 h-6":"w-8 h-8"} text-green-600`}),"Driver Compliance"]}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Track your compliance status and certifications"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${i?"w-full":"space-x-2"}`,children:[e.jsxs(g,{onClick:O,variant:"outline",disabled:T,size:i?"sm":"default",className:i?"flex-1":"",children:[e.jsx(je,{className:`w-4 h-4 ${i?"mr-1":"mr-2"} ${T?"animate-spin":""}`}),i?"Refresh":"Refresh Data"]}),e.jsxs(g,{className:`bg-green-600 hover:bg-green-700 ${i?"flex-1":""}`,size:i?"sm":"default",children:[e.jsx(me,{className:`w-4 h-4 ${i?"mr-1":"mr-2"}`}),i?"Update":"Update Documents"]})]})]}),!M&&!T&&e.jsx(S,{className:"bg-gradient-to-r from-blue-50 to-green-50",children:e.jsxs(I,{className:`${i?"p-6":"p-8"} text-center`,children:[e.jsx(ee,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Welcome to Your Compliance Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Your compliance dashboard is ready! Once you have licenses, training records, or compliance data, it will appear here for easy tracking and management."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(g,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Upload Documents"]}),e.jsxs(g,{variant:"outline",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"View Training"]})]})]})}),e.jsx(S,{className:"bg-gradient-to-r from-green-50 to-blue-50",children:e.jsx(I,{className:`${i?"p-4":"p-6"}`,children:e.jsxs("div",{className:`${i?"flex flex-col space-y-4":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:i?"text-center":"",children:[e.jsx("h2",{className:`${i?"text-lg":"text-xl"} font-semibold mb-2`,children:"Overall Compliance Score"}),e.jsxs("div",{className:`${i?"text-3xl":"text-4xl"} font-bold ${A($.overallScore)}`,children:[$.overallScore,"%"]}),e.jsx("p",{className:`text-gray-600 mt-2 ${i?"text-sm":""}`,children:$.overallScore>=90?"Excellent compliance status":$.overallScore>=75?"Good compliance status":"Compliance attention needed"})]}),e.jsx("div",{className:`${i?"flex justify-center":"text-right"}`,children:e.jsxs("div",{className:`${i?"w-24 h-24":"w-32 h-32"} relative`,children:[e.jsxs("svg",{className:`${i?"w-24 h-24":"w-32 h-32"} transform -rotate-90`,viewBox:"0 0 36 36",children:[e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"2",strokeDasharray:`${$.overallScore}, 100`})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ne,{className:`${i?"w-6 h-6":"w-8 h-8"} text-green-600`})})]})})]})})}),e.jsxs("div",{className:`grid ${i?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[e.jsx(S,{children:e.jsx(I,{className:`${i?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${i?"gap-2":"gap-3"}`,children:[e.jsx(ne,{className:`${i?"w-6 h-6":"w-8 h-8"} text-green-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${i?"text-xs":"text-sm"} text-gray-600`,children:"Valid Documents"}),e.jsx("p",{className:`${i?"text-lg":"text-2xl"} font-bold text-green-600`,children:B.length})]})]})})}),e.jsx(S,{children:e.jsx(I,{className:`${i?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${i?"gap-2":"gap-3"}`,children:[e.jsx(K,{className:`${i?"w-6 h-6":"w-8 h-8"} text-yellow-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${i?"text-xs":"text-sm"} text-gray-600`,children:"Due Soon"}),e.jsx("p",{className:`${i?"text-lg":"text-2xl"} font-bold text-yellow-600`,children:V.length})]})]})})}),e.jsx(S,{children:e.jsx(I,{className:`${i?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${i?"gap-2":"gap-3"}`,children:[e.jsx(K,{className:`${i?"w-6 h-6":"w-8 h-8"} text-red-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${i?"text-xs":"text-sm"} text-gray-600`,children:"Expired"}),e.jsx("p",{className:`${i?"text-lg":"text-2xl"} font-bold text-red-600`,children:q.length})]})]})})}),e.jsx(S,{children:e.jsx(I,{className:`${i?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${i?"gap-2":"gap-3"}`,children:[e.jsx(G,{className:`${i?"w-6 h-6":"w-8 h-8"} text-blue-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${i?"text-xs":"text-sm"} text-gray-600`,children:"Active Violations"}),e.jsx("p",{className:`${i?"text-lg":"text-2xl"} font-bold`,children:b.filter(s=>s.status==="active"||s.status==="pending").length})]})]})})})]}),e.jsxs(We,{defaultValue:"documents",className:`${i?"space-y-4":"space-y-6"}`,children:[e.jsxs(Ye,{className:`grid w-full ${i?"grid-cols-2 gap-1":"grid-cols-4"}`,children:[e.jsx(oe,{value:"documents",className:i?"text-xs px-2":"",children:i?"Docs":"Documents"}),e.jsx(oe,{value:"training",className:i?"text-xs px-2":"",children:"Training"}),e.jsx(oe,{value:"driving-record",className:i?"text-xs px-2":"",children:i?"Record":"Driving Record"}),e.jsx(oe,{value:"reminders",className:i?"text-xs px-2":"",children:"Reminders"})]}),e.jsx(de,{value:"documents",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(te,{children:e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Required Documents"]})}),e.jsx(I,{children:D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload your licenses and certifications to track compliance"}),e.jsxs(g,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})]}):e.jsx("div",{className:"space-y-4",children:D.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[R(s.type),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expires: ",J(new Date(s.expiryDate),"MM/dd/yyyy"),s.daysUntilExpiry>0?` (${s.daysUntilExpiry} days remaining)`:` (Expired ${Math.abs(s.daysUntilExpiry)} days ago)`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P(s.status,s.daysUntilExpiry),e.jsxs(Xe,{children:[e.jsx(Ze,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",children:e.jsx(cs,{className:"w-4 h-4"})})}),e.jsxs(Ke,{children:[e.jsx(es,{children:e.jsxs(ss,{children:[s.name," Details"]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{children:P(s.status,s.daysUntilExpiry)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expires:"}),e.jsx("span",{children:J(new Date(s.expiryDate),"MM/dd/yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("span",{children:J(new Date(s.lastUpdated),"MM/dd/yyyy")})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(g,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(g,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Update"]})]})]})]})})]})]})]})]}),s.daysUntilExpiry<=30&&s.daysUntilExpiry>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Renewal Required"})]}),e.jsxs("p",{className:"text-yellow-700 mt-1",children:["This document expires in ",s.daysUntilExpiry," days. Please renew to maintain compliance."]})]}),s.daysUntilExpiry<0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Document Expired"})]}),e.jsxs("p",{className:"text-red-700 mt-1",children:["This document expired ",Math.abs(s.daysUntilExpiry)," days ago. Immediate renewal required to maintain driving privileges."]})]})]},s.id))})})]})}),e.jsx(de,{value:"training",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(te,{children:e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Training & Certifications"]})}),e.jsx(I,{children:v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Training Records"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Complete training modules to improve your compliance score"}),e.jsxs(g,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Start Training"]})]}):e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Training Module"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P(s.status),s.status==="completed"&&e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),"Certificate"]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.status==="completed"&&e.jsxs("p",{children:["Completed: 100% | Progress: ",s.progress,"%"]}),s.status==="in_progress"&&e.jsxs("div",{children:[e.jsxs("p",{children:["Due: ",s.dueDate?J(new Date(s.dueDate),"MM/dd/yyyy"):"No due date"]}),e.jsx(ts,{value:s.progress,className:"mt-2"}),e.jsxs("p",{className:"text-xs mt-1",children:[s.progress,"% complete"]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>z(s.id,Math.min(s.progress+25,100)),children:"Update Progress"}),s.progress>=100&&e.jsx(g,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>C(s.id),children:"Mark Complete"})]})]}),s.status==="not_started"&&e.jsxs("p",{children:["Due: ",s.dueDate?J(new Date(s.dueDate),"MM/dd/yyyy"):"No due date"]})]})]},s.id))})})]})}),e.jsx(de,{value:"driving-record",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(te,{children:e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Compliance Violations"]})}),e.jsxs(I,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Active Violations"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:b.filter(s=>s.status==="active"||s.status==="pending").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Current active violations"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Resolved Violations"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:b.filter(s=>s.status==="resolved"||s.status==="closed").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Successfully resolved violations"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Recent Violations"}),b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Clean Record"}),e.jsx("p",{className:"text-green-700",children:"No compliance violations found"})]}):e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.violationType}),e.jsxs("p",{className:"text-sm text-gray-600",children:[J(new Date(s.violationDate),"MM/dd/yyyy")," â€¢ ",s.description]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(E,{className:`${s.severity==="critical"?"bg-red-100 text-red-800":s.severity==="major"?"bg-orange-100 text-orange-800":s.severity==="minor"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"} hover:bg-opacity-80 mt-1`,children:s.severity}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s.status})]})]})},s.id))})]})]})]})}),e.jsx(de,{value:"reminders",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(te,{children:e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Upcoming Reminders"]})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[D.filter(s=>s.daysUntilExpiry<=60&&s.daysUntilExpiry>0).sort((s,m)=>s.daysUntilExpiry-m.daysUntilExpiry).map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(os,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[s.name," Renewal"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",J(new Date(s.expiryDate),"MM/dd/yyyy")," (",s.daysUntilExpiry," days)"]})]})]}),e.jsx(g,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:"Set Reminder"})]})},s.id)),v.filter(s=>s.status==="not_started").map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[s.name," Training"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",J(new Date(s.dueDate),"MM/dd/yyyy")]})]})]}),e.jsx(g,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Schedule Training"})]})},s.id))]})})]})})]})]});return e.jsxs(e.Fragment,{children:[i?e.jsx(as,{children:d}):d,e.jsx(ds,{})]})};export{Ds as default};
