var u=(d,n,s)=>new Promise((i,o)=>{var l=r=>{try{t(s.next(r))}catch(a){o(a)}},c=r=>{try{t(s.throw(r))}catch(a){o(a)}},t=r=>r.done?i(r.value):Promise.resolve(r.value).then(l,c);t((s=s.apply(d,n)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as p}from"./react-vendor-BvqlMsL5.js";import{s as x}from"./index-ZwIgorfy.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./icons-vendor-b0I7fGSL.js";import"./query-vendor-B2F_wWlc.js";import"./router-vendor-CEyBJ8vK.js";import"./ui-components-7w1-MJre.js";const v=()=>{const[d,n]=p.useState(!1),[s,i]=p.useState(null),[o,l]=p.useState("test@example.com"),c=()=>u(void 0,null,function*(){n(!0),i(null);try{console.log("Testing edge function setup...");const{data:t,error:r}=yield x.functions.invoke("send-general-email",{body:{emailData:{from:"LSR Transport <noreply@lsr-transport.com>",to:[o],subject:"Edge Function Setup Test",html:`
              <h1>Edge Function Test</h1>
              <p>This email was sent via the Supabase Edge Function!</p>
              <p>If you receive this, the setup is working correctly.</p>
              <p>Timestamp: ${new Date().toLocaleString()}</p>
            `}}});r?(console.error("Edge function error:",r),i({success:!1,message:`Edge function error: ${r.message}`,details:r})):(console.log("Edge function response:",t),i({success:!0,message:"Edge function test successful!",details:t}))}catch(t){console.error("Test error:",t),i({success:!1,message:`Test error: ${t.message}`,details:t})}finally{n(!1)}});return e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",maxWidth:"800px"},children:[e.jsx("h1",{children:"üîß Edge Function Setup Test"}),e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"5px"},children:[e.jsx("h3",{children:"‚úÖ Edge Function Deployed!"}),e.jsxs("p",{children:["The ",e.jsx("code",{children:"send-general-email"})," edge function has been successfully deployed to Supabase. This test will verify that the setup is working correctly."]})]}),e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"5px"},children:[e.jsx("h3",{children:"üß™ Test Edge Function Setup"}),e.jsx("p",{children:"This will test the edge function directly to verify the setup:"}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Email Address to Send Test To:"}),e.jsx("input",{type:"email",value:o,onChange:t=>l(t.target.value),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"5px",fontSize:"16px"},placeholder:"Enter email address"})]}),e.jsx("button",{onClick:c,disabled:d,style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"12px 24px",borderRadius:"5px",cursor:d?"not-allowed":"pointer",fontSize:"16px",width:"100%"},children:d?"Testing Edge Function...":"Test Edge Function Setup"})]}),s&&e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:s.success?"#d4edda":"#f8d7da",border:`1px solid ${s.success?"#c3e6cb":"#f5c6cb"}`,borderRadius:"5px"},children:[e.jsx("h3",{children:s.success?"‚úÖ Success!":"‚ùå Error"}),e.jsx("p",{style:{fontWeight:"bold"},children:s.message}),s.details&&e.jsxs("details",{style:{marginTop:"10px"},children:[e.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"View Details"}),e.jsx("pre",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"3px",overflow:"auto",marginTop:"10px",fontSize:"12px"},children:JSON.stringify(s.details,null,2)})]})]}),e.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"5px"},children:[e.jsx("h3",{children:"üîß Setup Checklist"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["‚úÖ ",e.jsx("strong",{children:"Edge Function Created:"})," ",e.jsx("code",{children:"send-general-email"})]}),e.jsxs("li",{children:["‚úÖ ",e.jsx("strong",{children:"CORS Headers Updated:"})," Added user-agent and methods"]}),e.jsxs("li",{children:["‚úÖ ",e.jsx("strong",{children:"Edge Function Deployed:"})," Successfully deployed to Supabase"]}),e.jsxs("li",{children:["‚ö†Ô∏è ",e.jsx("strong",{children:"API Key Setup:"})," Need to set ",e.jsx("code",{children:"RESEND_API_KEY"})," secret"]}),e.jsxs("li",{children:["‚è≥ ",e.jsx("strong",{children:"Test Results:"})," Run the test above to verify"]})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#d1ecf1",border:"1px solid #bee5eb",borderRadius:"5px"},children:[e.jsx("h3",{children:"üìã Next Steps"}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Set API Key:"})," Run ",e.jsx("code",{children:"supabase secrets set RESEND_API_KEY=re_YOUR_ACTUAL_KEY"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Test Setup:"})," Use the test button above"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Verify Email:"})," Check if test email is received"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Test Full System:"})," Go to ",e.jsx("a",{href:"/edge-function-email-test",children:"Edge Function Email Test"})]})]})]})]})};export{v as default};
