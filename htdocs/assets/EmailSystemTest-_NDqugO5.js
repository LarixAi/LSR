var q=Object.defineProperty,M=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var W=(l,a,i)=>a in l?q(l,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[a]=i,d=(l,a)=>{for(var i in a||(a={}))G.call(a,i)&&W(l,i,a[i]);if(I)for(var i of I(a))J.call(a,i)&&W(l,i,a[i]);return l},o=(l,a)=>M(l,z(a));var x=(l,a,i)=>new Promise((b,u)=>{var F=n=>{try{s(i.next(n))}catch(r){u(r)}},A=n=>{try{s(i.throw(n))}catch(r){u(r)}},s=n=>n.done?b(n.value):Promise.resolve(n.value).then(F,A);s((i=i.apply(l,a)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as C}from"./react-vendor-BvqlMsL5.js";import{l as K,C as h,a as g,b as j,d as p,L as E,I as k,S as O,q as X,r as Y,t as Z,v as B,h as Q,i as _,j as v,k as y,B as N,A as ee,g as se}from"./index-ZwIgorfy.js";import{E as S}from"./emailService-CYvLt_Xb.js";import{P as ae}from"./passwordResetService-iJGmCZNu.js";import{h as H,r as te,Z as f,G as T,F as ie,d as le,am as re,f as ne,J as R,ao as me}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./router-vendor-CEyBJ8vK.js";import"./ui-components-7w1-MJre.js";const we=()=>{const{toast:l}=K(),[a,i]=C.useState(!1),[b,u]=C.useState({}),[F,A]=C.useState("welcome"),[s,n]=C.useState({email:"",firstName:"Test",lastName:"User",agreementTitle:"Terms of Service",agreementType:"terms of service",loginUrl:`${window.location.origin}/auth`}),r=(t,w)=>x(void 0,null,function*(){i(!0),u(m=>o(d({},m),{[t]:null}));try{const m=yield w();u(P=>o(d({},P),{[t]:{success:m,message:m?"Email sent successfully!":"Failed to send email"}})),l({title:m?"Test Successful":"Test Failed",description:m?`${t} email sent successfully`:`Failed to send ${t} email`,variant:m?"default":"destructive"})}catch(m){u(P=>o(d({},P),{[t]:{success:!1,message:m.message||"Test failed"}})),l({title:"Test Failed",description:m.message||`Failed to send ${t} email`,variant:"destructive"})}finally{i(!1)}}),L=()=>x(void 0,null,function*(){return yield S.sendWelcomeEmail({to:s.email,firstName:s.firstName,lastName:s.lastName,email:s.email,loginUrl:s.loginUrl})}),U=()=>x(void 0,null,function*(){return yield S.sendAgreementNotification({to:s.email,firstName:s.firstName,lastName:s.lastName,email:s.email,agreementTitle:s.agreementTitle,agreementType:s.agreementType,loginUrl:s.loginUrl})}),$=()=>x(void 0,null,function*(){return yield S.sendReminderEmail({to:s.email,firstName:s.firstName,lastName:s.lastName,email:s.email,agreementTitle:s.agreementTitle,agreementType:s.agreementType,loginUrl:s.loginUrl})}),V=()=>x(void 0,null,function*(){return(yield ae.sendPasswordResetEmail(s.email)).success}),D=()=>x(void 0,null,function*(){return yield S.sendCustomEmail({to:s.email,subject:"Test Custom Email - LSR Transport",html:`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Test Custom Email</title>
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
            .container { max-width: 600px; margin: 0 auto; padding: 20px; }
            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
            .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; }
            .footer { text-align: center; margin-top: 30px; color: #666; font-size: 14px; }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h1>Test Custom Email</h1>
              <p>LSR Transport Email System Test</p>
            </div>
            <div class="content">
              <h2>Hi ${s.firstName},</h2>
              <p>This is a test custom email to verify that your email system is working correctly.</p>
              <p><strong>Test Details:</strong></p>
              <ul>
                <li>Email Type: Custom Email</li>
                <li>Recipient: ${s.email}</li>
                <li>Timestamp: ${new Date().toLocaleString()}</li>
                <li>Status: Working ✅</li>
              </ul>
              <p>If you received this email, your LSR Transport email system is functioning properly!</p>
            </div>
            <div class="footer">
              <p>© 2024 LSR Transport. All rights reserved.</p>
              <p>This is a test email sent to ${s.email}</p>
            </div>
          </div>
        </body>
        </html>
      `})}),c=t=>{const w=b[t];return w?e.jsxs(ee,{children:[w.success?e.jsx(R,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsxs("strong",{children:[t,":"]})," ",w.message]})]}):null};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Email System Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test all email functionality in your LSR Transport app"})]}),e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Email Configuration"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"test-email",children:"Email Address"}),e.jsx(k,{id:"test-email",type:"email",value:s.email,onChange:t=>n(o(d({},s),{email:t.target.value})),placeholder:"test@example.com"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"test-firstname",children:"First Name"}),e.jsx(k,{id:"test-firstname",value:s.firstName,onChange:t=>n(o(d({},s),{firstName:t.target.value})),placeholder:"Test"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{htmlFor:"test-agreement-title",children:"Agreement Title"}),e.jsx(k,{id:"test-agreement-title",value:s.agreementTitle,onChange:t=>n(o(d({},s),{agreementTitle:t.target.value})),placeholder:"Terms of Service"})]}),e.jsxs("div",{children:[e.jsx(E,{htmlFor:"test-agreement-type",children:"Agreement Type"}),e.jsxs(O,{value:s.agreementType,onValueChange:t=>n(o(d({},s),{agreementType:t})),children:[e.jsx(X,{children:e.jsx(Y,{})}),e.jsxs(Z,{children:[e.jsx(B,{value:"terms of service",children:"Terms of Service"}),e.jsx(B,{value:"privacy policy",children:"Privacy Policy"})]})]})]})]})]})]}),e.jsxs(Q,{value:F,onValueChange:A,children:[e.jsxs(_,{className:"grid w-full grid-cols-5",children:[e.jsx(v,{value:"welcome",children:"Welcome"}),e.jsx(v,{value:"agreements",children:"Agreements"}),e.jsx(v,{value:"password",children:"Password Reset"}),e.jsx(v,{value:"custom",children:"Custom"}),e.jsx(v,{value:"all",children:"All Tests"})]}),e.jsx(y,{value:"welcome",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Welcome Email Test"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the welcome email that new users receive when they sign up."}),e.jsx(N,{onClick:()=>r("welcome",L),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Test Welcome Email"]})}),c("welcome")]})]})}),e.jsx(y,{value:"agreements",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Agreement Update Notification"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the agreement update notification email."}),e.jsx(N,{onClick:()=>r("agreement-notification",U),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Test Agreement Notification"]})}),c("agreement-notification")]})]}),e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Agreement Reminder"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the agreement reminder email."}),e.jsx(N,{onClick:()=>r("agreement-reminder",$),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Test Agreement Reminder"]})}),c("agreement-reminder")]})]})]})}),e.jsx(y,{value:"password",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Password Reset Email Test"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the password reset email functionality."}),e.jsx(N,{onClick:()=>r("password-reset",V),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Test Password Reset"]})}),c("password-reset")]})]})}),e.jsx(y,{value:"custom",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Custom Email Test"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test sending a custom email with your own HTML template."}),e.jsx(N,{onClick:()=>r("custom-email",D),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Test Custom Email"]})}),c("custom-email")]})]})}),e.jsx(y,{value:"all",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Run All Email Tests"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test all email types in sequence to verify your entire email system."}),e.jsx(N,{onClick:()=>x(void 0,null,function*(){yield r("welcome",L),yield new Promise(t=>setTimeout(t,1e3)),yield r("agreement-notification",U),yield new Promise(t=>setTimeout(t,1e3)),yield r("agreement-reminder",$),yield new Promise(t=>setTimeout(t,1e3)),yield r("custom-email",D)}),disabled:a||!s.email,className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Running All Tests..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Run All Email Tests"]})}),e.jsxs("div",{className:"space-y-2",children:[c("welcome"),c("agreement-notification"),c("agreement-reminder"),c("custom-email")]})]})]})})]}),e.jsxs(h,{children:[e.jsx(g,{children:e.jsx(j,{children:"Email System Status"})}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Resend API Key: Configured"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Email Service: Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"All Templates: Ready"})]})]})})]})]})};export{we as default};
