var I=Object.defineProperty,D=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var C=(a,i,t)=>i in a?I(a,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[i]=t,x=(a,i)=>{for(var t in i||(i={}))G.call(i,t)&&C(a,t,i[t]);if(S)for(var t of S(i))M.call(i,t)&&C(a,t,i[t]);return a},p=(a,i)=>D(a,U(i));var c=(a,i,t)=>new Promise((u,o)=>{var r=l=>{try{n(t.next(l))}catch(h){o(h)}},d=l=>{try{n(t.throw(l))}catch(h){o(h)}},n=l=>l.done?u(l.value):Promise.resolve(l.value).then(r,d);n((t=t.apply(a,i)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as y}from"./react-vendor-BvqlMsL5.js";import{l as H,B as m,C as j,a as f,b as g,d as v,L as N,I as T,T as J,e as K,A as P,g as O}from"./index-ZwIgorfy.js";import{E as b}from"./emailService-CYvLt_Xb.js";import{Resend as V}from"./index-BSwnDmYO.js";import{G as Y,f as Z,h as E,Z as z,J as Q,ao as X}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./router-vendor-CEyBJ8vK.js";import"./ui-components-7w1-MJre.js";const oe=()=>{const{toast:a}=H(),[i,t]=y.useState(!1),[u,o]=y.useState([]),[r,d]=y.useState({to:"",subject:"Test Email from LSR Transport",html:"<h1>Hello from LSR Transport!</h1><p>This is a test email sent via Resend.</p>"}),n=new V("re_8KLgKmZb_GhCzD5G7QupJGsdjY5Mb4cHo"),l=(s,F,L,W)=>{o(_=>[..._,{id:Date.now(),test:s,success:F,message:L,data:W,timestamp:new Date().toISOString()}])},h=()=>c(void 0,null,function*(){t(!0);try{const s=yield n.emails.send({from:"LSR Transport <onboarding@resend.dev>",to:[r.to||"test@example.com"],subject:r.subject,html:r.html});l("Simple Email Send",!0,"Email sent successfully",s),a({title:"Email Sent!",description:"Test email sent successfully via Resend"})}catch(s){l("Simple Email Send",!1,s.message,s),a({title:"Email Failed",description:s.message||"Failed to send email",variant:"destructive"})}finally{t(!1)}}),w=()=>c(void 0,null,function*(){t(!0);try{const s=yield n.batch.send([{from:"LSR Transport <onboarding@resend.dev>",to:[r.to||"test1@example.com"],subject:"Batch Test 1",html:"<h1>Batch Email 1</h1><p>This is the first email in the batch.</p>"},{from:"LSR Transport <onboarding@resend.dev>",to:[r.to||"test2@example.com"],subject:"Batch Test 2",html:"<h1>Batch Email 2</h1><p>This is the second email in the batch.</p>"}]);l("Batch Email Send",!0,"Batch emails sent successfully",s),a({title:"Batch Emails Sent!",description:"Multiple emails sent successfully via Resend"})}catch(s){l("Batch Email Send",!1,s.message,s),a({title:"Batch Email Failed",description:s.message||"Failed to send batch emails",variant:"destructive"})}finally{t(!1)}}),R=()=>c(void 0,null,function*(){t(!0);try{(yield b.sendCustomEmail({to:r.to||"test@example.com",subject:r.subject,html:r.html}))?(l("Custom Email Service",!0,"Email sent via EmailService"),a({title:"Custom Email Sent!",description:"Email sent via our EmailService wrapper"})):(l("Custom Email Service",!1,"Email service failed"),a({title:"Custom Email Failed",description:"EmailService failed to send email",variant:"destructive"}))}catch(s){l("Custom Email Service",!1,s.message,s),a({title:"Custom Email Error",description:s.message||"Error in custom email service",variant:"destructive"})}finally{t(!1)}}),A=()=>c(void 0,null,function*(){t(!0);try{(yield b.sendAgreementNotification({to:r.to||"test@example.com",firstName:"Test User",agreementTitle:"Updated Terms of Service",agreementType:"Terms of Service",loginUrl:"http://localhost:3000/auth"}))?(l("Agreement Notification",!0,"Agreement notification sent"),a({title:"Agreement Email Sent!",description:"Agreement notification email sent successfully"})):(l("Agreement Notification",!1,"Agreement notification failed"),a({title:"Agreement Email Failed",description:"Failed to send agreement notification",variant:"destructive"}))}catch(s){l("Agreement Notification",!1,s.message,s),a({title:"Agreement Email Error",description:s.message||"Error sending agreement notification",variant:"destructive"})}finally{t(!1)}}),k=()=>c(void 0,null,function*(){t(!0);try{(yield b.sendWelcomeEmail({to:r.to||"test@example.com",firstName:"Test User",loginUrl:"http://localhost:3000/auth"}))?(l("Welcome Email",!0,"Welcome email sent"),a({title:"Welcome Email Sent!",description:"Welcome email sent successfully"})):(l("Welcome Email",!1,"Welcome email failed"),a({title:"Welcome Email Failed",description:"Failed to send welcome email",variant:"destructive"}))}catch(s){l("Welcome Email",!1,s.message,s),a({title:"Welcome Email Error",description:s.message||"Error sending welcome email",variant:"destructive"})}finally{t(!1)}}),B=()=>{o([])};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Email System Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test Resend email functionality"})]}),e.jsx(m,{onClick:B,variant:"outline",children:"Clear Results"})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(g,{children:"Email Configuration"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"email",children:"Recipient Email"}),e.jsx(T,{id:"email",type:"email",value:r.to,onChange:s=>d(p(x({},r),{to:s.target.value})),placeholder:"test@example.com"})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"subject",children:"Subject"}),e.jsx(T,{id:"subject",value:r.subject,onChange:s=>d(p(x({},r),{subject:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"html",children:"HTML Content"}),e.jsx(J,{id:"html",value:r.html,onChange:s=>d(p(x({},r),{html:s.target.value})),rows:4})]})]})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(g,{children:"Email Tests"})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(m,{onClick:h,disabled:i,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Simple Email"]}),e.jsxs(m,{onClick:w,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Batch Emails"]}),e.jsxs(m,{onClick:R,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Custom Service"]}),e.jsxs(m,{onClick:A,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Agreement Email"]}),e.jsxs(m,{onClick:k,disabled:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Welcome Email"]})]}),i&&e.jsxs("div",{className:"flex items-center justify-center mt-4",children:[e.jsx(z,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{children:"Sending email..."})]})]})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(g,{children:"Test Results"})}),e.jsx(v,{children:u.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No tests run yet. Click a test button above to start."}):e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.success?e.jsx(Q,{className:"h-5 w-5 text-green-600"}):e.jsx(X,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:s.test}),e.jsx(K,{variant:s.success?"default":"destructive",children:s.success?"Success":"Failed"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleString()}),s.data&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-sm cursor-pointer text-blue-600",children:"View Details"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(s.data,null,2)})]})]})]},s.id))})})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(g,{children:"Setup Instructions"})}),e.jsxs(v,{children:[e.jsxs(P,{children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs(O,{children:[e.jsx("strong",{children:"Before testing:"})," Make sure you have set up your Resend API key in your environment variables. Add ",e.jsx("code",{children:"VITE_RESEND_API_KEY=re_your_api_key_here"})," to your ",e.jsx("code",{children:".env"})," file."]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1."})," Get your API key from ",e.jsx("a",{href:"https://resend.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Resend Dashboard"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2."})," Add the key to your ",e.jsx("code",{children:".env"})," file"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3."})," Restart your development server"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4."})," Enter a test email address above"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5."})," Click any test button to verify email functionality"]})]})]})]})]})};export{oe as default};
