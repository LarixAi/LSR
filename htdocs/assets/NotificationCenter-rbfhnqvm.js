var k=Object.defineProperty,z=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var p=(r,t,a)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,d=(r,t)=>{for(var a in t||(t={}))D.call(t,a)&&p(r,a,t[a]);if(j)for(var a of j(t))M.call(t,a)&&p(r,a,t[a]);return r},m=(r,t)=>z(r,T(t));import{j as e}from"./ui-vendor-DMUr7mTx.js";import{C as v,a as N,b,B as n,h as S,i as P,j as o,e as B,k as F,a0 as V,X as Y,Y as E,Z as L,d as X,u as _}from"./index-ZwIgorfy.js";import{r as f}from"./react-vendor-BvqlMsL5.js";import{w as $,S as q,ab as H,j as I}from"./icons-vendor-b0I7fGSL.js";import{N as O}from"./router-vendor-CEyBJ8vK.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const U=({isOpen:r,onClose:t})=>{const[a,y]=f.useState("all"),[x,h]=f.useState([{id:"1",type:"comment",user:{name:"Amélie",avatar:"/avatars/amelie.jpg",status:"online"},title:"Amélie commented in Dashboard 2.0",content:"Really love this approach. I think this is the best solution for the document sync UX issue.",timestamp:"Friday 3:12 PM",timeAgo:"2 hours ago",isRead:!1,project:"Dashboard 2.0"},{id:"2",type:"follow",user:{name:"Sienna",avatar:"/avatars/sienna.jpg",status:"away"},title:"Sienna followed you",timestamp:"Friday 3:04 PM",timeAgo:"2 hours ago",isRead:!1},{id:"3",type:"invitation",user:{name:"Ammar",avatar:"/avatars/ammar.jpg",status:"offline"},title:"Ammar invited you to Blog design",timestamp:"Friday 2:22 PM",timeAgo:"3 hours ago",isRead:!0,project:"Blog design",actions:[{label:"Decline",variant:"outline",action:()=>u("3","decline")},{label:"Accept",variant:"default",action:()=>u("3","accept")}]},{id:"4",type:"file_share",user:{name:"Mathilde",avatar:"/avatars/mathilde.jpg",status:"online"},title:"Mathilde shared a file in Dashboard 2.0",timestamp:"Friday 1:40 PM",timeAgo:"4 hours ago",isRead:!0,project:"Dashboard 2.0",file:{name:"Prototype recording 01.mp4",type:"MP4",size:"14 MB"}}]),u=(s,i)=>{h(l=>l.map(c=>c.id===s?m(d({},c),{isRead:!0}):c)),console.log(i==="accept"?"Accepted invitation for notification:":"Declined invitation for notification:",s)},w=s=>{console.log("Downloading file for notification:",s)},A=()=>{h(s=>s.map(i=>m(d({},i),{isRead:!0})))},C=s=>{switch(s){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},R=x.filter(s=>a==="all"?!0:a==="verified"?s.user.status==="online":a==="mentions"?s.type==="comment":!0),g=x.filter(s=>!s.isRead).length;return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-end p-4",children:e.jsxs(v,{className:"w-96 max-h-[600px] shadow-xl",children:[e.jsx(N,{className:"pb-3 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-lg font-semibold",children:"Your notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:A,className:"h-8 w-8 p-0 text-gray-500 hover:text-gray-700",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0 text-gray-500 hover:text-gray-700",children:e.jsx(q,{className:"w-4 h-4"})})]})]})}),e.jsxs(S,{value:a,onValueChange:y,className:"w-full",children:[e.jsxs(P,{className:"grid w-full grid-cols-3 bg-gray-50",children:[e.jsxs(o,{value:"all",className:"flex items-center gap-2",children:["View all",g>0&&e.jsx(B,{variant:"secondary",className:"text-xs",children:g})]}),e.jsx(o,{value:"verified",children:"Verified"}),e.jsx(o,{value:"mentions",children:"Mentions"})]}),e.jsx(F,{value:a,className:"mt-0",children:e.jsx(V,{className:"h-[500px]",children:e.jsx("div",{className:"space-y-0",children:R.map(s=>e.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${s.isRead?"":"bg-blue-50/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Y,{className:"w-10 h-10",children:[e.jsx(E,{src:s.user.avatar,alt:s.user.name}),e.jsx(L,{className:"bg-gray-200 text-gray-600",children:s.user.name.charAt(0)})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white ${C(s.user.status)}`})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 leading-relaxed",children:s.title.split("**").map((i,l)=>l%2===1?e.jsx("strong",{children:i},l):i)}),s.content&&e.jsx("div",{className:"mt-2 p-3 bg-gray-100 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.content})}),s.file&&e.jsxs("div",{className:"mt-2 flex items-center gap-3 p-3 bg-gray-100 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:s.file.type})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.file.size})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>w(s.id),className:"h-8 w-8 p-0 text-gray-500 hover:text-gray-700",children:e.jsx(H,{className:"w-4 h-4"})})]}),s.actions&&e.jsx("div",{className:"mt-3 flex items-center gap-2",children:s.actions.map((i,l)=>e.jsx(n,{variant:i.variant,size:"sm",onClick:i.action,className:"text-xs",children:i.label},l))})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 ml-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{children:s.timestamp})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{children:s.timeAgo}),!s.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})]})},s.id))})})})]})]})}):null};function Z(){return e.jsxs(v,{children:[e.jsx(N,{children:e.jsx(b,{children:"Notification Test"})}),e.jsx(X,{children:e.jsx("p",{children:"Notification testing functionality will be available here."})})]})}const ie=()=>{const{user:r,profile:t,loading:a}=_();return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading notification center..."})]})}):!r||!t?e.jsx(O,{to:"/auth",replace:!0}):t.organization_id?e.jsxs("div",{className:"space-y-6",children:[e.jsx(U,{}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(Z,{})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Organization Required"}),e.jsx("p",{className:"text-gray-600",children:"You must be assigned to an organization to access notifications."})]})})};export{ie as default};
