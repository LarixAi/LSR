var h=(m,s,n)=>new Promise((x,c)=>{var r=a=>{try{o(n.next(a))}catch(i){c(i)}},d=a=>{try{o(n.throw(a))}catch(i){c(i)}},o=a=>a.done?x(a.value):Promise.resolve(a.value).then(r,d);o((n=n.apply(m,s)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as p}from"./react-vendor-BvqlMsL5.js";import{u as N,L as b,O as v}from"./router-vendor-CEyBJ8vK.js";import{u as y,l as w,B as l,e as u}from"./index-ZwIgorfy.js";import{_ as k,X as C,f,S,L as z,ap as O,$ as P,d as g,H as L,M,g as B,a0 as T}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const W=()=>{var i;const{signOut:m,profile:s}=y(),{toast:n}=w(),x=N(),[c,r]=p.useState(!1),d=[{name:"Dashboard",href:"/parent-dashboard",icon:L},{name:"Live Tracking",href:"/parent-tracking",icon:M},{name:"Schedule",href:"/parent-schedule",icon:B},{name:"Children",href:"/parent-children",icon:f},{name:"Communication",href:"/parent-communication",icon:T},{name:"Notifications",href:"/parent-notifications",icon:g}],o=()=>h(void 0,null,function*(){try{yield m(),n({title:"Signed out successfully",description:"You have been logged out of your account."})}catch(t){n({title:"Sign out failed",description:"There was an error signing out. Please try again.",variant:"destructive"})}}),a=t=>x.pathname===t;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${c?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Parent Portal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Transport Management"})]})]}),e.jsx(l,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>r(!1),children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email}),e.jsx(u,{variant:"outline",className:"mt-1 text-xs",children:"Parent"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:d.map(t=>{const j=t.icon;return e.jsxs(b,{to:t.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a(t.href)?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>r(!1),children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:t.name})]},t.name)})}),e.jsxs("div",{className:"p-4 border-t space-y-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>r(!1),children:[e.jsx(S,{className:"w-4 h-4 mr-3"}),"Settings"]}),e.jsxs(l,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",onClick:o,children:[e.jsx(z,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-white border-b shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>r(!0),children:e.jsx(O,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:((i=d.find(t=>a(t.href)))==null?void 0:i.name)||"Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Welcome back, ",(s==null?void 0:s.first_name)||"Parent","!"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Emergency Contact"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"relative",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx(u,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs",children:"3"})]})]})]})}),e.jsx("main",{className:"flex-1",children:e.jsx(v,{})})]})]})};export{W as default};
