var O=(i,b,n)=>new Promise((u,w)=>{var C=o=>{try{c(n.next(o))}catch(v){w(v)}},F=o=>{try{c(n.throw(o))}catch(v){w(v)}},c=o=>o.done?u(o.value):Promise.resolve(o.value).then(C,F);c((n=n.apply(i,b)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as A}from"./react-vendor-BvqlMsL5.js";import{u as ce,s as Z,B as r,D as he,F as me,m as je,n as ue,o as ge,p as pe,L as l,I as d,T as _,S as V,q as L,r as P,t as z,v as a,C as x,d as h,P as ve,h as Ne,i as ye,j as S,k as D,a as Q,b as T,e as $}from"./index-ZwIgorfy.js";import{T as fe,a as be,b as q,c as g,d as we,e as p}from"./table-6WL4qh3Z.js";import{a as Ce,u as Se,b as De}from"./query-vendor-B2F_wWlc.js";import{N as ee}from"./router-vendor-CEyBJ8vK.js";import{bv as X,S as K,t as G,E as Qe,G as se,D as Te,J as ae,j as E,bf as Fe,m as Ae,T as I,F as te,a2 as Ve,aa as le,ak as Le,h as re,ab as Pe,ar as ie,$ as ze,g as Ee,az as ne}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./ui-components-7w1-MJre.js";const Re=()=>{const{profile:i}=ce(),b=Ce(),{data:n=[],isLoading:u}=Se({queryKey:["quotations-data",i==null?void 0:i.organization_id],queryFn:()=>O(void 0,null,function*(){if(!(i!=null&&i.organization_id))return[];const{data:c,error:o}=yield Z.from("quotations").select("*").eq("organization_id",i.organization_id).order("created_at",{ascending:!1});return o?(console.error("Error fetching quotations:",o),[]):c||[]}),enabled:!!(i!=null&&i.organization_id)}),w=De({mutationFn:()=>O(void 0,null,function*(){if(!(i!=null&&i.organization_id))return;const{error:c}=yield Z.from("quotations").delete().eq("organization_id",i.organization_id);if(c)throw c}),onSuccess:()=>{b.invalidateQueries({queryKey:["quotations-data"]})}}),F=(()=>{const c=n.length,o=n.reduce((t,y)=>t+(y.total_amount||0),0),v=n.filter(t=>t.status==="accepted").length,M=n.filter(t=>t.status==="pending").length,k=n.filter(t=>t.status==="rejected").length,R=n.filter(t=>t.status==="draft").length,N=n.filter(t=>t.valid_until?new Date(t.valid_until)<new Date:!1).length,B=c>0?o/c:0,J=v,m=c-R,Y=m>0?J/m*100:0;return{totalQuotations:c,totalValue:o,acceptedQuotes:v,pendingQuotes:M,rejectedQuotes:k,draftQuotes:R,expiredQuotes:N,averageValue:B,winRate:Y,pendingValue:n.filter(t=>t.status==="pending").reduce((t,y)=>t+(y.total_amount||0),0),acceptedValue:n.filter(t=>t.status==="accepted").reduce((t,y)=>t+(y.total_amount||0),0)}})();return{quotations:n,isLoading:u,clearAllQuotations:w,stats:F,hasData:n.length>0}},Ke=()=>{const{user:i,profile:b,loading:n}=ce(),[u,w]=A.useState(""),[C,F]=A.useState("all"),[c,o]=A.useState("all"),[v,M]=A.useState("all"),[k,R]=A.useState(!1),{quotations:N,isLoading:B,clearAllQuotations:J,stats:m,hasData:Y}=Re();if(n||B)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading quotation management..."})]})});if(!i||!b)return e.jsx(ee,{to:"/auth",replace:!0});if(!["admin","council"].includes(b.role))return e.jsx(ee,{to:"/unauthorized",replace:!0});const t=s=>{const f={draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-orange-100 text-orange-800",converted:"bg-emerald-100 text-emerald-800"};return e.jsx($,{className:f[s]||"bg-gray-100 text-gray-800",children:s})},y=s=>{const f={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx($,{className:f[s]||"bg-gray-100 text-gray-800",children:s})},de=s=>{switch(s){case"accepted":case"converted":return e.jsx(ae,{className:"w-4 h-4 text-green-600"});case"rejected":return e.jsx(I,{className:"w-4 h-4 text-red-600"});case"expired":return e.jsx(E,{className:"w-4 h-4 text-orange-600"});case"pending":case"sent":return e.jsx(E,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(te,{className:"w-4 h-4 text-gray-600"})}},oe=s=>s>=75?"text-green-600":s>=50?"text-yellow-600":s>=25?"text-orange-600":"text-red-600",W=s=>{const f=new Date(s),H=new Date,U=Math.ceil((f.getTime()-H.getTime())/(1e3*60*60*24));return U<=7&&U>0},xe=N.filter(s=>{const f=s.quoteNumber.toLowerCase().includes(u.toLowerCase())||s.customerName.toLowerCase().includes(u.toLowerCase())||s.contactPerson.toLowerCase().includes(u.toLowerCase())||s.serviceType.toLowerCase().includes(u.toLowerCase()),H=C==="all"||s.status===C,U=c==="all"||s.priority===c;return f&&H&&U}),j={totalQuotes:m.totalQuotations,totalValue:m.totalValue,acceptedValue:m.acceptedValue,pendingValue:m.pendingValue,acceptedCount:m.acceptedQuotes,pendingCount:m.pendingQuotes,rejectedCount:m.rejectedQuotes,draftCount:m.draftQuotes,expiringSoon:m.expiredQuotes,avgQuoteValue:m.averageValue,conversionRate:m.winRate};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(X,{className:"w-8 h-8 text-blue-600"}),"Quotation Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create, track, and convert customer quotations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(r,{variant:"outline",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs(he,{open:k,onOpenChange:R,children:[e.jsx(me,{asChild:!0,children:e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Create Quote"]})}),e.jsxs(je,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(ge,{children:"Create New Quotation"}),e.jsx(pe,{children:"Create a new quotation for your customers with detailed service information and pricing."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-name",children:"Customer Name"}),e.jsx(d,{id:"customer-name",placeholder:"Company or individual name"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"contact-person",children:"Contact Person"}),e.jsx(d,{id:"contact-person",placeholder:"Primary contact name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email Address"}),e.jsx(d,{id:"email",type:"email",placeholder:"contact@company.com"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number"}),e.jsx(d,{id:"phone",placeholder:"+44 20 1234 5678"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(_,{id:"address",placeholder:"Full address",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quote Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"quote-number",children:"Quote Number"}),e.jsx(d,{id:"quote-number",placeholder:"QUO-2024-XXX"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"service-type",children:"Service Type"}),e.jsxs(V,{children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Select service type"})}),e.jsxs(z,{children:[e.jsx(a,{value:"school",children:"School Transport"}),e.jsx(a,{value:"medical",children:"Medical Transport"}),e.jsx(a,{value:"corporate",children:"Corporate Shuttle"}),e.jsx(a,{value:"charter",children:"Charter Service"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"passengers",children:"Passengers"}),e.jsx(d,{id:"passengers",type:"number",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"duration",children:"Duration"}),e.jsx(d,{id:"duration",placeholder:"e.g., 6 months"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"frequency",children:"Frequency"}),e.jsx(d,{id:"frequency",placeholder:"e.g., Daily"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"valid-until",children:"Valid Until"}),e.jsx(d,{id:"valid-until",type:"date"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"priority",children:"Priority"}),e.jsxs(V,{children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Select priority"})}),e.jsxs(z,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Service Details"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Service Description"}),e.jsx(_,{id:"description",placeholder:"Detailed description of services",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"route-details",children:"Route Details"}),e.jsx(_,{id:"route-details",placeholder:"Route information, pickup points, etc.",rows:2})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"base-amount",children:"Base Amount (£)"}),e.jsx(d,{id:"base-amount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"discount",children:"Discount (£)"}),e.jsx(d,{id:"discount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),e.jsx(d,{id:"vat-rate",type:"number",step:"0.01",placeholder:"20.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vat-amount",children:"VAT Amount (£)"}),e.jsx(d,{id:"vat-amount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"total-amount",children:"Total Amount (£)"}),e.jsx(d,{id:"total-amount",type:"number",step:"0.01",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"probability",children:"Win Probability (%)"}),e.jsx(d,{id:"probability",type:"number",min:"0",max:"100",placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"competitor-quotes",children:"Competitor Quotes"}),e.jsx(d,{id:"competitor-quotes",type:"number",min:"0",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",children:"Notes & Special Requirements"}),e.jsx(_,{id:"notes",placeholder:"Additional information, terms, conditions...",rows:3})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{className:"flex-1 bg-gray-600 hover:bg-gray-700",children:"Save as Draft"}),e.jsxs(r,{className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Send Quote"]}),e.jsx(r,{className:"flex-1 bg-green-600 hover:bg-green-700",children:"Save & Follow Up"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-6",children:[e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Quotes"}),e.jsx("p",{className:"text-2xl font-bold",children:j.totalQuotes})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["£",j.totalValue.toLocaleString()]})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Won Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",j.acceptedValue.toLocaleString()]})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Value"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["£",j.pendingValue.toLocaleString()]})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[j.conversionRate.toFixed(1),"%"]})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-8 h-8 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Quote Value"}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:["£",j.avgQuoteValue.toLocaleString(void 0,{maximumFractionDigits:0})]})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:j.expiringSoon})]})]})})}),e.jsx(x,{className:"lg:col-span-2",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Draft Quotes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:j.draftCount})]})]})})})]}),e.jsx(x,{children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quote Conversion Performance"}),e.jsx("p",{className:"text-gray-600",children:"Current quote-to-win conversion rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[j.conversionRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j.acceptedCount," of ",N.filter(s=>s.status!=="draft").length," quotes won"]})]})]}),e.jsx(ve,{value:j.conversionRate,className:"h-3"})]})}),e.jsxs(Ne,{defaultValue:"quotes",className:"space-y-6",children:[e.jsxs(ye,{className:"grid w-full grid-cols-6",children:[e.jsx(S,{value:"quotes",children:"All Quotes"}),e.jsx(S,{value:"pending",children:"Pending"}),e.jsx(S,{value:"expiring",children:"Expiring"}),e.jsx(S,{value:"won",children:"Won"}),e.jsx(S,{value:"analytics",children:"Analytics"}),e.jsx(S,{value:"settings",children:"Settings"})]}),e.jsx(D,{value:"quotes",className:"space-y-4",children:e.jsxs(x,{children:[e.jsxs(Q,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Quotation Management"]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(d,{placeholder:"Search quotes, customers...",value:u,onChange:s=>w(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(V,{value:C,onValueChange:F,children:[e.jsx(L,{className:"w-40",children:e.jsx(P,{})}),e.jsxs(z,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"draft",children:"Draft"}),e.jsx(a,{value:"sent",children:"Sent"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"accepted",children:"Accepted"}),e.jsx(a,{value:"rejected",children:"Rejected"}),e.jsx(a,{value:"expired",children:"Expired"}),e.jsx(a,{value:"converted",children:"Converted"})]})]}),e.jsxs(V,{value:c,onValueChange:o,children:[e.jsx(L,{className:"w-40",children:e.jsx(P,{})}),e.jsxs(z,{children:[e.jsx(a,{value:"all",children:"All Priority"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"low",children:"Low"})]})]}),e.jsxs(V,{value:v,onValueChange:M,children:[e.jsx(L,{className:"w-40",children:e.jsx(P,{})}),e.jsxs(z,{children:[e.jsx(a,{value:"all",children:"All Time"}),e.jsx(a,{value:"today",children:"Today"}),e.jsx(a,{value:"week",children:"This Week"}),e.jsx(a,{value:"month",children:"This Month"}),e.jsx(a,{value:"quarter",children:"This Quarter"})]})]})]})]}),e.jsx(h,{children:e.jsxs(fe,{children:[e.jsx(be,{children:e.jsxs(q,{children:[e.jsx(g,{children:"Quote"}),e.jsx(g,{children:"Customer"}),e.jsx(g,{children:"Service"}),e.jsx(g,{children:"Value"}),e.jsx(g,{children:"Status"}),e.jsx(g,{children:"Priority"}),e.jsx(g,{children:"Win %"}),e.jsx(g,{children:"Valid Until"}),e.jsx(g,{children:"Actions"})]})}),e.jsx(we,{children:xe.map(s=>e.jsxs(q,{className:"hover:bg-gray-50",children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[de(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.quoteNumber}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(s.createdDate).toLocaleDateString()]})]})]})}),e.jsx(p,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contactPerson})]})}),e.jsx(p,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.serviceType}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.passengers," pax • ",s.frequency]})]})}),e.jsx(p,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:["£",s.totalAmount.toLocaleString()]}),s.discountAmount>0&&e.jsxs("p",{className:"text-sm text-green-600",children:["-£",s.discountAmount.toFixed(2)," discount"]})]})}),e.jsx(p,{children:t(s.status)}),e.jsx(p,{children:y(s.priority)}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-medium ${oe(s.estimatedProbability)}`,children:[s.estimatedProbability,"%"]}),s.competitorQuotes>0&&e.jsxs($,{variant:"outline",className:"text-xs",children:[s.competitorQuotes," comp"]})]})}),e.jsx(p,{children:e.jsxs("div",{className:`${W(s.validUntil)?"text-orange-600 font-medium":""}`,children:[new Date(s.validUntil).toLocaleDateString(),W(s.validUntil)&&e.jsx("p",{className:"text-xs text-orange-600",children:"Expiring soon!"})]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{variant:"outline",size:"sm",title:"View Quote",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Edit Quote",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Send Email",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Download PDF",children:e.jsx(Pe,{className:"w-4 h-4"})}),s.status==="accepted"&&e.jsx(r,{variant:"outline",size:"sm",title:"Convert to Invoice",className:"bg-green-50",children:e.jsx(ie,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})}),e.jsx(D,{value:"pending",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-600"}),"Pending Quotes"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>s.status==="pending"||s.status==="sent").map(s=>e.jsx("div",{className:"border border-yellow-200 rounded-lg p-4 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.customerName," • ",s.contactPerson]}),e.jsxs("p",{className:"text-sm text-yellow-600",children:["Win probability: ",s.estimatedProbability,"%",s.followUpDate&&` • Follow up: ${new Date(s.followUpDate).toLocaleDateString()}`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold",children:["£",s.totalAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expires: ",new Date(s.validUntil).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Follow Up"]}),e.jsxs(r,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Call"]})]})]})},s.id))})})]})}),e.jsx(D,{value:"expiring",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-orange-600"}),"Expiring Quotes"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>W(s.validUntil)).map(s=>e.jsx("div",{className:"border border-orange-200 rounded-lg p-4 bg-orange-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{className:"w-6 h-6 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),e.jsxs("p",{className:"text-sm text-orange-600",children:["Expires in ",Math.ceil((new Date(s.validUntil).getTime()-Date.now())/(1e3*60*60*24))," days"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold",children:["£",s.totalAmount.toLocaleString()]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Extend"]}),e.jsxs(r,{size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Urgent Follow Up"]})]})]})},s.id))})})]})}),e.jsx(D,{value:"won",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600"}),"Won Quotes"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>s.status==="accepted"||s.status==="converted").map(s=>e.jsx("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ne,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),e.jsxs("p",{className:"text-sm text-green-600",children:["Accepted: ",s.acceptedDate?new Date(s.acceptedDate).toLocaleDateString():"N/A",s.status==="converted"&&s.invoiceId&&e.jsxs("span",{children:[" • Invoice: ",s.invoiceId]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["£",s.totalAmount.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.serviceType})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="accepted"&&e.jsxs(r,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Create Invoice"]}),s.status==="converted"&&e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"View Invoice"]})]})]})},s.id))})})]})}),e.jsx(D,{value:"analytics",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Quotation Analytics"]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Advanced Quote Analytics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Detailed analytics on conversion rates, win/loss analysis, and revenue forecasting."}),e.jsx(r,{className:"bg-blue-600 hover:bg-blue-700",children:"View Analytics Dashboard"})]})})]})}),e.jsx(D,{value:"settings",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Quotation Settings"]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quote Configuration"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure quote templates, approval workflows, and automated follow-ups."}),e.jsx(r,{className:"bg-blue-600 hover:bg-blue-700",children:"Configure Settings"})]})})]})})]})]})};export{Ke as default};
