var h=(d,m,r)=>new Promise((u,t)=>{var c=e=>{try{o(r.next(e))}catch(a){t(a)}},x=e=>{try{o(r.throw(e))}catch(a){t(a)}},o=e=>e.done?u(e.value):Promise.resolve(e.value).then(c,x);o((r=r.apply(d,m)).next())});import{j as s}from"./ui-vendor-DMUr7mTx.js";import{r as l}from"./react-vendor-BvqlMsL5.js";import{b as y,a as v}from"./router-vendor-CEyBJ8vK.js";import{l as P,C,a as S,b as A,c as E,d as L,L as p,I as w,A as k,g as I,B as T,s as f}from"./index-ZwIgorfy.js";import{k as U,J as R,T as q}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const O=()=>{const[d,m]=l.useState(""),[r,u]=l.useState(""),[t,c]=l.useState(!1),[x,o]=l.useState(!1),[e,a]=l.useState("");y();const j=v(),{toast:g}=P();l.useEffect(()=>{h(void 0,null,function*(){const{data:n,error:N}=yield f.auth.getSession();N&&a("Invalid or expired reset link")})},[]);const b=i=>h(void 0,null,function*(){if(i.preventDefault(),a(""),d!==r){a("Passwords do not match");return}if(d.length<6){a("Password must be at least 6 characters long");return}c(!0);try{const{error:n}=yield f.auth.updateUser({password:d});if(n)throw n;o(!0),g({title:"Password Updated",description:"Your password has been successfully updated."}),setTimeout(()=>{j("/auth")},3e3)}catch(n){a(n.message||"Failed to update password")}finally{c(!1)}});return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(C,{className:"shadow-xl",children:[s.jsxs(S,{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[s.jsx(U,{className:"w-6 h-6 text-blue-600"}),s.jsx(A,{className:"text-2xl font-bold",children:"Set New Password"})]}),s.jsx(E,{children:"Enter your new password below"})]}),s.jsx(L,{className:"px-8 pb-8",children:x?s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(R,{className:"w-16 h-16 text-green-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Password Updated!"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Your password has been successfully updated."}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to login page..."})]})]}):s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(p,{htmlFor:"password",children:"New Password"}),s.jsx(w,{id:"password",type:"password",value:d,onChange:i=>m(i.target.value),disabled:t,required:!0,minLength:6,className:"mt-1",placeholder:"Enter new password"})]}),s.jsxs("div",{children:[s.jsx(p,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(w,{id:"confirmPassword",type:"password",value:r,onChange:i=>u(i.target.value),disabled:t,required:!0,minLength:6,className:"mt-1",placeholder:"Confirm new password"})]}),e&&s.jsxs(k,{variant:"destructive",children:[s.jsx(q,{className:"h-4 w-4"}),s.jsx(I,{children:e})]}),s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[s.jsx("p",{className:"font-medium mb-1",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsx("li",{children:"• At least 6 characters long"}),s.jsx("li",{children:"• Mix of letters and numbers recommended"}),s.jsx("li",{children:"• Avoid common passwords"})]})]}),s.jsx(T,{type:"submit",className:"w-full",disabled:t,children:t?"Updating Password...":"Update Password"})]})})]})})})};export{O as default};
