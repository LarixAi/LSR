var Ae=Object.defineProperty,De=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var Q=(a,t,n)=>t in a?Ae(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,d=(a,t)=>{for(var n in t||(t={}))W.call(t,n)&&Q(a,n,t[n]);if(R)for(var n of R(t))K.call(t,n)&&Q(a,n,t[n]);return a},z=(a,t)=>De(a,Te(t));var v=(a,t)=>{var n={};for(var r in a)W.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&R)for(var r of R(a))t.indexOf(r)<0&&K.call(a,r)&&(n[r]=a[r]);return n};var L=(a,t,n)=>new Promise((r,i)=>{var b=m=>{try{_(n.next(m))}catch(x){i(x)}},g=m=>{try{_(n.throw(m))}catch(x){i(x)}},_=m=>m.done?r(m.value):Promise.resolve(m.value).then(b,g);_((n=n.apply(a,t)).next())});import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as o}from"./react-vendor-BvqlMsL5.js";import{H as y,$ as re,l as ke,u as ce,D as $e,m as Pe,n as Fe,o as Re,p as ze,C as h,d as u,X as oe,Y as de,Z as me,e as I,h as Le,i as Ee,j as X,k as Z,a as B,b as Y,c as G,E,L as M,B as A,x as Me,s as H,I as Ie,S as ee,q as se,r as ae,t as te,v as T}from"./index-ZwIgorfy.js";import{u as Ue}from"./query-vendor-B2F_wWlc.js";import{O as xe,h as he,i as ue,D as ge,A as pe,j as fe,P as Oe,k as Ve}from"./ui-components-7w1-MJre.js";import{k as qe,aI as He,R as Be,T as Ye,b9 as Je,a as Qe,J as We,t as Ke,S as je,f as J,F as Xe,W as Ze,aH as Ge,a2 as ne,h as es,$ as ss,M as as,aE as ts}from"./icons-vendor-b0I7fGSL.js";import{a as ns}from"./router-vendor-CEyBJ8vK.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";const ls=Ve,is=Oe,ve=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsx(xe,z(d({className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},t),{ref:n}))});ve.displayName=xe.displayName;const be=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsxs(is,{children:[e.jsx(ve,{}),e.jsx(he,d({ref:n,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},t))]})});be.displayName=he.displayName;const _e=n=>{var r=n,{className:a}=r,t=v(r,["className"]);return e.jsx("div",d({className:y("flex flex-col space-y-2 text-center sm:text-left",a)},t))};_e.displayName="AlertDialogHeader";const Ne=n=>{var r=n,{className:a}=r,t=v(r,["className"]);return e.jsx("div",d({className:y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},t))};Ne.displayName="AlertDialogFooter";const ye=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsx(ue,d({ref:n,className:y("text-lg font-semibold",a)},t))});ye.displayName=ue.displayName;const we=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsx(ge,d({ref:n,className:y("text-sm text-muted-foreground",a)},t))});we.displayName=ge.displayName;const Ce=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsx(pe,d({ref:n,className:y(re(),a)},t))});Ce.displayName=pe.displayName;const Se=o.forwardRef((r,n)=>{var i=r,{className:a}=i,t=v(i,["className"]);return e.jsx(fe,d({ref:n,className:y(re({variant:"outline"}),"mt-2 sm:mt-0",a)},t))});Se.displayName=fe.displayName;const le=[{key:"jobs",label:"Job Management",icon:Je,description:"Access to create, view, and manage jobs and assignments"},{key:"vehicles",label:"Vehicle Logs",icon:Qe,description:"Vehicle inspections, maintenance logs, and fleet management"},{key:"inspections",label:"Inspection Tools",icon:We,description:"Vehicle inspection forms and safety checklists"},{key:"reports",label:"Report Access",icon:Ke,description:"Analytics, compliance reports, and business intelligence"},{key:"settings",label:"Settings Panel",icon:je,description:"System configuration and administrative settings"},{key:"communications",label:"Parent Communications",icon:J,description:"Parent portal, messaging, and notification management"},{key:"documents",label:"Document Management",icon:Xe,description:"Upload, review, and approve driver documents"},{key:"maintenance",label:"Maintenance System",icon:Ze,description:"Maintenance requests, scheduling, and inventory"}],ie={driver:{label:"Driver Template",permissions:{jobs:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},reports:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},settings:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},communications:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},documents:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1},maintenance:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1}}},mechanic:{label:"Mechanic Template",permissions:{jobs:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},reports:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},settings:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},communications:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},documents:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1},maintenance:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1}}},admin:{label:"Admin Template",permissions:{jobs:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},reports:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},settings:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},communications:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},documents:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},maintenance:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0}}}},rs=({user:a,open:t,onOpenChange:n})=>{const{toast:r}=ke(),{profile:i}=ce(),[b,g]=o.useState({}),[_,m]=o.useState(!1),[x,k]=o.useState(!1),[$,N]=o.useState(!1),[p,w]=o.useState(!1),P=(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="council";o.useEffect(()=>{a&&t&&D()},[a,t]);const D=()=>L(void 0,null,function*(){if(a){m(!0);try{const l={};le.forEach(({key:s})=>{l[s]={permission_type:s,can_view:!1,can_create:!1,can_edit:!1,can_delete:!1,is_active:!0}}),g(l),w(!1)}catch(l){console.error("Error fetching permissions:",l),r({title:"Error",description:"Failed to load user permissions.",variant:"destructive"})}finally{m(!1)}}}),C=(l,s,c)=>{g(f=>z(d({},f),{[l]:z(d({},f[l]),{[s]:c})})),w(!0)},U=l=>{const s=ie[l],c=d({},b);Object.entries(s.permissions).forEach(([f,j])=>{c[f]=d(d({},c[f]),j)}),g(c),w(!0),r({title:"Template Applied",description:`${s.label} permissions have been applied.`})},O=()=>L(void 0,null,function*(){if(a){k(!0);try{console.log("Permissions would be saved:",b),r({title:"Permissions Updated",description:`${a.first_name} ${a.last_name}'s permissions have been saved successfully.`}),w(!1),N(!1)}catch(l){console.error("Error saving permissions:",l),r({title:"Save Failed",description:l.message||"Failed to save permissions. Please try again.",variant:"destructive"})}finally{k(!1)}}}),V=()=>{D(),w(!1)},F=(l,s)=>`${(l==null?void 0:l.charAt(0))||""}${(s==null?void 0:s.charAt(0))||""}`.toUpperCase(),q=l=>({admin:"bg-red-100 text-red-800",council:"bg-purple-100 text-purple-800",driver:"bg-blue-100 text-blue-800",mechanic:"bg-green-100 text-green-800",parent:"bg-gray-100 text-gray-800",support:"bg-orange-100 text-orange-800"})[l]||"bg-gray-100 text-gray-800";return P?e.jsxs(e.Fragment,{children:[e.jsx($e,{open:t,onOpenChange:n,children:e.jsxs(Pe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsxs(Re,{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"User Authorization Settings"})]}),e.jsxs(ze,{children:["Manage ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name,"'s access permissions and role-based controls."]})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(oe,{className:"w-16 h-16",children:[e.jsx(de,{src:a.avatar_url,alt:`${a.first_name} ${a.last_name}`}),e.jsx(me,{className:"bg-blue-100 text-blue-800 text-lg font-semibold",children:F(a.first_name,a.last_name)})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[a.first_name," ",a.last_name]}),e.jsx("p",{className:"text-gray-600",children:a.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(I,{className:q(a.role),variant:"secondary",children:a.role.charAt(0).toUpperCase()+a.role.slice(1)}),e.jsx(I,{variant:a.employment_status==="active"?"default":"secondary",children:a.employment_status})]})]})]})})}),e.jsxs(Le,{defaultValue:"permissions",className:"w-full",children:[e.jsxs(Ee,{className:"grid w-full grid-cols-2",children:[e.jsx(X,{value:"permissions",children:"Permissions"}),e.jsx(X,{value:"templates",children:"Quick Templates"})]}),e.jsx(Z,{value:"permissions",className:"space-y-4",children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading permissions..."})]}):e.jsx("div",{className:"grid gap-4",children:le.map(({key:l,label:s,icon:c,description:f})=>{const j=b[l];return j?e.jsxs(h,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(c,{className:"w-5 h-5 text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Y,{className:"text-base",children:s}),e.jsx(G,{className:"text-sm",children:f})]})]})}),e.jsx(u,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:`${l}-view`,checked:j.can_view,onCheckedChange:S=>C(l,"can_view",S)}),e.jsx(M,{htmlFor:`${l}-view`,className:"text-sm",children:"View"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:`${l}-create`,checked:j.can_create,onCheckedChange:S=>C(l,"can_create",S)}),e.jsx(M,{htmlFor:`${l}-create`,className:"text-sm",children:"Create"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:`${l}-edit`,checked:j.can_edit,onCheckedChange:S=>C(l,"can_edit",S)}),e.jsx(M,{htmlFor:`${l}-edit`,className:"text-sm",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:`${l}-delete`,checked:j.can_delete,onCheckedChange:S=>C(l,"can_delete",S)}),e.jsx(M,{htmlFor:`${l}-delete`,className:"text-sm",children:"Delete"})]})]})})]},l):null})})}),e.jsx(Z,{value:"templates",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(B,{children:[e.jsx(Y,{children:"Permission Templates"}),e.jsx(G,{children:"Apply predefined permission sets based on common roles. This will override current settings."})]}),e.jsx(u,{className:"space-y-4",children:Object.entries(ie).map(([l,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Standard permissions for ",l," role users"]})]}),e.jsx(A,{variant:"outline",size:"sm",onClick:()=>U(l),children:"Apply Template"})]},l))})]})})]}),e.jsx(Me,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx(A,{onClick:()=>N(!0),disabled:!p||x,className:"flex-1",children:x?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]})}),e.jsxs(A,{variant:"outline",onClick:V,disabled:!p||x,className:"flex-1",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(A,{variant:"outline",onClick:()=>n(!1),className:"flex-1",children:"Cancel"})]}),p&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Ye,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-800",children:"You have unsaved changes. Don't forget to save your updates."})]})]})]})}),e.jsx(ls,{open:$,onOpenChange:N,children:e.jsxs(be,{children:[e.jsxs(_e,{children:[e.jsx(ye,{children:"Confirm Permission Changes"}),e.jsxs(we,{children:["Are you sure you want to save these permission changes for ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name,"? This will update their access rights immediately and the changes will be logged for security purposes."]})]}),e.jsxs(Ne,{children:[e.jsx(Se,{children:"Cancel"}),e.jsx(Ce,{onClick:O,disabled:x,children:x?"Saving...":"Save Changes"})]})]})})]}):null},js=()=>{const a=ns(),{profile:t}=ce(),[n,r]=o.useState(""),[i,b]=o.useState("all"),[g,_]=o.useState("active"),[m,x]=o.useState(null),[k,$]=o.useState(!1),N=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="council",{data:p=[],isLoading:w,refetch:P}=Ue({queryKey:["staff-directory",t==null?void 0:t.organization_id],queryFn:()=>L(void 0,null,function*(){if(!(t!=null&&t.organization_id))return[];const{data:s,error:c}=yield H.from("profiles").select("id, first_name, last_name, email, phone, role, employment_status, avatar_url, city, state").eq("organization_id",t.organization_id).eq("is_active",!0).order("first_name");if(c)throw c;return s}),enabled:!!(t!=null&&t.organization_id)});o.useEffect(()=>{if(!(t!=null&&t.organization_id))return;const s=H.channel("staff-directory-changes").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`organization_id=eq.${t.organization_id}`},()=>{P()}).subscribe();return()=>{H.removeChannel(s)}},[t==null?void 0:t.organization_id,P]);const D=o.useMemo(()=>p.filter(s=>{const c=n===""||`${s.first_name} ${s.last_name}`.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase())||s.role.toLowerCase().includes(n.toLowerCase()),f=i==="all"||s.role===i,j=g==="all"||s.employment_status===g;return c&&f&&j}),[p,n,i,g]),C=o.useMemo(()=>[...new Set(p.map(c=>c.role))].sort(),[p]),U=s=>({admin:"bg-red-500/10 text-red-700 border border-red-200",council:"bg-purple-500/10 text-purple-700 border border-purple-200",driver:"bg-blue-500/10 text-blue-700 border border-blue-200",mechanic:"bg-green-500/10 text-green-700 border border-green-200",parent:"bg-gray-500/10 text-gray-700 border border-gray-200",support:"bg-orange-500/10 text-orange-700 border border-orange-200"})[s]||"bg-gray-500/10 text-gray-700 border border-gray-200",O=s=>({active:"bg-green-500/10 text-green-700 border border-green-200",pending:"bg-yellow-500/10 text-yellow-700 border border-yellow-200",inactive:"bg-gray-500/10 text-gray-700 border border-gray-200",terminated:"bg-red-500/10 text-red-700 border border-red-200"})[s]||"bg-gray-500/10 text-gray-700 border border-gray-200",V=(s,c)=>`${(s==null?void 0:s.charAt(0))||""}${(c==null?void 0:c.charAt(0))||""}`.toUpperCase(),F=s=>s.charAt(0).toUpperCase()+s.slice(1),q=s=>(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="council"||s==="admin"||s==="council",l=s=>{N&&(x(s),$(!0))};return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading staff directory..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6",children:e.jsxs(A,{variant:"outline",size:"sm",onClick:()=>a("/settings"),className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Settings"})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(J,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Staff Directory"})]}),e.jsx("p",{className:"text-gray-600",children:"Connect with your team members and colleagues"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Staff"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.filter(s=>s.employment_status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:C.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Roles"})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Showing"})]})})})]}),e.jsxs(h,{className:"bg-white shadow-lg",children:[e.jsx(B,{children:e.jsxs(Y,{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Search & Filter"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search Staff"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ie,{placeholder:"Search by name, email, or role...",value:n,onChange:s=>r(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Role"}),e.jsxs(ee,{value:i,onValueChange:b,children:[e.jsx(se,{children:e.jsx(ae,{})}),e.jsxs(te,{children:[e.jsx(T,{value:"all",children:"All Roles"}),C.map(s=>e.jsx(T,{value:s,children:F(s)},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Status"}),e.jsxs(ee,{value:g,onValueChange:_,children:[e.jsx(se,{children:e.jsx(ae,{})}),e.jsxs(te,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:D.map(s=>e.jsx(h,{className:"bg-white shadow-sm hover:shadow-lg transition-all duration-200 border border-gray-200 hover:border-gray-300",children:e.jsx(u,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(oe,{className:"w-12 h-12 md:w-16 md:h-16",children:[e.jsx(de,{src:s.avatar_url,alt:`${s.first_name} ${s.last_name}`}),e.jsx(me,{className:"bg-blue-100 text-blue-800 text-sm md:text-lg font-semibold",children:V(s.first_name,s.last_name)})]}),N&&e.jsx(A,{variant:"ghost",size:"sm",onClick:()=>l(s),className:"p-1 h-8 w-8 hover:bg-gray-100",children:e.jsx(je,{className:"w-4 h-4 text-gray-400 hover:text-blue-600"})})]}),e.jsx("div",{children:e.jsxs("h3",{className:`font-semibold text-base md:text-lg text-gray-900 leading-tight ${N?"cursor-pointer hover:text-blue-600 transition-colors":""}`,onClick:()=>N&&l(s),children:[s.first_name," ",s.last_name]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(I,{className:`${U(s.role)} text-xs font-medium px-2 py-1`,children:F(s.role)}),e.jsx(I,{className:`${O(s.employment_status)} text-xs font-medium px-2 py-1`,children:s.employment_status})]}),q(s.role)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(es,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate text-xs md:text-sm",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ss,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs md:text-sm",children:s.phone})]})]}),(s.city||s.state)&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(as,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{className:"truncate text-xs md:text-sm",children:[s.city,s.city&&s.state&&", ",s.state]})]})]})})},s.id))}),D.length===0&&e.jsx(h,{className:"bg-white shadow-lg",children:e.jsx(u,{className:"pt-12 pb-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Staff Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members match your current search and filter criteria."}),e.jsx(A,{variant:"outline",onClick:()=>{r(""),b("all"),_("active")},children:"Clear Filters"})]})})}),e.jsx(h,{className:"bg-blue-50 border-blue-200",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ts,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Privacy Notice:"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Contact information is only displayed based on your role and organization permissions. This directory is for internal use only and should not be shared outside the organization."})]})]})})}),e.jsx(rs,{user:m,open:k,onOpenChange:$})]})})};export{js as default};
