import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as v}from"./react-vendor-BvqlMsL5.js";import{u as g,at as u,C as N,a as y,b as _,d as A,e as t,B as n,au as f}from"./index-ZwIgorfy.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./icons-vendor-b0I7fGSL.js";import"./query-vendor-B2F_wWlc.js";import"./router-vendor-CEyBJ8vK.js";import"./ui-components-7w1-MJre.js";const k=()=>{const{user:c,profile:s}=g(),{agreementStatus:a,needsAgreementAcceptance:d,isLoadingStatus:l,isLoadingAgreements:b,acceptTermsOfService:o,acceptPrivacyPolicy:m,refetchStatus:i}=u(),[h,r]=v.useState(!1),x=()=>{r(!0)},j=()=>{r(!1)},p=()=>{r(!1),i()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(N,{children:[e.jsx(y,{children:e.jsx(_,{children:"User Agreement Test Panel"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",c==null?void 0:c.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",c==null?void 0:c.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",s==null?void 0:s.role]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Profile Agreement Status"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Terms Accepted:"}),e.jsx(t,{variant:s!=null&&s.terms_accepted?"default":"destructive",className:"ml-2",children:s!=null&&s.terms_accepted?"Yes":"No"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Privacy Accepted:"}),e.jsx(t,{variant:s!=null&&s.privacy_policy_accepted?"default":"destructive",className:"ml-2",children:s!=null&&s.privacy_policy_accepted?"Yes":"No"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Terms Version:"})," ",(s==null?void 0:s.terms_version)||"None"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Privacy Version:"})," ",(s==null?void 0:s.privacy_policy_version)||"None"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Current Agreement Status"}),e.jsx("div",{className:"space-y-2",children:l?e.jsx("p",{className:"text-muted-foreground",children:"Loading agreement status..."}):a?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Needs Terms:"}),e.jsx(t,{variant:a.needs_terms_acceptance?"destructive":"default",className:"ml-2",children:a.needs_terms_acceptance?"Yes":"No"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Latest Terms Version:"})," ",a.latest_terms_version||"None"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Needs Privacy:"}),e.jsx(t,{variant:a.needs_privacy_acceptance?"destructive":"default",className:"ml-2",children:a.needs_privacy_acceptance?"Yes":"No"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Latest Privacy Version:"})," ",a.latest_privacy_version||"None"]})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No agreement status available"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{onClick:x,variant:"default",children:"Show Agreement Modal"}),e.jsx(n,{onClick:i,variant:"outline",children:"Refresh Status"}),e.jsx(n,{onClick:o,variant:"outline",disabled:!(a!=null&&a.needs_terms_acceptance),children:"Accept Terms Only"}),e.jsx(n,{onClick:m,variant:"outline",disabled:!(a!=null&&a.needs_privacy_acceptance),children:"Accept Privacy Only"})]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Needs Agreement Acceptance:"}),e.jsx(t,{variant:d?"destructive":"default",className:"ml-2",children:d?"Yes":"No"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'This test panel allows you to manually trigger and test the user agreement functionality. Use the "Show Agreement Modal" button to test the full agreement flow.'})]})]})]}),e.jsx(f,{isOpen:h,onClose:j,onAgreementsAccepted:p})]})};export{k as default};
