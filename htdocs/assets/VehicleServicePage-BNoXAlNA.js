import{j as e}from"./ui-vendor-DMUr7mTx.js";import{r as E}from"./react-vendor-BvqlMsL5.js";import{l as A,a1 as B,B as t,e as P,h as H,i as O,j as h,k as o,C as a,d as i,a as d,b as x,L as l,S as w,q as f,r as S,t as b,v as c,I as _,T as R}from"./index-ZwIgorfy.js";import{u as U}from"./useVehicles-uD3YILF5.js";import{d as q,a as W}from"./router-vendor-CEyBJ8vK.js";import{aH as z,F as v,g as D,W as G,j as J,J as C,T as p,E as Q}from"./icons-vendor-b0I7fGSL.js";import"./supabase-vendor-B984m0TI.js";import"./utils-vendor-B2FlkASS.js";import"./query-vendor-B2F_wWlc.js";import"./ui-components-7w1-MJre.js";const ce=()=>{var u,N;const{vehicleId:m}=q(),j=W(),{data:T=[],isLoading:M}=U(),{toast:g}=A(),[k,L]=E.useState("overview");if(console.log("VehicleServicePage component loaded with vehicleId:",m),M)return e.jsx(B,{});const s=T.find(r=>r.id===m);if(!s)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Vehicle Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The vehicle you're looking for doesn't exist."}),e.jsx(t,{onClick:()=>j("/vehicles"),children:"Back to Vehicles"})]})});const V=r=>{const y={active:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",out_of_service:"bg-red-100 text-red-800",inactive:"bg-gray-100 text-gray-800"};return y[r]||y.inactive},n=r=>r?new Date(r).toLocaleDateString():"Not set",F=()=>{g({title:"Maintenance Scheduled",description:"Maintenance has been scheduled for this vehicle."})},I=()=>{g({title:"Service Updated",description:"Vehicle service information has been updated."})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{variant:"outline",size:"icon",onClick:()=>j("/vehicles"),children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Service: ",s.license_plate]}),e.jsxs("p",{className:"text-gray-600",children:[s.make," ",s.model," (",s.year,")"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{className:V(s.status),children:s.status.replace("_"," ").toUpperCase()}),e.jsxs(t,{variant:"outline",onClick:()=>j(`/vehicle-details/${m}`),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Details"]})]})]}),e.jsxs(H,{value:k,onValueChange:L,className:"space-y-6",children:[e.jsxs(O,{className:"grid w-full grid-cols-4",children:[e.jsx(h,{value:"overview",children:"Overview"}),e.jsx(h,{value:"maintenance",children:"Maintenance"}),e.jsx(h,{value:"schedule",children:"Schedule Service"}),e.jsx(h,{value:"history",children:"History"})]}),e.jsxs(o,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Next Service"}),e.jsx("p",{className:"font-semibold",children:n(s.next_service_date)})]})]})})}),e.jsx(a,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Service Interval"}),e.jsxs("p",{className:"font-semibold",children:[s.service_interval_months||6," months"]})]})]})})}),e.jsx(a,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Mileage"}),e.jsxs("p",{className:"font-semibold",children:[((u=s.mileage)==null?void 0:u.toLocaleString())||0," miles"]})]})]})})}),e.jsx(a,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"MOT Status"}),e.jsx("p",{className:"font-semibold",children:s.mot_expiry?new Date(s.mot_expiry)>new Date?"Valid":"Expired":"Not Set"})]})]})})})]}),e.jsxs(a,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-yellow-600"}),"Service Alerts"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-3",children:[s.next_service_date&&new Date(s.next_service_date)<new Date(Date.now()+30*24*60*60*1e3)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(p,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Service Due Soon"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Next service is due on ",n(s.next_service_date)]})]})]}),s.mot_expiry&&new Date(s.mot_expiry)<new Date(Date.now()+60*24*60*60*1e3)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(p,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"MOT Expiring Soon"}),e.jsxs("p",{className:"text-sm text-red-700",children:["MOT expires on ",n(s.mot_expiry)]})]})]}),(!s.next_service_date||new Date(s.next_service_date)>new Date(Date.now()+30*24*60*60*1e3))&&(!s.mot_expiry||new Date(s.mot_expiry)>new Date(Date.now()+60*24*60*60*1e3))&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"All Good"}),e.jsx("p",{className:"text-sm text-green-700",children:"No immediate service requirements"})]})]})]})})]})]}),e.jsxs(o,{value:"maintenance",className:"space-y-6",children:[e.jsxs(a,{children:[e.jsx(d,{children:e.jsx(x,{children:"Current Maintenance Status"})}),e.jsx(i,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Last Maintenance Date"}),e.jsx("p",{className:"text-lg mt-1",children:n(s.last_maintenance)})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Next Maintenance Date"}),e.jsx("p",{className:"text-lg mt-1",children:n(s.next_maintenance)})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Current Mileage"}),e.jsxs("p",{className:"text-lg mt-1",children:[((N=s.mileage)==null?void 0:N.toLocaleString())||0," miles"]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Service Interval"}),e.jsxs("p",{className:"text-lg mt-1",children:[s.service_interval_months||6," months"]})]})]})})]}),e.jsxs(a,{children:[e.jsx(d,{children:e.jsx(x,{children:"Quick Actions"})}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{onClick:F,className:"h-20 flex-col",children:[e.jsx(D,{className:"h-6 w-6 mb-2"}),"Schedule Maintenance"]}),e.jsxs(t,{variant:"outline",className:"h-20 flex-col",children:[e.jsx(v,{className:"h-6 w-6 mb-2"}),"View Service Records"]})]})})]})]}),e.jsx(o,{value:"schedule",className:"space-y-6",children:e.jsxs(a,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Schedule New Service"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"serviceType",children:"Service Type"}),e.jsxs(w,{children:[e.jsx(f,{children:e.jsx(S,{placeholder:"Select service type"})}),e.jsxs(b,{children:[e.jsx(c,{value:"routine",children:"Routine Maintenance"}),e.jsx(c,{value:"repair",children:"Repair"}),e.jsx(c,{value:"inspection",children:"Inspection"}),e.jsx(c,{value:"mot",children:"MOT Test"}),e.jsx(c,{value:"emergency",children:"Emergency Service"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"scheduleDate",children:"Scheduled Date"}),e.jsx(_,{type:"date",id:"scheduleDate"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentMileage",children:"Current Mileage"}),e.jsx(_,{type:"number",id:"currentMileage",placeholder:"Enter current mileage",defaultValue:s.mileage||0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"priority",children:"Priority"}),e.jsxs(w,{children:[e.jsx(f,{children:e.jsx(S,{placeholder:"Select priority"})}),e.jsxs(b,{children:[e.jsx(c,{value:"low",children:"Low"}),e.jsx(c,{value:"medium",children:"Medium"}),e.jsx(c,{value:"high",children:"High"}),e.jsx(c,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Service Description"}),e.jsx(R,{id:"description",placeholder:"Describe the service requirements...",rows:4})]}),e.jsx(t,{onClick:I,className:"w-full md:w-auto",children:"Schedule Service"})]})]})}),e.jsx(o,{value:"history",className:"space-y-6",children:e.jsxs(a,{children:[e.jsx(d,{children:e.jsx(x,{children:"Service History"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service history available"}),e.jsx("p",{className:"text-sm",children:"Service records will appear here once maintenance is performed."})]})})})]})})]})]})};export{ce as default};
