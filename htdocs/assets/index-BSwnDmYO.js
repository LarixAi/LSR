import{_ as f}from"./supabase-vendor-B984m0TI.js";import"./react-vendor-BvqlMsL5.js";var d={},p=Object.defineProperty,b=Object.defineProperties,w=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&_(e,r,t[r]);if(m)for(var r of m(t))E.call(t,r)&&_(e,r,t[r]);return e},O=(e,t)=>b(e,w(t)),n=(e,t,r)=>new Promise((s,a)=>{var i=u=>{try{l(r.next(u))}catch(h){a(h)}},c=u=>{try{l(r.throw(u))}catch(h){a(h)}},l=u=>u.done?s(u.value):Promise.resolve(u.value).then(i,c);l((r=r.apply(e,t)).next())}),$="6.0.1",P=class{constructor(e){this.resend=e}create(e){return n(this,arguments,function*(t,r={}){return yield this.resend.post("/api-keys",t,r)})}list(){return n(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(e){return n(this,null,function*(){return yield this.resend.delete(`/api-keys/${e}`)})}},T=class{constructor(e){this.resend=e}create(e){return n(this,arguments,function*(t,r={}){return yield this.resend.post("/audiences",t,r)})}list(){return n(this,null,function*(){return yield this.resend.get("/audiences")})}get(e){return n(this,null,function*(){return yield this.resend.get(`/audiences/${e}`)})}remove(e){return n(this,null,function*(){return yield this.resend.delete(`/audiences/${e}`)})}};function R(e){return e==null?void 0:e.map(t=>({content:t.content,filename:t.filename,path:t.path,content_type:t.contentType,content_id:t.contentId}))}function y(e){return{attachments:R(e.attachments),bcc:e.bcc,cc:e.cc,from:e.from,headers:e.headers,html:e.html,reply_to:e.replyTo,scheduled_at:e.scheduledAt,subject:e.subject,tags:e.tags,text:e.text,to:e.to}}var I=class{constructor(e){this.resend=e}send(e){return n(this,arguments,function*(t,r={}){return this.create(t,r)})}create(e){return n(this,arguments,function*(t,r={}){const s=[];for(const i of t){if(i.react){if(!this.renderAsync)try{const{renderAsync:c}=yield f(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=c}catch(c){throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}i.html=yield this.renderAsync(i.react),i.react=void 0}s.push(y(i))}return yield this.resend.post("/emails/batch",s,r)})}},q=class{constructor(e){this.resend=e}create(e){return n(this,arguments,function*(t,r={}){if(t.react){if(!this.renderAsync)try{const{renderAsync:a}=yield f(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=a}catch(a){throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}t.html=yield this.renderAsync(t.react)}return yield this.resend.post("/broadcasts",{name:t.name,audience_id:t.audienceId,preview_text:t.previewText,from:t.from,html:t.html,reply_to:t.replyTo,subject:t.subject,text:t.text},r)})}send(e,t){return n(this,null,function*(){return yield this.resend.post(`/broadcasts/${e}/send`,{scheduled_at:t==null?void 0:t.scheduledAt})})}list(){return n(this,null,function*(){return yield this.resend.get("/broadcasts")})}get(e){return n(this,null,function*(){return yield this.resend.get(`/broadcasts/${e}`)})}remove(e){return n(this,null,function*(){return yield this.resend.delete(`/broadcasts/${e}`)})}update(e,t){return n(this,null,function*(){return yield this.resend.patch(`/broadcasts/${e}`,{name:t.name,audience_id:t.audienceId,from:t.from,html:t.html,text:t.text,subject:t.subject,reply_to:t.replyTo,preview_text:t.previewText})})}},k=class{constructor(e){this.resend=e}create(e){return n(this,arguments,function*(t,r={}){return yield this.resend.post(`/audiences/${t.audienceId}/contacts`,{unsubscribed:t.unsubscribed,email:t.email,first_name:t.firstName,last_name:t.lastName},r)})}list(e){return n(this,null,function*(){return yield this.resend.get(`/audiences/${e.audienceId}/contacts`)})}get(e){return n(this,null,function*(){return!e.id&&!e.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.get(`/audiences/${e.audienceId}/contacts/${e!=null&&e.email?e==null?void 0:e.email:e==null?void 0:e.id}`)})}update(e){return n(this,null,function*(){return!e.id&&!e.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.patch(`/audiences/${e.audienceId}/contacts/${e!=null&&e.email?e==null?void 0:e.email:e==null?void 0:e.id}`,{unsubscribed:e.unsubscribed,first_name:e.firstName,last_name:e.lastName})})}remove(e){return n(this,null,function*(){return!e.id&&!e.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.delete(`/audiences/${e.audienceId}/contacts/${e!=null&&e.email?e==null?void 0:e.email:e==null?void 0:e.id}`)})}};function x(e){return{name:e.name,region:e.region,custom_return_path:e.customReturnPath}}var N=class{constructor(e){this.resend=e}create(e){return n(this,arguments,function*(t,r={}){return yield this.resend.post("/domains",x(t),r)})}list(){return n(this,null,function*(){return yield this.resend.get("/domains")})}get(e){return n(this,null,function*(){return yield this.resend.get(`/domains/${e}`)})}update(e){return n(this,null,function*(){return yield this.resend.patch(`/domains/${e.id}`,{click_tracking:e.clickTracking,open_tracking:e.openTracking,tls:e.tls})})}remove(e){return n(this,null,function*(){return yield this.resend.delete(`/domains/${e}`)})}verify(e){return n(this,null,function*(){return yield this.resend.post(`/domains/${e}/verify`)})}},S=class{constructor(e){this.resend=e}send(e){return n(this,arguments,function*(t,r={}){return this.create(t,r)})}create(e){return n(this,arguments,function*(t,r={}){if(t.react){if(!this.renderAsync)try{const{renderAsync:a}=yield f(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=a}catch(a){throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}t.html=yield this.renderAsync(t.react)}return yield this.resend.post("/emails",y(t),r)})}get(e){return n(this,null,function*(){return yield this.resend.get(`/emails/${e}`)})}update(e){return n(this,null,function*(){return yield this.resend.patch(`/emails/${e.id}`,{scheduled_at:e.scheduledAt})})}cancel(e){return n(this,null,function*(){return yield this.resend.post(`/emails/${e}/cancel`)})}},g="https://api.resend.com",v=`resend-node:${$}`,j=typeof process!="undefined"&&d&&d.RESEND_BASE_URL||g,D=typeof process!="undefined"&&d&&d.RESEND_USER_AGENT||v,K=class{constructor(e){if(this.key=e,this.apiKeys=new P(this),this.audiences=new T(this),this.batch=new I(this),this.broadcasts=new q(this),this.contacts=new k(this),this.domains=new N(this),this.emails=new S(this),!e&&(typeof process!="undefined"&&d&&(this.key=d.RESEND_API_KEY),!this.key))throw new Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":D,"Content-Type":"application/json"})}fetchRequest(e){return n(this,arguments,function*(t,r={}){try{const s=yield fetch(`${j}${t}`,r);if(!s.ok)try{const i=yield s.text();return{data:null,error:JSON.parse(i)}}catch(i){if(i instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};const c={message:s.statusText,name:"application_error"};return i instanceof Error?{data:null,error:O(o({},c),{message:i.message})}:{data:null,error:c}}return{data:yield s.json(),error:null}}catch(s){return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(e,t){return n(this,arguments,function*(r,s,a={}){const i=new Headers(this.headers);a.idempotencyKey&&i.set("Idempotency-Key",a.idempotencyKey);const c=o({method:"POST",headers:i,body:JSON.stringify(s)},a);return this.fetchRequest(r,c)})}get(e){return n(this,arguments,function*(t,r={}){const s=o({method:"GET",headers:this.headers},r);return this.fetchRequest(t,s)})}put(e,t){return n(this,arguments,function*(r,s,a={}){const i=o({method:"PUT",headers:this.headers,body:JSON.stringify(s)},a);return this.fetchRequest(r,i)})}patch(e,t){return n(this,arguments,function*(r,s,a={}){const i=o({method:"PATCH",headers:this.headers,body:JSON.stringify(s)},a);return this.fetchRequest(r,i)})}delete(e,t){return n(this,null,function*(){const r={method:"DELETE",headers:this.headers,body:JSON.stringify(t)};return this.fetchRequest(e,r)})}};export{K as Resend};
