const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-CyTxCnof.js","assets/ui-vendor-DMUr7mTx.js","assets/react-vendor-BvqlMsL5.js","assets/router-vendor-CEyBJ8vK.js","assets/icons-vendor-b0I7fGSL.js","assets/useStripeCheckout-DaF33trx.js","assets/query-vendor-B2F_wWlc.js","assets/supabase-vendor-B984m0TI.js","assets/utils-vendor-B2FlkASS.js","assets/ui-components-7w1-MJre.js","assets/Dashboard-7LXoJmHK.js","assets/useTrialManagement-Diw1iLp0.js","assets/AuthCallback-CxJB__ie.js","assets/ResetPassword-Cc7xY40W.js","assets/VehicleManagement-DA-T5p96.js","assets/useVehicles-uD3YILF5.js","assets/table-6WL4qh3Z.js","assets/form-vendor-C09QGZOn.js","assets/fileUpload-CIFnm8aI.js","assets/VehicleManagementSettings-DYKj2Nim.js","assets/JobManagement-uigml8qA.js","assets/useDrivers-BY9VTvBN.js","assets/TimeManagement-rZx6tp30.js","assets/useDailyRest-QJ0s7v-K.js","assets/LicenseManagement-C2TTJien.js","assets/DriverManagement-B1ceDLK8.js","assets/DriverStatusBadges-COsAPelL.js","assets/DriverDetail-Dyfh_Y7q.js","assets/DocumentsEnhanced-CMNfpAws.js","assets/Unauthorized-C0j7e7NG.js","assets/IncidentReports-DOsk73pg.js","assets/zod-G3EUSSZ0.js","assets/useIncidents-BcFhYSaB.js","assets/UserProfile-BP_3Lmee.js","assets/Profile-DbIuaqE2.js","assets/Settings-CwyuEhub.js","assets/Subscriptions-Cgi8EHdh.js","assets/SupportTicket-B4ROqbmt.js","assets/accordion-D0yQVAlM.js","assets/HelpSupport-9uPzEI5Q.js","assets/AdminSupportTickets-CqF-IzDg.js","assets/StaffDirectory-DOyRgxXI.js","assets/ComplianceReportsPage-CwBHMtDU.js","assets/useComplianceData-CmhSjdal.js","assets/VehicleInspections-BUWAkCuB.js","assets/CustomerAuth-BqWqJ0kK.js","assets/AuthPage-CISdmbZj.js","assets/emailService-CYvLt_Xb.js","assets/DriverMobile-CxlP7R4s.js","assets/RealTimeTracking-ERBcb6U7.js","assets/Routes-jH6U9F2g.js","assets/useRoutes-CuFbmWya.js","assets/AnalyticsPage-_1oOKS8_.js","assets/WorkOrders-ChW6gnJV.js","assets/DefectReports-BEZQwegK.js","assets/OrganizationSelector-D_TUpvVh.js","assets/PartsSupplies-BCP36KiU.js","assets/NotificationCenter-rbfhnqvm.js","assets/VehicleDetails-BbN_oYkK.js","assets/VehicleServicePage-BNoXAlNA.js","assets/FuelManagement-CgvyT27L.js","assets/useFuelPurchases-C7mcgkEN.js","assets/Mechanics-CyrdIBkJ.js","assets/MechanicDashboard-dHm_hIpL.js","assets/TireManagement-CcR-U1C4.js","assets/InfringementManagement-e6CcUrWt.js","assets/AdminSchedule-D6kmRnWT.js","assets/useSchedules-P7CgD3AR.js","assets/AdminInventoryDashboard-DtPFcIJe.js","assets/AdminMechanicRequests-CHwjoOjb.js","assets/AdminTrainingManagement-bMfduUDm.js","assets/calendar-C0tEixyh.js","assets/AdvancedNotifications-DZXW0OtF.js","assets/MobileNotificationSystem-DzlTXCQY.js","assets/AdminDriverDocuments-CPLjMrd2.js","assets/PrivacyPolicy-VwBdYyg1.js","assets/BackNavigation-CSsfkIDR.js","assets/DataSubjectRights-ClRbRCOW.js","assets/DPIA-MOSojQWB.js","assets/LocationConsent-BYfwyCx7.js","assets/RailReplacement-apBRCQxx.js","assets/DriverDashboard-CPoicCKd.js","assets/DriverJobs-Dr1rMnMI.js","assets/DriverSchedule-BDZrmASU.js","assets/DriverIncidents-B5f4-98T.js","assets/DriverCompliance-BZc-5P4t.js","assets/VehicleChecks-BeKkzTNE.js","assets/useVehicleChecks-CNNWSOHF.js","assets/EnhancedVehicleCheckPage-C6S0t6QD.js","assets/useVehicleCheckQuestions-BCe3ek2l.js","assets/DriverFuelSystem-bZe4ikoP.js","assets/DriverSettings-DNKY8i4-.js","assets/DriverMore-BGYUMw6Y.js","assets/VehicleCheckTemplates-CdzOGmcT.js","assets/ChildManagement-BnNIL-vA.js","assets/EmergencyContacts-CGH7bCEy.js","assets/ParentDashboard-Gpr2g7pk.js","assets/ParentRouteTracker-CKSj-S23.js","assets/ParentCommunicationCenter-CrvAYapn.js","assets/NotificationCenter-Dz3J9WDC.js","assets/ParentLayout-CSSIPZ8O.js","assets/ParentSchedule-C9_ZGNyL.js","assets/DataProtection-NpCLByqP.js","assets/RoutePlanning-2_qJ2PB9.js","assets/InvoiceManagement-BPmmJBVV.js","assets/QuotationManagement-BrUPwUn-.js","assets/EmailManagement-CB0ta_h0.js","assets/SmartInspections-Cg6OzE6_.js","assets/DriverAppDownload-De_GRFWv.js","assets/ComplianceDashboard-CxEziNES.js","assets/TachographManager-AFjd0vWB.js","assets/APIManagement-BmhTwEmm.js","assets/PersonalAssistants-BAWoY7Tu.js","assets/FleetReportsPage-DSddys3W.js","assets/SystemDiagnostic-BefgvlWn.js","assets/TestPage-DRmKJXAU.js","assets/UserAgreementTest-Cad29wsT.js","assets/AgreementManagement-PQ57YJpn.js","assets/EmailVerification-CM5zVpU3.js","assets/EmailTest-ClI5eGqr.js","assets/index-BSwnDmYO.js","assets/ApiKeyTest-BEhsUU1f.js","assets/SimpleApiKeyTest-Ds-5Wio2.js","assets/BasicApiTest-Cs4HbThT.js","assets/PasswordResetForm-CoIxm7iE.js","assets/passwordResetService-iJGmCZNu.js","assets/EmailSystemTest-_NDqugO5.js","assets/ApiKeyDiagnostic-D9L0NzLc.js","assets/ApiKeySetupGuide-DVgEQx4z.js","assets/EmailWorkingTest-DboPlulP.js","assets/SimpleEmailTest-DXXwThCk.js","assets/EmailSystemWorkingTest-D9RT-aR3.js","assets/advancedEmailService-D5v31Xib.js","assets/EdgeFunctionEmailTest-BGxpcSDD.js","assets/EdgeFunctionSetupTest-CBkl8DUb.js","assets/EdgeFunctionDebugTest-BZAOTD4y.js"])))=>i.map(i=>d[i]);
var el=Object.defineProperty,tl=Object.defineProperties;var sl=Object.getOwnPropertyDescriptors;var Yt=Object.getOwnPropertySymbols;var Fa=Object.prototype.hasOwnProperty,Va=Object.prototype.propertyIsEnumerable;var $s=(t,s,a)=>s in t?el(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,m=(t,s)=>{for(var a in s||(s={}))Fa.call(s,a)&&$s(t,a,s[a]);if(Yt)for(var a of Yt(s))Va.call(s,a)&&$s(t,a,s[a]);return t},w=(t,s)=>tl(t,sl(s));var j=(t,s)=>{var a={};for(var n in t)Fa.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&Yt)for(var n of Yt(t))s.indexOf(n)<0&&Va.call(t,n)&&(a[n]=t[n]);return a};var Tt=(t,s,a)=>$s(t,typeof s!="symbol"?s+"":s,a);var F=(t,s,a)=>new Promise((n,r)=>{var o=u=>{try{d(a.next(u))}catch(h){r(h)}},l=u=>{try{d(a.throw(u))}catch(h){r(h)}},d=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,l);d((a=a.apply(t,s)).next())});import{k as wr,c as Ct,e as Se,j as e,B as al,P as he,V as Nr,u as fs,d as Ye,g as De,b as B,q as rl,r as _r,f as Sr,s as Cr,t as gs,A as Er,v as Rr,w as Tr,S as nl,x as il,y as Pr,a as Ws,z as kr,E as ot,O as vs,C as bs,o as Dr,n as js,D as ys,R as Ar,p as Mr,F as Ir,G as ol,H as ll,I as cl,J as dl,K as ul,L as Or,M as ml,l as Lr,N as zr,Q as hl,U as Fr,X as Vr,Y as xl,Z as $r,_ as pl,$ as qr,a0 as Ur,a1 as fl,a2 as gl,a3 as Br,a4 as vl,a5 as bl,T as jl,a6 as Hr,a7 as Kr,a8 as Wr,a9 as yl,aa as wl,ab as Gr,ac as Nl,ad as _l,h as Sl,i as Cl,ae as El}from"./ui-vendor-DMUr7mTx.js";import{b as Yr,r as i,a as I,G as Rl}from"./react-vendor-BvqlMsL5.js";import{c as Tl,_ as k}from"./supabase-vendor-B984m0TI.js";import{c as Qr,t as Pl,f as Ke,i as kl}from"./utils-vendor-B2FlkASS.js";import{X as Vt,T as fe,R as Dl,H as ws,P as Al,a as is,C as ia,b as Xr,B as Ml,N as Il,U as We,S as et,L as Jr,W as st,c as Pt,F as je,d as qe,e as It,f as we,M as jt,g as _e,h as $a,i as Gs,j as Ee,k as bt,l as qa,m as Ol,n as Ll,o as zl,p as Fl,q as Vl,r as $l,D as ql,s as os,A as Ul,t as Bl,u as Zr,v as Hl,w as oa,x as Kl,y as Wl,z as Gl,E as Ge,G as Ua,I as Ns,J as Oe,K as Yl,O as Ql,Q as Xl,V as Xe,Y as tt,Z as at,_ as Je,$ as yt,a0 as _s,a1 as en,a2 as Ss,a3 as Jl,a4 as tn,a5 as sn,a6 as an,a7 as rn,a8 as nn,a9 as on,aa as wt,ab as Zl,ac as ec,ad as tc,ae as sc,af as Qt,ag as ac,ah as rc,ai as nc,aj as ic,ak as oc,al as qs,am as lc,an as Ba,ao as cc}from"./icons-vendor-b0I7fGSL.js";import{u as ge,a as ye,b as Re,Q as dc,c as uc}from"./query-vendor-B2F_wWlc.js";import{u as $t,a as Cs,L as $e,N as Ae,b as mc,B as hc,R as Us,c as S}from"./router-vendor-CEyBJ8vK.js";import{R as xc,C as pc,a as fc,b as ln,I as cn,F as dn,c as un,d as gc}from"./ui-components-7w1-MJre.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();var mn,Ha=Yr;mn=Ha.createRoot,Ha.hydrateRoot;const vc=1,bc=1e6;let Bs=0;function jc(){return Bs=(Bs+1)%Number.MAX_SAFE_INTEGER,Bs.toString()}const Hs=new Map,Ka=t=>{if(Hs.has(t))return;const s=setTimeout(()=>{Hs.delete(t),Ot({type:"REMOVE_TOAST",toastId:t})},bc);Hs.set(t,s)},yc=(t,s)=>{switch(s.type){case"ADD_TOAST":return w(m({},t),{toasts:[s.toast,...t.toasts].slice(0,vc)});case"UPDATE_TOAST":return w(m({},t),{toasts:t.toasts.map(a=>a.id===s.toast.id?m(m({},a),s.toast):a)});case"DISMISS_TOAST":{const{toastId:a}=s;return a?Ka(a):t.toasts.forEach(n=>{Ka(n.id)}),w(m({},t),{toasts:t.toasts.map(n=>n.id===a||a===void 0?w(m({},n),{open:!1}):n)})}case"REMOVE_TOAST":return s.toastId===void 0?w(m({},t),{toasts:[]}):w(m({},t),{toasts:t.toasts.filter(a=>a.id!==s.toastId)})}},ts=[];let ss={toasts:[]};function Ot(t){ss=yc(ss,t),ts.forEach(s=>{s(ss)})}function wc(s){var t=j(s,[]);const a=jc(),n=o=>Ot({type:"UPDATE_TOAST",toast:w(m({},o),{id:a})}),r=()=>Ot({type:"DISMISS_TOAST",toastId:a});return Ot({type:"ADD_TOAST",toast:w(m({},t),{id:a,open:!0,onOpenChange:o=>{o||r()}})}),{id:a,dismiss:r,update:n}}function Te(){const[t,s]=i.useState(ss);return i.useEffect(()=>(ts.push(s),()=>{const a=ts.indexOf(s);a>-1&&ts.splice(a,1)}),[t]),w(m({},t),{toast:wc,dismiss:a=>Ot({type:"DISMISS_TOAST",toastId:a})})}var la="ToastProvider",[ca,Nc,_c]=wr("Toast"),[hn,xf]=Ct("Toast",[_c]),[Sc,Es]=hn(la),xn=t=>{const{__scopeToast:s,label:a="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:o=50,children:l}=t,[d,u]=i.useState(null),[h,p]=i.useState(0),x=i.useRef(!1),c=i.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${la}\`. Expected non-empty \`string\`.`),e.jsx(ca.Provider,{scope:s,children:e.jsx(Sc,{scope:s,label:a,duration:n,swipeDirection:r,swipeThreshold:o,toastCount:h,viewport:d,onViewportChange:u,onToastAdd:i.useCallback(()=>p(f=>f+1),[]),onToastRemove:i.useCallback(()=>p(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:c,children:l})})};xn.displayName=la;var pn="ToastViewport",Cc=["F8"],Ys="toast.viewportPause",Qs="toast.viewportResume",fn=i.forwardRef((t,s)=>{const _=t,{__scopeToast:a,hotkey:n=Cc,label:r="Notifications ({hotkey})"}=_,o=j(_,["__scopeToast","hotkey","label"]),l=Es(pn,a),d=Nc(a),u=i.useRef(null),h=i.useRef(null),p=i.useRef(null),x=i.useRef(null),c=Se(s,x,l.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=l.toastCount>0;i.useEffect(()=>{const g=y=>{var C;n.length!==0&&n.every(D=>y[D]||y.code===D)&&((C=x.current)==null||C.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),i.useEffect(()=>{const g=u.current,y=x.current;if(b&&g&&y){const N=()=>{if(!l.isClosePausedRef.current){const $=new CustomEvent(Ys);y.dispatchEvent($),l.isClosePausedRef.current=!0}},C=()=>{if(l.isClosePausedRef.current){const $=new CustomEvent(Qs);y.dispatchEvent($),l.isClosePausedRef.current=!1}},D=$=>{!g.contains($.relatedTarget)&&C()},z=()=>{g.contains(document.activeElement)||C()};return g.addEventListener("focusin",N),g.addEventListener("focusout",D),g.addEventListener("pointermove",N),g.addEventListener("pointerleave",z),window.addEventListener("blur",N),window.addEventListener("focus",C),()=>{g.removeEventListener("focusin",N),g.removeEventListener("focusout",D),g.removeEventListener("pointermove",N),g.removeEventListener("pointerleave",z),window.removeEventListener("blur",N),window.removeEventListener("focus",C)}}},[b,l.isClosePausedRef]);const v=i.useCallback(({tabbingDirection:g})=>{const N=d().map(C=>{const D=C.ref.current,z=[D,...Fc(D)];return g==="forwards"?z:z.reverse()});return(g==="forwards"?N.reverse():N).flat()},[d]);return i.useEffect(()=>{const g=x.current;if(g){const y=N=>{var z,$,G;const C=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!C){const se=document.activeElement,W=N.shiftKey;if(N.target===g&&W){(z=h.current)==null||z.focus();return}const R=v({tabbingDirection:W?"backwards":"forwards"}),ae=R.findIndex(O=>O===se);Ks(R.slice(ae+1))?N.preventDefault():W?($=h.current)==null||$.focus():(G=p.current)==null||G.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[d,v]),e.jsxs(al,{ref:u,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(Xs,{ref:h,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});Ks(g)}}),e.jsx(ca.Slot,{scope:a,children:e.jsx(he.ol,w(m({tabIndex:-1},o),{ref:c}))}),b&&e.jsx(Xs,{ref:p,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});Ks(g)}})]})});fn.displayName=pn;var gn="ToastFocusProxy",Xs=i.forwardRef((t,s)=>{const l=t,{__scopeToast:a,onFocusFromOutsideViewport:n}=l,r=j(l,["__scopeToast","onFocusFromOutsideViewport"]),o=Es(gn,a);return e.jsx(Nr,w(m({"aria-hidden":!0,tabIndex:0},r),{ref:s,style:{position:"fixed"},onFocus:d=>{var p;const u=d.relatedTarget;!((p=o.viewport)!=null&&p.contains(u))&&n()}}))});Xs.displayName=gn;var Rs="Toast",Ec="toast.swipeStart",Rc="toast.swipeMove",Tc="toast.swipeCancel",Pc="toast.swipeEnd",vn=i.forwardRef((t,s)=>{const h=t,{forceMount:a,open:n,defaultOpen:r,onOpenChange:o}=h,l=j(h,["forceMount","open","defaultOpen","onOpenChange"]),[d=!0,u]=fs({prop:n,defaultProp:r,onChange:o});return e.jsx(Ye,{present:a||d,children:e.jsx(Ac,w(m({open:d},l),{ref:s,onClose:()=>u(!1),onPause:De(t.onPause),onResume:De(t.onResume),onSwipeStart:B(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:B(t.onSwipeMove,p=>{const{x,y:c}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${c}px`)}),onSwipeCancel:B(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:B(t.onSwipeEnd,p=>{const{x,y:c}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${c}px`),u(!1)})}))})});vn.displayName=Rs;var[kc,Dc]=hn(Rs,{onClose(){}}),Ac=i.forwardRef((t,s)=>{const ae=t,{__scopeToast:a,type:n="foreground",duration:r,open:o,onClose:l,onEscapeKeyDown:d,onPause:u,onResume:h,onSwipeStart:p,onSwipeMove:x,onSwipeCancel:c,onSwipeEnd:f}=ae,b=j(ae,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),v=Es(Rs,a),[_,g]=i.useState(null),y=Se(s,O=>g(O)),N=i.useRef(null),C=i.useRef(null),D=r||v.duration,z=i.useRef(0),$=i.useRef(D),G=i.useRef(0),{onToastAdd:se,onToastRemove:W}=v,J=De(()=>{var Z;(_==null?void 0:_.contains(document.activeElement))&&((Z=v.viewport)==null||Z.focus()),l()}),le=i.useCallback(O=>{!O||O===1/0||(window.clearTimeout(G.current),z.current=new Date().getTime(),G.current=window.setTimeout(J,O))},[J]);i.useEffect(()=>{const O=v.viewport;if(O){const Z=()=>{le($.current),h==null||h()},ce=()=>{const E=new Date().getTime()-z.current;$.current=$.current-E,window.clearTimeout(G.current),u==null||u()};return O.addEventListener(Ys,ce),O.addEventListener(Qs,Z),()=>{O.removeEventListener(Ys,ce),O.removeEventListener(Qs,Z)}}},[v.viewport,D,u,h,le]),i.useEffect(()=>{o&&!v.isClosePausedRef.current&&le(D)},[o,D,v.isClosePausedRef,le]),i.useEffect(()=>(se(),()=>W()),[se,W]);const R=i.useMemo(()=>_?Sn(_):null,[_]);return v.viewport?e.jsxs(e.Fragment,{children:[R&&e.jsx(Mc,{__scopeToast:a,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),e.jsx(kc,{scope:a,onClose:J,children:Yr.createPortal(e.jsx(ca.ItemSlot,{scope:a,children:e.jsx(rl,{asChild:!0,onEscapeKeyDown:B(d,()=>{v.isFocusedToastEscapeKeyDownRef.current||J(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(he.li,w(m({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection},b),{ref:y,style:m({userSelect:"none",touchAction:"none"},t.style),onKeyDown:B(t.onKeyDown,O=>{O.key==="Escape"&&(d==null||d(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,J()))}),onPointerDown:B(t.onPointerDown,O=>{O.button===0&&(N.current={x:O.clientX,y:O.clientY})}),onPointerMove:B(t.onPointerMove,O=>{if(!N.current)return;const Z=O.clientX-N.current.x,ce=O.clientY-N.current.y,E=!!C.current,ee=["left","right"].includes(v.swipeDirection),V=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=ee?V(0,Z):0,X=ee?0:V(0,ce),Y=O.pointerType==="touch"?10:2,xe={x:H,y:X},A={originalEvent:O,delta:xe};E?(C.current=xe,Xt(Rc,x,A,{discrete:!1})):Wa(xe,v.swipeDirection,Y)?(C.current=xe,Xt(Ec,p,A,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(Z)>Y||Math.abs(ce)>Y)&&(N.current=null)}),onPointerUp:B(t.onPointerUp,O=>{const Z=C.current,ce=O.target;if(ce.hasPointerCapture(O.pointerId)&&ce.releasePointerCapture(O.pointerId),C.current=null,N.current=null,Z){const E=O.currentTarget,ee={originalEvent:O,delta:Z};Wa(Z,v.swipeDirection,v.swipeThreshold)?Xt(Pc,f,ee,{discrete:!0}):Xt(Tc,c,ee,{discrete:!0}),E.addEventListener("click",V=>V.preventDefault(),{once:!0})}})}))})}),v.viewport)})]}):null}),Mc=t=>{const h=t,{__scopeToast:s,children:a}=h,n=j(h,["__scopeToast","children"]),r=Es(Rs,s),[o,l]=i.useState(!1),[d,u]=i.useState(!1);return Lc(()=>l(!0)),i.useEffect(()=>{const p=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(p)},[]),d?null:e.jsx(_r,{asChild:!0,children:e.jsx(Nr,w(m({},n),{children:o&&e.jsxs(e.Fragment,{children:[r.label," ",a]})}))})},Ic="ToastTitle",bn=i.forwardRef((t,s)=>{const r=t,{__scopeToast:a}=r,n=j(r,["__scopeToast"]);return e.jsx(he.div,w(m({},n),{ref:s}))});bn.displayName=Ic;var Oc="ToastDescription",jn=i.forwardRef((t,s)=>{const r=t,{__scopeToast:a}=r,n=j(r,["__scopeToast"]);return e.jsx(he.div,w(m({},n),{ref:s}))});jn.displayName=Oc;var yn="ToastAction",wn=i.forwardRef((t,s)=>{const r=t,{altText:a}=r,n=j(r,["altText"]);return a.trim()?e.jsx(_n,{altText:a,asChild:!0,children:e.jsx(da,w(m({},n),{ref:s}))}):(console.error(`Invalid prop \`altText\` supplied to \`${yn}\`. Expected non-empty \`string\`.`),null)});wn.displayName=yn;var Nn="ToastClose",da=i.forwardRef((t,s)=>{const o=t,{__scopeToast:a}=o,n=j(o,["__scopeToast"]),r=Dc(Nn,a);return e.jsx(_n,{asChild:!0,children:e.jsx(he.button,w(m({type:"button"},n),{ref:s,onClick:B(t.onClick,r.onClose)}))})});da.displayName=Nn;var _n=i.forwardRef((t,s)=>{const o=t,{__scopeToast:a,altText:n}=o,r=j(o,["__scopeToast","altText"]);return e.jsx(he.div,w(m({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},r),{ref:s}))});function Sn(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),zc(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...Sn(n))}}),s}function Xt(t,s,a,{discrete:n}){const r=a.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a});s&&r.addEventListener(t,s,{once:!0}),n?Cr(r,o):r.dispatchEvent(o)}var Wa=(t,s,a=0)=>{const n=Math.abs(t.x),r=Math.abs(t.y),o=n>r;return s==="left"||s==="right"?o&&n>a:!o&&r>a};function Lc(t=()=>{}){const s=De(t);Sr(()=>{let a=0,n=0;return a=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(n)}},[s])}function zc(t){return t.nodeType===t.ELEMENT_NODE}function Fc(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function Ks(t){const s=document.activeElement;return t.some(a=>a===s?!0:(a.focus(),document.activeElement!==s))}var Vc=xn,Cn=fn,En=vn,Rn=bn,Tn=jn,Pn=wn,kn=da;const Ga=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ya=Qr,lt=(t,s)=>a=>{var n;if((s==null?void 0:s.variants)==null)return Ya(t,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:r,defaultVariants:o}=s,l=Object.keys(r).map(h=>{const p=a==null?void 0:a[h],x=o==null?void 0:o[h];if(p===null)return null;const c=Ga(p)||Ga(x);return r[h][c]}),d=a&&Object.entries(a).reduce((h,p)=>{let[x,c]=p;return c===void 0||(h[x]=c),h},{}),u=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((h,p)=>{let b=p,{class:x,className:c}=b,f=j(b,["class","className"]);return Object.entries(f).every(v=>{let[_,g]=v;return Array.isArray(g)?g.includes(m(m({},o),d)[_]):m(m({},o),d)[_]===g})?[...h,x,c]:h},[]);return Ya(t,l,u,a==null?void 0:a.class,a==null?void 0:a.className)};function P(...t){return Pl(Qr(t))}const $c=Vc,Dn=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Cn,m({ref:a,className:P("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t)},s))});Dn.displayName=Cn.displayName;const qc=lt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),An=i.forwardRef((r,n)=>{var o=r,{className:t,variant:s}=o,a=j(o,["className","variant"]);return e.jsx(En,m({ref:n,className:P(qc({variant:s}),t)},a))});An.displayName=En.displayName;const Uc=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Pn,m({ref:a,className:P("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t)},s))});Uc.displayName=Pn.displayName;const Mn=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(kn,w(m({ref:a,className:P("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"data-toast-close":""},s),{children:e.jsx(Vt,{className:"h-4 w-4"})}))});Mn.displayName=kn.displayName;const In=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Rn,m({ref:a,className:P("text-sm font-semibold",t)},s))});In.displayName=Rn.displayName;const On=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Tn,m({ref:a,className:P("text-sm opacity-90",t)},s))});On.displayName=Tn.displayName;function Bc(){const{toasts:t}=Te();return e.jsxs($c,{children:[t.map(function(l){var d=l,{id:s,title:a,description:n,action:r}=d,o=j(d,["id","title","description","action"]);return e.jsxs(An,w(m({},o),{children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(In,{children:a}),n&&e.jsx(On,{children:n})]}),r,e.jsx(Mn,{})]}),s)}),e.jsx(Dn,{})]})}var Qa=["light","dark"],Hc="(prefers-color-scheme: dark)",Kc=i.createContext(void 0),Wc={setTheme:t=>{},themes:[]},Gc=()=>{var t;return(t=i.useContext(Kc))!=null?t:Wc};i.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:o,value:l,attrs:d,nonce:u})=>{let h=o==="system",p=a==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${a}',s='setAttribute';`,x=r?Qa.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",c=(b,v=!1,_=!0)=>{let g=l?l[b]:b,y=v?b+"|| ''":`'${g}'`,N="";return r&&_&&!v&&Qa.includes(b)&&(N+=`d.style.colorScheme = '${b}';`),a==="class"?v||g?N+=`c.add(${y})`:N+="null":g&&(N+=`d[s](n,${y})`),N},f=t?`!function(){${p}${c(t)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${s}');if('system'===e||(!e&&${h})){var t='${Hc}',m=window.matchMedia(t);if(m.media!==t||m.matches){${c("dark")}}else{${c("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${c(l?"x[e]":"e",!0)}}${h?"":"else{"+c(o,!1,!1)+"}"}${x}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${s}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${c(l?"x[e]":"e",!0)}}else{${c(o,!1,!1)};}${x}}catch(t){}}();`;return i.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:f}})});var Yc=t=>{switch(t){case"success":return Jc;case"info":return ed;case"warning":return Zc;case"error":return td;default:return null}},Qc=Array(12).fill(0),Xc=({visible:t})=>I.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},I.createElement("div",{className:"sonner-spinner"},Qc.map((s,a)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),Jc=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Zc=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ed=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),td=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sd=()=>{let[t,s]=I.useState(document.hidden);return I.useEffect(()=>{let a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t},Js=1,ad=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let d=t,{message:a}=d,n=j(d,["message"]),r=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Js++,o=this.toasts.find(u=>u.id===r),l=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(u=>u.id===r?(this.publish(w(m(m({},u),t),{id:r,title:a})),w(m(m({},u),t),{id:r,dismissible:l,title:a})):u):this.addToast(w(m({title:a},n),{dismissible:l,id:r})),r},this.dismiss=t=>(t||this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create(w(m({},s),{message:t})),this.error=(t,s)=>this.create(w(m({},s),{message:t,type:"error"})),this.success=(t,s)=>this.create(w(m({},s),{type:"success",message:t})),this.info=(t,s)=>this.create(w(m({},s),{type:"info",message:t})),this.warning=(t,s)=>this.create(w(m({},s),{type:"warning",message:t})),this.loading=(t,s)=>this.create(w(m({},s),{type:"loading",message:t})),this.promise=(t,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create(w(m({},s),{promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0})));let n=t instanceof Promise?t:t(),r=a!==void 0;return n.then(o=>F(this,null,function*(){if(nd(o)&&!o.ok){r=!1;let l=typeof s.error=="function"?yield s.error(`HTTP error! status: ${o.status}`):s.error,d=typeof s.description=="function"?yield s.description(`HTTP error! status: ${o.status}`):s.description;this.create({id:a,type:"error",message:l,description:d})}else if(s.success!==void 0){r=!1;let l=typeof s.success=="function"?yield s.success(o):s.success,d=typeof s.description=="function"?yield s.description(o):s.description;this.create({id:a,type:"success",message:l,description:d})}})).catch(o=>F(this,null,function*(){if(s.error!==void 0){r=!1;let l=typeof s.error=="function"?yield s.error(o):s.error,d=typeof s.description=="function"?yield s.description(o):s.description;this.create({id:a,type:"error",message:l,description:d})}})).finally(()=>{var o;r&&(this.dismiss(a),a=void 0),(o=s.finally)==null||o.call(s)}),a},this.custom=(t,s)=>{let a=(s==null?void 0:s.id)||Js++;return this.create(m({jsx:t(a),id:a},s)),a},this.subscribers=[],this.toasts=[]}},ke=new ad,rd=(t,s)=>{let a=(s==null?void 0:s.id)||Js++;return ke.addToast(w(m({title:t},s),{id:a})),a},nd=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",id=rd,od=()=>ke.toasts,Ne=Object.assign(id,{success:ke.success,info:ke.info,warning:ke.warning,error:ke.error,custom:ke.custom,message:ke.message,promise:ke.promise,dismiss:ke.dismiss,loading:ke.loading},{getHistory:od});function ld(t,{insertAt:s}={}){if(typeof document=="undefined")return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s==="top"&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}ld(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jt(t){return t.label!==void 0}var cd=3,dd="32px",ud=4e3,md=356,hd=14,xd=20,pd=200;function fd(...t){return t.filter(Boolean).join(" ")}var gd=t=>{var s,a,n,r,o,l,d,u,h,p;let{invert:x,toast:c,unstyled:f,interacting:b,setHeights:v,visibleToasts:_,heights:g,index:y,toasts:N,expanded:C,removeToast:D,defaultRichColors:z,closeButton:$,style:G,cancelButtonStyle:se,actionButtonStyle:W,className:J="",descriptionClassName:le="",duration:R,position:ae,gap:O,loadingIcon:Z,expandByDefault:ce,classNames:E,icons:ee,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:H,cn:X}=t,[Y,xe]=I.useState(!1),[A,te]=I.useState(!1),[me,be]=I.useState(!1),[Ve,Ce]=I.useState(!1),[Kt,zs]=I.useState(0),[Bo,Da]=I.useState(0),Aa=I.useRef(null),ut=I.useRef(null),Ho=y===0,Ko=y+1<=_,Le=c.type,mt=c.dismissible!==!1,Wo=c.className||"",Go=c.descriptionClassName||"",Wt=I.useMemo(()=>g.findIndex(Q=>Q.toastId===c.id)||0,[g,c.id]),Yo=I.useMemo(()=>{var Q;return(Q=c.closeButton)!=null?Q:$},[c.closeButton,$]),Ma=I.useMemo(()=>c.duration||R||ud,[c.duration,R]),Fs=I.useRef(0),ht=I.useRef(0),Ia=I.useRef(0),xt=I.useRef(null),[Oa,Qo]=ae.split("-"),La=I.useMemo(()=>g.reduce((Q,ue,de)=>de>=Wt?Q:Q+ue.height,0),[g,Wt]),za=sd(),Xo=c.invert||x,Vs=Le==="loading";ht.current=I.useMemo(()=>Wt*O+La,[Wt,La]),I.useEffect(()=>{xe(!0)},[]),I.useLayoutEffect(()=>{if(!Y)return;let Q=ut.current,ue=Q.style.height;Q.style.height="auto";let de=Q.getBoundingClientRect().height;Q.style.height=ue,Da(de),v(Be=>Be.find(He=>He.toastId===c.id)?Be.map(He=>He.toastId===c.id?w(m({},He),{height:de}):He):[{toastId:c.id,height:de,position:c.position},...Be])},[Y,c.title,c.description,v,c.id]);let Ze=I.useCallback(()=>{te(!0),zs(ht.current),v(Q=>Q.filter(ue=>ue.toastId!==c.id)),setTimeout(()=>{D(c)},pd)},[c,D,v,ht]);I.useEffect(()=>{if(c.promise&&Le==="loading"||c.duration===1/0||c.type==="loading")return;let Q,ue=Ma;return C||b||H&&za?(()=>{if(Ia.current<Fs.current){let de=new Date().getTime()-Fs.current;ue=ue-de}Ia.current=new Date().getTime()})():ue!==1/0&&(Fs.current=new Date().getTime(),Q=setTimeout(()=>{var de;(de=c.onAutoClose)==null||de.call(c,c),Ze()},ue)),()=>clearTimeout(Q)},[C,b,ce,c,Ma,Ze,c.promise,Le,H,za]),I.useEffect(()=>{let Q=ut.current;if(Q){let ue=Q.getBoundingClientRect().height;return Da(ue),v(de=>[{toastId:c.id,height:ue,position:c.position},...de]),()=>v(de=>de.filter(Be=>Be.toastId!==c.id))}},[v,c.id]),I.useEffect(()=>{c.delete&&Ze()},[Ze,c.delete]);function Jo(){return ee!=null&&ee.loading?I.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},ee.loading):Z?I.createElement("div",{className:"sonner-loader","data-visible":Le==="loading"},Z):I.createElement(Xc,{visible:Le==="loading"})}return I.createElement("li",{"aria-live":c.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ut,className:X(J,Wo,E==null?void 0:E.toast,(s=c==null?void 0:c.classNames)==null?void 0:s.toast,E==null?void 0:E.default,E==null?void 0:E[Le],(a=c==null?void 0:c.classNames)==null?void 0:a[Le]),"data-sonner-toast":"","data-rich-colors":(n=c.richColors)!=null?n:z,"data-styled":!(c.jsx||c.unstyled||f),"data-mounted":Y,"data-promise":!!c.promise,"data-removed":A,"data-visible":Ko,"data-y-position":Oa,"data-x-position":Qo,"data-index":y,"data-front":Ho,"data-swiping":me,"data-dismissible":mt,"data-type":Le,"data-invert":Xo,"data-swipe-out":Ve,"data-expanded":!!(C||ce&&Y),style:m(m({"--index":y,"--toasts-before":y,"--z-index":N.length-y,"--offset":`${A?Kt:ht.current}px`,"--initial-height":ce?"auto":`${Bo}px`},G),c.style),onPointerDown:Q=>{Vs||!mt||(Aa.current=new Date,zs(ht.current),Q.target.setPointerCapture(Q.pointerId),Q.target.tagName!=="BUTTON"&&(be(!0),xt.current={x:Q.clientX,y:Q.clientY}))},onPointerUp:()=>{var Q,ue,de,Be;if(Ve||!mt)return;xt.current=null;let He=Number(((Q=ut.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Gt=new Date().getTime()-((ue=Aa.current)==null?void 0:ue.getTime()),Zo=Math.abs(He)/Gt;if(Math.abs(He)>=xd||Zo>.11){zs(ht.current),(de=c.onDismiss)==null||de.call(c,c),Ze(),Ce(!0);return}(Be=ut.current)==null||Be.style.setProperty("--swipe-amount","0px"),be(!1)},onPointerMove:Q=>{var ue;if(!xt.current||!mt)return;let de=Q.clientY-xt.current.y,Be=Q.clientX-xt.current.x,He=(Oa==="top"?Math.min:Math.max)(0,de),Gt=Q.pointerType==="touch"?10:2;Math.abs(He)>Gt?(ue=ut.current)==null||ue.style.setProperty("--swipe-amount",`${de}px`):Math.abs(Be)>Gt&&(xt.current=null)}},Yo&&!c.jsx?I.createElement("button",{"aria-label":V,"data-disabled":Vs,"data-close-button":!0,onClick:Vs||!mt?()=>{}:()=>{var Q;Ze(),(Q=c.onDismiss)==null||Q.call(c,c)},className:X(E==null?void 0:E.closeButton,(r=c==null?void 0:c.classNames)==null?void 0:r.closeButton)},I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,c.jsx||I.isValidElement(c.title)?c.jsx||c.title:I.createElement(I.Fragment,null,Le||c.icon||c.promise?I.createElement("div",{"data-icon":"",className:X(E==null?void 0:E.icon,(o=c==null?void 0:c.classNames)==null?void 0:o.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Jo():null,c.type!=="loading"?c.icon||(ee==null?void 0:ee[Le])||Yc(Le):null):null,I.createElement("div",{"data-content":"",className:X(E==null?void 0:E.content,(l=c==null?void 0:c.classNames)==null?void 0:l.content)},I.createElement("div",{"data-title":"",className:X(E==null?void 0:E.title,(d=c==null?void 0:c.classNames)==null?void 0:d.title)},c.title),c.description?I.createElement("div",{"data-description":"",className:X(le,Go,E==null?void 0:E.description,(u=c==null?void 0:c.classNames)==null?void 0:u.description)},c.description):null),I.isValidElement(c.cancel)?c.cancel:c.cancel&&Jt(c.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||se,onClick:Q=>{var ue,de;Jt(c.cancel)&&mt&&((de=(ue=c.cancel).onClick)==null||de.call(ue,Q),Ze())},className:X(E==null?void 0:E.cancelButton,(h=c==null?void 0:c.classNames)==null?void 0:h.cancelButton)},c.cancel.label):null,I.isValidElement(c.action)?c.action:c.action&&Jt(c.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||W,onClick:Q=>{var ue,de;Jt(c.action)&&(Q.defaultPrevented||((de=(ue=c.action).onClick)==null||de.call(ue,Q),Ze()))},className:X(E==null?void 0:E.actionButton,(p=c==null?void 0:c.classNames)==null?void 0:p.actionButton)},c.action.label):null))};function Xa(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var vd=t=>{let{invert:s,position:a="bottom-right",hotkey:n=["altKey","KeyT"],expand:r,closeButton:o,className:l,offset:d,theme:u="light",richColors:h,duration:p,style:x,visibleToasts:c=cd,toastOptions:f,dir:b=Xa(),gap:v=hd,loadingIcon:_,icons:g,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:N,cn:C=fd}=t,[D,z]=I.useState([]),$=I.useMemo(()=>Array.from(new Set([a].concat(D.filter(H=>H.position).map(H=>H.position)))),[D,a]),[G,se]=I.useState([]),[W,J]=I.useState(!1),[le,R]=I.useState(!1),[ae,O]=I.useState(u!=="system"?u:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=I.useRef(null),ce=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=I.useRef(null),ee=I.useRef(!1),V=I.useCallback(H=>{var X;(X=D.find(Y=>Y.id===H.id))!=null&&X.delete||ke.dismiss(H.id),z(Y=>Y.filter(({id:xe})=>xe!==H.id))},[D]);return I.useEffect(()=>ke.subscribe(H=>{if(H.dismiss){z(X=>X.map(Y=>Y.id===H.id?w(m({},Y),{delete:!0}):Y));return}setTimeout(()=>{Rl.flushSync(()=>{z(X=>{let Y=X.findIndex(xe=>xe.id===H.id);return Y!==-1?[...X.slice(0,Y),m(m({},X[Y]),H),...X.slice(Y+1)]:[H,...X]})})})}),[]),I.useEffect(()=>{if(u!=="system"){O(u);return}u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window!="undefined"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:H})=>{O(H?"dark":"light")})},[u]),I.useEffect(()=>{D.length<=1&&J(!1)},[D]),I.useEffect(()=>{let H=X=>{var Y,xe;n.every(A=>X[A]||X.code===A)&&(J(!0),(Y=Z.current)==null||Y.focus()),X.code==="Escape"&&(document.activeElement===Z.current||(xe=Z.current)!=null&&xe.contains(document.activeElement))&&J(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[n]),I.useEffect(()=>{if(Z.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,ee.current=!1)}},[Z.current]),D.length?I.createElement("section",{"aria-label":`${y} ${ce}`,tabIndex:-1},$.map((H,X)=>{var Y;let[xe,A]=H.split("-");return I.createElement("ol",{key:H,dir:b==="auto"?Xa():b,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-theme":ae,"data-y-position":xe,"data-x-position":A,style:m({"--front-toast-height":`${((Y=G[0])==null?void 0:Y.height)||0}px`,"--offset":typeof d=="number"?`${d}px`:d||dd,"--width":`${md}px`,"--gap":`${v}px`},x),onBlur:te=>{ee.current&&!te.currentTarget.contains(te.relatedTarget)&&(ee.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,E.current=te.relatedTarget)},onMouseEnter:()=>J(!0),onMouseMove:()=>J(!0),onMouseLeave:()=>{le||J(!1)},onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},D.filter(te=>!te.position&&X===0||te.position===H).map((te,me)=>{var be,Ve;return I.createElement(gd,{key:te.id,icons:g,index:me,toast:te,defaultRichColors:h,duration:(be=f==null?void 0:f.duration)!=null?be:p,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:s,visibleToasts:c,closeButton:(Ve=f==null?void 0:f.closeButton)!=null?Ve:o,interacting:le,position:H,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:V,toasts:D.filter(Ce=>Ce.position==te.position),heights:G.filter(Ce=>Ce.position==te.position),setHeights:se,expandByDefault:r,gap:v,loadingIcon:_,expanded:W,pauseWhenPageIsHidden:N,cn:C})}))})):null};const bd=s=>{var t=j(s,[]);const{theme:a="system"}=Gc();return e.jsx(vd,m({theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},t))};var[Ts,pf]=Ct("Tooltip",[gs]),Ps=gs(),Ln="TooltipProvider",jd=700,Zs="tooltip.open",[yd,ua]=Ts(Ln),zn=t=>{const{__scopeTooltip:s,delayDuration:a=jd,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:o}=t,[l,d]=i.useState(!0),u=i.useRef(!1),h=i.useRef(0);return i.useEffect(()=>{const p=h.current;return()=>window.clearTimeout(p)},[]),e.jsx(yd,{scope:s,isOpenDelayed:l,delayDuration:a,onOpen:i.useCallback(()=>{window.clearTimeout(h.current),d(!1)},[]),onClose:i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>d(!0),n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:i.useCallback(p=>{u.current=p},[]),disableHoverableContent:r,children:o})};zn.displayName=Ln;var ks="Tooltip",[wd,Ds]=Ts(ks),Fn=t=>{const{__scopeTooltip:s,children:a,open:n,defaultOpen:r=!1,onOpenChange:o,disableHoverableContent:l,delayDuration:d}=t,u=ua(ks,t.__scopeTooltip),h=Ps(s),[p,x]=i.useState(null),c=Ws(),f=i.useRef(0),b=l!=null?l:u.disableHoverableContent,v=d!=null?d:u.delayDuration,_=i.useRef(!1),[g=!1,y]=fs({prop:n,defaultProp:r,onChange:$=>{$?(u.onOpen(),document.dispatchEvent(new CustomEvent(Zs))):u.onClose(),o==null||o($)}}),N=i.useMemo(()=>g?_.current?"delayed-open":"instant-open":"closed",[g]),C=i.useCallback(()=>{window.clearTimeout(f.current),f.current=0,_.current=!1,y(!0)},[y]),D=i.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y(!1)},[y]),z=i.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{_.current=!0,y(!0),f.current=0},v)},[v,y]);return i.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),e.jsx(kr,w(m({},h),{children:e.jsx(wd,{scope:s,contentId:c,open:g,stateAttribute:N,trigger:p,onTriggerChange:x,onTriggerEnter:i.useCallback(()=>{u.isOpenDelayed?z():C()},[u.isOpenDelayed,z,C]),onTriggerLeave:i.useCallback(()=>{b?D():(window.clearTimeout(f.current),f.current=0)},[D,b]),onOpen:C,onClose:D,disableHoverableContent:b,children:a})}))};Fn.displayName=ks;var ea="TooltipTrigger",Vn=i.forwardRef((t,s)=>{const c=t,{__scopeTooltip:a}=c,n=j(c,["__scopeTooltip"]),r=Ds(ea,a),o=ua(ea,a),l=Ps(a),d=i.useRef(null),u=Se(s,d,r.onTriggerChange),h=i.useRef(!1),p=i.useRef(!1),x=i.useCallback(()=>h.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(Er,w(m({asChild:!0},l),{children:e.jsx(he.button,w(m({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},n),{ref:u,onPointerMove:B(t.onPointerMove,f=>{f.pointerType!=="touch"&&!p.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),p.current=!0)}),onPointerLeave:B(t.onPointerLeave,()=>{r.onTriggerLeave(),p.current=!1}),onPointerDown:B(t.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:B(t.onFocus,()=>{h.current||r.onOpen()}),onBlur:B(t.onBlur,r.onClose),onClick:B(t.onClick,r.onClose)}))}))});Vn.displayName=ea;var Nd="TooltipPortal",[ff,_d]=Ts(Nd,{forceMount:void 0}),Nt="TooltipContent",$n=i.forwardRef((t,s)=>{const a=_d(Nt,t.__scopeTooltip),d=t,{forceMount:n=a.forceMount,side:r="top"}=d,o=j(d,["forceMount","side"]),l=Ds(Nt,t.__scopeTooltip);return e.jsx(Ye,{present:n||l.open,children:l.disableHoverableContent?e.jsx(qn,w(m({side:r},o),{ref:s})):e.jsx(Sd,w(m({side:r},o),{ref:s}))})}),Sd=i.forwardRef((t,s)=>{const a=Ds(Nt,t.__scopeTooltip),n=ua(Nt,t.__scopeTooltip),r=i.useRef(null),o=Se(s,r),[l,d]=i.useState(null),{trigger:u,onClose:h}=a,p=r.current,{onPointerInTransitChange:x}=n,c=i.useCallback(()=>{d(null),x(!1)},[x]),f=i.useCallback((b,v)=>{const _=b.currentTarget,g={x:b.clientX,y:b.clientY},y=Td(g,_.getBoundingClientRect()),N=Pd(g,y),C=kd(v.getBoundingClientRect()),D=Ad([...N,...C]);d(D),x(!0)},[x]);return i.useEffect(()=>()=>c(),[c]),i.useEffect(()=>{if(u&&p){const b=_=>f(_,p),v=_=>f(_,u);return u.addEventListener("pointerleave",b),p.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",b),p.removeEventListener("pointerleave",v)}}},[u,p,f,c]),i.useEffect(()=>{if(l){const b=v=>{const _=v.target,g={x:v.clientX,y:v.clientY},y=(u==null?void 0:u.contains(_))||(p==null?void 0:p.contains(_)),N=!Dd(g,l);y?c():N&&(c(),h())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,p,l,h,c]),e.jsx(qn,w(m({},t),{ref:o}))}),[Cd,Ed]=Ts(ks,{isInside:!1}),qn=i.forwardRef((t,s)=>{const x=t,{__scopeTooltip:a,children:n,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:l}=x,d=j(x,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),u=Ds(Nt,a),h=Ps(a),{onClose:p}=u;return i.useEffect(()=>(document.addEventListener(Zs,p),()=>document.removeEventListener(Zs,p)),[p]),i.useEffect(()=>{if(u.trigger){const c=f=>{const b=f.target;b!=null&&b.contains(u.trigger)&&p()};return window.addEventListener("scroll",c,{capture:!0}),()=>window.removeEventListener("scroll",c,{capture:!0})}},[u.trigger,p]),e.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c=>c.preventDefault(),onDismiss:p,children:e.jsxs(Tr,w(m(m({"data-state":u.stateAttribute},h),d),{ref:s,style:w(m({},d.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[e.jsx(nl,{children:n}),e.jsx(Cd,{scope:a,isInside:!0,children:e.jsx(il,{id:u.contentId,role:"tooltip",children:r||n})})]}))})});$n.displayName=Nt;var Un="TooltipArrow",Rd=i.forwardRef((t,s)=>{const l=t,{__scopeTooltip:a}=l,n=j(l,["__scopeTooltip"]),r=Ps(a);return Ed(Un,a).isInside?null:e.jsx(Pr,w(m(m({},r),n),{ref:s}))});Rd.displayName=Un;function Td(t,s){const a=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),r=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(a,n,r,o)){case o:return"left";case r:return"right";case a:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Pd(t,s,a=5){const n=[];switch(s){case"top":n.push({x:t.x-a,y:t.y+a},{x:t.x+a,y:t.y+a});break;case"bottom":n.push({x:t.x-a,y:t.y-a},{x:t.x+a,y:t.y-a});break;case"left":n.push({x:t.x+a,y:t.y-a},{x:t.x+a,y:t.y+a});break;case"right":n.push({x:t.x-a,y:t.y-a},{x:t.x-a,y:t.y+a});break}return n}function kd(t){const{top:s,right:a,bottom:n,left:r}=t;return[{x:r,y:s},{x:a,y:s},{x:a,y:n},{x:r,y:n}]}function Dd(t,s){const{x:a,y:n}=t;let r=!1;for(let o=0,l=s.length-1;o<s.length;l=o++){const d=s[o].x,u=s[o].y,h=s[l].x,p=s[l].y;u>n!=p>n&&a<(h-d)*(n-u)/(p-u)+d&&(r=!r)}return r}function Ad(t){const s=t.slice();return s.sort((a,n)=>a.x<n.x?-1:a.x>n.x?1:a.y<n.y?-1:a.y>n.y?1:0),Md(s)}function Md(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const r=t[n];for(;s.length>=2;){const o=s[s.length-1],l=s[s.length-2];if((o.x-l.x)*(r.y-l.y)>=(o.y-l.y)*(r.x-l.x))s.pop();else break}s.push(r)}s.pop();const a=[];for(let n=t.length-1;n>=0;n--){const r=t[n];for(;a.length>=2;){const o=a[a.length-1],l=a[a.length-2];if((o.x-l.x)*(r.y-l.y)>=(o.y-l.y)*(r.x-l.x))a.pop();else break}a.push(r)}return a.pop(),s.length===1&&a.length===1&&s[0].x===a[0].x&&s[0].y===a[0].y?s:s.concat(a)}var Id=zn,Od=Fn,Ld=Vn,Bn=$n;const Hn=Id,zd=Od,Fd=Ld,Kn=i.forwardRef((r,n)=>{var o=r,{className:t,sideOffset:s=4}=o,a=j(o,["className","sideOffset"]);return e.jsx(Bn,m({ref:n,sideOffset:s,className:P("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},a))});Kn.displayName=Bn.displayName;let Lt=!1,ta=null;const Vd=()=>{const t=navigator.userAgent.toLowerCase(),s=/iphone|ipad|ipod|android|blackberry|windows phone/g.test(t),a=typeof window!="undefined"&&window.Capacitor;return s||a};Lt=Vd();Lt?(ta={getItem:t=>{try{return localStorage.getItem(t)}catch(s){return console.log("localStorage not available, using sessionStorage"),sessionStorage.getItem(t)}},setItem:(t,s)=>{try{localStorage.setItem(t,s)}catch(a){console.log("localStorage not available, using sessionStorage"),sessionStorage.setItem(t,s)}},removeItem:t=>{try{localStorage.removeItem(t)}catch(s){console.log("localStorage not available, using sessionStorage"),sessionStorage.removeItem(t)}}},console.log("Mobile environment detected with fallback storage")):console.log("Web environment detected");const $d=()=>({url:"https://dznbihypzmvcmradijqn.supabase.co",key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bmJpaHlwem12Y21yYWRpanFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NzQsImV4cCI6MjA3MDUzMDU3NH0.dS4mQBL0q_JhsZQF14KKB0nL2f3H--2hPoxXzitPOgo"}),{url:qd,key:Ud}=$d(),L=Tl(qd,Ud,{auth:{storage:Lt&&ta?ta:localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,debug:Lt},global:{headers:{"X-Client-Info":"supabase-js/2.55.0","X-Platform":Lt?"mobile":"web","User-Agent":"LSR-Mobile-App/1.0"}},realtime:{params:{eventsPerSecond:10}}}),Wn=i.createContext(void 0),Bd=({children:t})=>{const[s,a]=i.useState(null),[n,r]=i.useState(null),[o,l]=i.useState(null),[d,u]=i.useState(!0),{toast:h}=Te(),p=(_,g)=>F(void 0,null,function*(){var y,N;try{const C=(N=(y=g==null?void 0:g.user)==null?void 0:y.user_metadata)==null?void 0:N.organization_id;if(C){const{data:D}=yield L.from("profiles").select("organization_id").eq("id",_).single();D&&D.organization_id!==C&&(yield L.from("profiles").update({organization_id:C}).eq("id",_))}}catch(C){}}),x=(_,g)=>F(void 0,null,function*(){var y,N,C,D;try{const z=_.id,{data:$,error:G}=yield L.from("profiles").select("id").eq("id",z).maybeSingle();if(G&&console.error("Error checking profile existence:",G),!$){const se=_.user_metadata||{},{error:W}=yield L.from("profiles").upsert({id:z,email:(y=_.email)!=null?y:"",first_name:(N=se.first_name)!=null?N:"",last_name:(C=se.last_name)!=null?C:"",organization_id:(D=se.organization_id)!=null?D:null},{onConflict:"id"});W&&console.error("Error creating profile:",W)}}catch(z){console.error("Error in ensureProfileExists:",z)}}),c=_=>F(void 0,null,function*(){try{const g=localStorage.getItem("emergency_user_profile");if(g){console.log(" Using emergency profile from localStorage");const C=JSON.parse(g);r(C);return}const{data:y,error:N}=yield L.from("profiles").select("*").eq("id",_).maybeSingle();if(N){if(console.error("Profile fetch error:",N),N.message.includes("Load failed")||N.message.includes("access control")||N.message.includes("CORS")||N.message.includes("TypeError")){console.log(" Access control/CORS error detected, checking for emergency profile");const C=sessionStorage.getItem("user_profile");if(C){console.log(" Using emergency profile from sessionStorage");const D=JSON.parse(C);r(D);return}}r(null);return}y?(r(y),sessionStorage.setItem("user_profile",JSON.stringify(y))):(console.log("No profile found, user can proceed with limited access"),r(null))}catch(g){console.error("Failed to fetch profile:",g),r(null)}}),f=()=>F(void 0,null,function*(){s!=null&&s.id&&(localStorage.removeItem("emergency_user_profile"),sessionStorage.removeItem("user_profile"),yield c(s.id))}),b=()=>F(void 0,null,function*(){s!=null&&s.id&&(localStorage.removeItem("emergency_user_profile"),sessionStorage.removeItem("user_profile"),yield c(s.id))}),v=()=>F(void 0,null,function*(){try{const{error:_}=yield L.auth.signOut();if(_)throw _;a(null),r(null),l(null),h({title:"Signed out successfully",description:"You have been logged out of your account."})}catch(_){h({title:"Sign out failed",description:"There was an error signing out. Please try again.",variant:"destructive"})}});return i.useEffect(()=>{let _=!0,g,y;const{data:{subscription:N}}=L.auth.onAuthStateChange((C,D)=>{_&&(clearTimeout(g),clearTimeout(y),D!=null&&D.user?((s==null?void 0:s.email)!==D.user.email&&console.log("Auth state change - session found for user:",D.user.email),l(D),a(D.user),setTimeout(()=>{if(!_)return;F(void 0,null,function*(){try{yield x(D.user,D),yield p(D.user.id,D),yield c(D.user.id),_&&u(!1)}catch($){console.error("Profile setup failed:",$),y=setTimeout(()=>{_&&(console.log("Profile timeout reached - allowing user through with limited profile"),u(!1))},5e3)}})},0)):(l(null),a(null),r(null),u(!1)))});return L.auth.getSession().then(({data:{session:C},error:D})=>{if(D){console.error("Error getting initial session:",D),_&&u(!1);return}C!=null&&C.user?console.log("Initial session found, user:",C.user.email):(console.log("No initial session found"),_&&u(!1))}).catch(C=>{console.error("Failed to get initial session:",C),_&&u(!1)}),g=setTimeout(()=>{_&&!(o!=null&&o.user)&&(console.log("Auth initialization timeout - no session found, setting loading to false"),u(!1))},5e3),()=>{_=!1,clearTimeout(g),clearTimeout(y),N.unsubscribe()}},[]),e.jsx(Wn.Provider,{value:{user:s,profile:n,session:o,loading:d,signOut:v,refreshProfile:f,forceRefreshProfile:b},children:t})},K=()=>{const t=i.useContext(Wn);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function Hd({children:t}){return e.jsx(e.Fragment,{children:t})}const Gn=i.createContext(void 0),Zt=({children:t})=>{const{profile:s}=K(),[a,n]=i.useState(null),[r,o]=i.useState(!1);i.useEffect(()=>{(s==null?void 0:s.role)!=="mechanic"&&(n(null),o(!1))},[s==null?void 0:s.id,s==null?void 0:s.role]),i.useEffect(()=>{(s==null?void 0:s.role)!=="mechanic"&&(s!=null&&s.organization_id)&&n(s.organization_id)},[s==null?void 0:s.organization_id,s==null?void 0:s.role]);const l={selectedOrganizationId:a,setSelectedOrganizationId:n,isOrganizationSelectorVisible:r,setIsOrganizationSelectorVisible:o};return e.jsx(Gn.Provider,{value:l,children:t})},Yn=()=>{const t=i.useContext(Gn);if(t===void 0)throw new Error("useOrganization must be used within an OrganizationProvider");return t},Qn=i.createContext(void 0),Xn=()=>{const t=i.useContext(Qn);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Kd=({children:t})=>{const[s,a]=i.useState(()=>{const l=localStorage.getItem("theme");return l==="light"||l==="dark"?l:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),n=s==="dark",r=()=>{const l=s==="light"?"dark":"light";a(l),localStorage.setItem("theme",l)};i.useEffect(()=>{const l=document.documentElement;s==="dark"?l.classList.add("dark"):l.classList.remove("dark")},[s]);const o={theme:s,toggleTheme:r,isDark:n};return e.jsx(Qn.Provider,{value:o,children:t})},q=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,className:P("rounded-lg border bg-card text-card-foreground shadow-sm",t)},s))});q.displayName="Card";const ne=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,className:P("flex flex-col space-y-1.5 p-6",t)},s))});ne.displayName="CardHeader";const ie=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("h3",m({ref:a,className:P("text-2xl font-semibold leading-none tracking-tight",t)},s))});ie.displayName="CardTitle";const Jn=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("p",m({ref:a,className:P("text-sm text-muted-foreground",t)},s))});Jn.displayName="CardDescription";const U=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,className:P("p-6 pt-0",t)},s))});U.displayName="CardContent";const Wd=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,className:P("flex items-center p-6 pt-0",t)},s))});Wd.displayName="CardFooter";const Gd=lt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",brand:"bg-brand text-brand-foreground hover:bg-brand/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=i.forwardRef((l,o)=>{var d=l,{className:t,variant:s,size:a,asChild:n=!1}=d,r=j(d,["className","variant","size","asChild"]);const u=n?ot:"button";return e.jsx(u,m({className:P(Gd({variant:s,size:a,className:t})),ref:o},r))});T.displayName="Button";class Yd extends i.Component{constructor(a){super(a);Tt(this,"maxRetries",3);Tt(this,"handleRetry",()=>{this.state.retryCount<this.maxRetries&&this.setState(a=>({hasError:!1,error:null,errorId:"",retryCount:a.retryCount+1}))});Tt(this,"handleGoHome",()=>{window.location.href="/"});Tt(this,"handleRefresh",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorId:"",retryCount:0}}static getDerivedStateFromError(a){const n=`ui_err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:a,errorId:n,retryCount:0}}componentDidCatch(a,n){return F(this,null,function*(){var r,o;console.error("Component error caught:",a,n),(o=(r=this.props).onError)==null||o.call(r,a,n)})}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const a=this.state.retryCount<this.maxRetries;return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:e.jsxs(q,{className:"w-full max-w-md",children:[e.jsxs(ne,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(fe,{className:"h-12 w-12 text-destructive"})}),e.jsx(ie,{className:"text-xl",children:"Something went wrong"}),e.jsx(Jn,{children:"We're sorry, but something unexpected happened. This error has been logged and our team will investigate."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded-md text-sm",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Error ID:"}),e.jsx("code",{className:"text-xs",children:this.state.errorId.slice(-12)})]}),!1,e.jsxs("div",{className:"flex flex-col gap-2",children:[a&&e.jsxs(T,{onClick:this.handleRetry,className:"w-full",variant:"default",children:[e.jsx(Dl,{className:"w-4 h-4 mr-2"}),"Try Again (",this.maxRetries-this.state.retryCount," attempts left)"]}),e.jsx(T,{onClick:this.handleRefresh,variant:"outline",className:"w-full",children:"Refresh Page"}),e.jsxs(T,{onClick:this.handleGoHome,variant:"ghost",className:"w-full",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Go Home"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"If this problem persists, please contact support with the error ID above."})]})]})})}return this.props.children}}const Et=()=>{const[t,s]=i.useState(!1);return i.useEffect(()=>{const a=()=>{const n=window.innerWidth<768,r=navigator.userAgent,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r),l="ontouchstart"in window||navigator.maxTouchPoints>0;s(n||o&&l)};return a(),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),t},Zn=()=>{const[t,s]=i.useState("portrait");return i.useEffect(()=>{const a=()=>{window.innerHeight>window.innerWidth?s("portrait"):s("landscape")};return a(),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),t},Ue=i.forwardRef((r,n)=>{var o=r,{className:t,type:s}=o,a=j(o,["className","type"]);return e.jsx("input",m({type:s,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n},a))});Ue.displayName="Input";function Ja(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Qd(...t){return s=>{let a=!1;const n=t.map(r=>{const o=Ja(r,s);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():Ja(t[r],null)}}}}function Xd(t){const s=Jd(t),a=i.forwardRef((n,r)=>{const h=n,{children:o}=h,l=j(h,["children"]),d=i.Children.toArray(o),u=d.find(eu);if(u){const p=u.props.children,x=d.map(c=>c===u?i.Children.count(p)>1?i.Children.only(null):i.isValidElement(p)?p.props.children:null:c);return e.jsx(s,w(m({},l),{ref:r,children:i.isValidElement(p)?i.cloneElement(p,void 0,x):null}))}return e.jsx(s,w(m({},l),{ref:r,children:o}))});return a.displayName=`${t}.Slot`,a}function Jd(t){const s=i.forwardRef((a,n)=>{const l=a,{children:r}=l,o=j(l,["children"]);if(i.isValidElement(r)){const d=su(r),u=tu(o,r.props);return r.type!==i.Fragment&&(u.ref=n?Qd(n,d):d),i.cloneElement(r,u)}return i.Children.count(r)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Zd=Symbol("radix.slottable");function eu(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Zd}function tu(t,s){const a=m({},s);for(const n in s){const r=t[n],o=s[n];/^on[A-Z]/.test(n)?r&&o?a[n]=(...d)=>{const u=o(...d);return r(...d),u}:r&&(a[n]=r):n==="style"?a[n]=m(m({},r),o):n==="className"&&(a[n]=[r,o].filter(Boolean).join(" "))}return m(m({},t),a)}function su(t){var n,r;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var au=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ru=au.reduce((t,s)=>{const a=Xd(`Primitive.${s}`),n=i.forwardRef((r,o)=>{const h=r,{asChild:l}=h,d=j(h,["asChild"]),u=l?a:s;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,w(m({},d),{ref:o}))});return n.displayName=`Primitive.${s}`,w(m({},t),{[s]:n})},{}),nu="Separator",Za="horizontal",iu=["horizontal","vertical"],ei=i.forwardRef((t,s)=>{const u=t,{decorative:a,orientation:n=Za}=u,r=j(u,["decorative","orientation"]),o=ou(n)?n:Za,d=a?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(ru.div,w(m(m({"data-orientation":o},d),r),{ref:s}))});ei.displayName=nu;function ou(t){return iu.includes(t)}var ti=ei;const si=i.forwardRef((o,r)=>{var l=o,{className:t,orientation:s="horizontal",decorative:a=!0}=l,n=j(l,["className","orientation","decorative"]);return e.jsx(ti,m({ref:r,decorative:a,orientation:s,className:P("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t)},n))});si.displayName=ti.displayName;const lu=Ar,cu=Mr,ai=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(vs,w(m({className:P("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},s),{ref:a}))});ai.displayName=vs.displayName;const du=lt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ri=i.forwardRef((o,r)=>{var l=o,{side:t="right",className:s,children:a}=l,n=j(l,["side","className","children"]);return e.jsxs(cu,{children:[e.jsx(ai,{}),e.jsxs(bs,w(m({ref:r,className:P(du({side:t}),s)},n),{children:[a,e.jsxs(Dr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});ri.displayName=bs.displayName;const uu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(js,m({ref:a,className:P("text-lg font-semibold text-foreground",t)},s))});uu.displayName=js.displayName;const mu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(ys,m({ref:a,className:P("text-sm text-muted-foreground",t)},s))});mu.displayName=ys.displayName;function er(a){var n=a,{className:t}=n,s=j(n,["className"]);return e.jsx("div",m({className:P("relative overflow-hidden rounded-md bg-muted animate-shimmer",t)},s))}const hu="sidebar:state",xu=60*60*24*7,pu="16rem",fu="18rem",gu="3rem",vu="b",ni=i.createContext(null);function qt(){const t=i.useContext(ni);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const ii=i.forwardRef((u,d)=>{var h=u,{defaultOpen:t=!0,open:s,onOpenChange:a,className:n,style:r,children:o}=h,l=j(h,["defaultOpen","open","onOpenChange","className","style","children"]);const p=Et(),[x,c]=i.useState(!1),[f,b]=i.useState(t),v=s!=null?s:f,_=i.useCallback(C=>{const D=typeof C=="function"?C(v):C;a?a(D):b(D),document.cookie=`${hu}=${D}; path=/; max-age=${xu}`},[a,v]),g=i.useCallback(()=>p?c(C=>!C):_(C=>!C),[p,_,c]);i.useEffect(()=>{const C=D=>{D.key===vu&&(D.metaKey||D.ctrlKey)&&(D.preventDefault(),g())};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[g]);const y=v?"expanded":"collapsed",N=i.useMemo(()=>({state:y,open:v,setOpen:_,isMobile:p,openMobile:x,setOpenMobile:c,toggleSidebar:g}),[y,v,_,p,x,c,g]);return e.jsx(ni.Provider,{value:N,children:e.jsx(Hn,{delayDuration:0,children:e.jsx("div",w(m({style:m({"--sidebar-width":pu,"--sidebar-width-icon":gu},r),className:P("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:d},l),{children:o}))})})});ii.displayName="SidebarProvider";const oi=i.forwardRef((d,l)=>{var u=d,{side:t="left",variant:s="sidebar",collapsible:a="offcanvas",className:n,children:r}=u,o=j(u,["side","variant","collapsible","className","children"]);const{isMobile:h,state:p,openMobile:x,setOpenMobile:c}=qt();return a==="none"?e.jsx("div",w(m({className:P("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:l},o),{children:r})):h?e.jsx(lu,w(m({open:x,onOpenChange:c},o),{children:e.jsx(ri,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":fu},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:r})})})):e.jsxs("div",{ref:l,className:"group peer hidden md:block text-sidebar-foreground","data-state":p,"data-collapsible":p==="collapsed"?a:"","data-variant":s,"data-side":t,children:[e.jsx("div",{className:P("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",w(m({className:P("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n)},o),{children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})}))]})});oi.displayName="Sidebar";const li=i.forwardRef((r,n)=>{var o=r,{className:t,onClick:s}=o,a=j(o,["className","onClick"]);const{toggleSidebar:l}=qt();return e.jsxs(T,w(m({ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:P("h-7 w-7",t),onClick:d=>{s==null||s(d),l()}},a),{children:[e.jsx(Al,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]}))});li.displayName="SidebarTrigger";const bu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);const{toggleSidebar:o}=qt();return e.jsx("button",m({ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:o,title:"Toggle Sidebar",className:P("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t)},s))});bu.displayName="SidebarRail";const ju=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("main",m({ref:a,className:P("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t)},s))});ju.displayName="SidebarInset";const yu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Ue,m({ref:a,"data-sidebar":"input",className:P("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t)},s))});yu.displayName="SidebarInput";const ci=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"header",className:P("flex flex-col gap-2 p-2",t)},s))});ci.displayName="SidebarHeader";const di=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"footer",className:P("flex flex-col gap-2 p-2",t)},s))});di.displayName="SidebarFooter";const wu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(si,m({ref:a,"data-sidebar":"separator",className:P("mx-2 w-auto bg-sidebar-border",t)},s))});wu.displayName="SidebarSeparator";const ui=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"content",className:P("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t)},s))});ui.displayName="SidebarContent";const Nu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"group",className:P("relative flex w-full min-w-0 flex-col p-2",t)},s))});Nu.displayName="SidebarGroup";const _u=i.forwardRef((r,n)=>{var o=r,{className:t,asChild:s=!1}=o,a=j(o,["className","asChild"]);const l=s?ot:"div";return e.jsx(l,m({ref:n,"data-sidebar":"group-label",className:P("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t)},a))});_u.displayName="SidebarGroupLabel";const Su=i.forwardRef((r,n)=>{var o=r,{className:t,asChild:s=!1}=o,a=j(o,["className","asChild"]);const l=s?ot:"button";return e.jsx(l,m({ref:n,"data-sidebar":"group-action",className:P("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t)},a))});Su.displayName="SidebarGroupAction";const Cu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"group-content",className:P("w-full text-sm",t)},s))});Cu.displayName="SidebarGroupContent";const Eu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("ul",m({ref:a,"data-sidebar":"menu",className:P("flex w-full min-w-0 flex-col gap-1",t)},s))});Eu.displayName="SidebarMenu";const Ru=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("li",m({ref:a,"data-sidebar":"menu-item",className:P("group/menu-item relative",t)},s))});Ru.displayName="SidebarMenuItem";const Tu=lt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Pu=i.forwardRef((u,d)=>{var h=u,{asChild:t=!1,isActive:s=!1,variant:a="default",size:n="default",tooltip:r,className:o}=h,l=j(h,["asChild","isActive","variant","size","tooltip","className"]);const p=t?ot:"button",{isMobile:x,state:c}=qt(),f=e.jsx(p,m({ref:d,"data-sidebar":"menu-button","data-size":n,"data-active":s,className:P(Tu({variant:a,size:n}),o)},l));return r?(typeof r=="string"&&(r={children:r}),e.jsxs(zd,{children:[e.jsx(Fd,{asChild:!0,children:f}),e.jsx(Kn,m({side:"right",align:"center",hidden:c!=="collapsed"||x},r))]})):f});Pu.displayName="SidebarMenuButton";const ku=i.forwardRef((o,r)=>{var l=o,{className:t,asChild:s=!1,showOnHover:a=!1}=l,n=j(l,["className","asChild","showOnHover"]);const d=s?ot:"button";return e.jsx(d,m({ref:r,"data-sidebar":"menu-action",className:P("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t)},n))});ku.displayName="SidebarMenuAction";const Du=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,"data-sidebar":"menu-badge",className:P("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t)},s))});Du.displayName="SidebarMenuBadge";const Au=i.forwardRef((r,n)=>{var o=r,{className:t,showIcon:s=!1}=o,a=j(o,["className","showIcon"]);const l=i.useMemo(()=>"75%",[]);return e.jsxs("div",w(m({ref:n,"data-sidebar":"menu-skeleton",className:P("rounded-md h-8 flex gap-2 px-2 items-center",t)},a),{children:[s&&e.jsx(er,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(er,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":l}})]}))});Au.displayName="SidebarMenuSkeleton";const Mu=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("ul",m({ref:a,"data-sidebar":"menu-sub",className:P("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t)},s))});Mu.displayName="SidebarMenuSub";const Iu=i.forwardRef((a,s)=>{var t=j(a,[]);return e.jsx("li",m({ref:s},t))});Iu.displayName="SidebarMenuSubItem";const Ou=i.forwardRef((l,o)=>{var d=l,{asChild:t=!1,size:s="md",isActive:a,className:n}=d,r=j(d,["asChild","size","isActive","className"]);const u=t?ot:"a";return e.jsx(u,m({ref:o,"data-sidebar":"menu-sub-button","data-size":s,"data-active":a,className:P("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",s==="sm"&&"text-xs",s==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n)},r))});Ou.displayName="SidebarMenuSubButton";const ft=t=>t==="admin",Lu=t=>t==="council",as=t=>t==="mechanic",ls=t=>ft(t)||Lu(t),sa=t=>as(t)||ls(t),zu=t=>ls(t),Fu=t=>ft(t),Vu=t=>sa(t),ma=()=>{const{user:t,profile:s,loading:a}=K(),n=s==null?void 0:s.role,r=s==null?void 0:s.organization_id,o={isAdmin:ft(n),isSuperAdmin:ft(n),canAccessEverything:ft(n),bypassAllRestrictions:ft(n)};return w(m({},o),{userRole:n,organizationId:r,loading:a,hasAdminPrivileges:ls(n),hasMechanicPrivileges:sa(n),isMechanic:as(n),canManageOrganization:zu(n),hasUnrestrictedAccess:Fu(n),canAccessVehicleFeatures:Vu(n),canAccess:l=>o.isAdmin?!0:as(n)?["vehicles","vehicle-management","vehicle-inspections","work-orders","defect-reports","parts-supplies","inventory","documents","incident-reports","vehicle-details","vehicle-service","notifications","dashboard"].includes(l):!1,canManage:l=>o.isAdmin?!0:as(n)?["vehicles","work-orders","defect-reports","parts-supplies","vehicle-inspections","vehicle-service"].includes(l):!1,canView:l=>o.isAdmin||ls(n)||sa(n),overridePermission:l=>o.isAdmin||l})},$u=({children:t,fallback:s=null,requireFullAdmin:a=!1})=>{const{isAdmin:n,hasAdminPrivileges:r,loading:o}=ma();return o?I.createElement("div",{className:"animate-pulse bg-muted rounded h-4 w-24"}):(a?n:r)?I.createElement(I.Fragment,null,t):I.createElement(I.Fragment,null,s)},qu=xc,Uu=pc,Bu=fc,ha=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(ln,m({ref:a,className:P("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},s))});ha.displayName=ln.displayName;const xa=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(cn,m({ref:a,className:P("aspect-square h-full w-full",t)},s))});xa.displayName=cn.displayName;const pa=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(dn,m({ref:a,className:P("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},s))});pa.displayName=dn.displayName;const Hu=lt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",soft:"border-transparent bg-muted text-muted-foreground hover:bg-muted/80"}},defaultVariants:{variant:"default"}});function oe(n){var r=n,{className:t,variant:s}=r,a=j(r,["className","variant"]);return e.jsx("div",m({className:P(Hu({variant:s}),t)},a))}const Ku=()=>{const{profile:t,user:s}=K();ma();const a=$t(),{toast:n}=Te(),r=Cs();Xn();const[o,l]=i.useState({}),d=()=>F(void 0,null,function*(){const{error:b}=yield L.auth.signOut();b?n({title:"Error",description:"Failed to sign out",variant:"destructive"}):r("/auth")}),u=()=>t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase():t!=null&&t.first_name?t.first_name.charAt(0).toUpperCase():s!=null&&s.email?s.email.charAt(0).toUpperCase():"U",h=()=>t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name} ${t.last_name}`:t!=null&&t.first_name?t.first_name:(s==null?void 0:s.email)||"User",x=(()=>{if(!t)return[];const b=[{title:"Dashboard",url:"/dashboard",icon:It,description:"Main overview"}];switch(t.role){case"admin":case"council":return[{title:"Overview",items:[...b,{title:"Analytics",url:"/analytics",icon:Ol,description:"Performance metrics"}]},{title:"Fleet Management",items:[{title:"Vehicles",url:"/vehicles",icon:is,description:"Fleet management",badge:{text:"MOT Due",variant:"destructive"}},{title:"Drivers",url:"/drivers",icon:we,description:"Driver management"},{title:"Mechanics",url:"/mechanics",icon:st,description:"Maintenance staff"},{title:"Tire Management",url:"/admin/tire-management",icon:Ll,description:"Tire inventory and tracking"},{title:"Infringement Management",url:"/admin/infringement-management",icon:zl,description:"Driver infringement tracking"},{title:"Fuel Management",url:"/fuel-management",icon:qa,description:"Fuel tracking and analytics"}]},{title:"Operations",items:[{title:"Jobs",url:"/jobs",icon:Gs,description:"Job assignments"},{title:"Schedule",url:"/admin-schedule",icon:_e,description:"Resource scheduling"},{title:"School Routes",url:"/routes",icon:Fl,description:"School route management"},{title:"Rail Replacement",url:"/rail-replacement",icon:Vl,description:"Rail replacement bus services"},{title:"Personal Assistants",url:"/personal-assistants",icon:$l,description:"Manage Personal Assistants for school routes"},{title:"Route Planning",url:"/route-planning",icon:jt,description:"Advanced route planning & pricing"}]},{title:"Financial",items:[{title:"Invoice Management",url:"/invoice-management",icon:je,description:"Create and manage invoices"},{title:"Quotation Management",url:"/quotation-management",icon:ql,description:"View and manage customer quotations"},{title:"Inventory Management",url:"/admin/inventory",icon:os,description:"Parts inventory and approval workflows",badge:{text:"New",variant:"default"}}]},{title:"Communication",items:[{title:"Email Management",url:"/admin/emails",icon:$a,description:"Send emails and manage templates"},{title:"Advanced Notifications",url:"/notifications",icon:qe,description:"Send and manage notifications"}]},{title:"Compliance",items:[{title:"Compliance Dashboard",url:"/admin/compliance-dashboard",icon:Ul,description:"Real-time compliance monitoring"},{title:"Tachograph Manager",url:"/admin/tachograph-management",icon:Ee,description:"Digital & analogue tachograph management"},{title:"Inspections",url:"/inspections",icon:Pt,description:"Vehicle inspections"},{title:"Vehicle Check Questions",url:"/admin/smart-inspections",icon:Pt,description:"Advanced inspection system"},{title:"Licenses",url:"/licenses",icon:bt,description:"License tracking"},{title:"Documents",url:"/documents",icon:je,description:"Document management"},{title:"Incidents",url:"/incident-reports",icon:fe,description:"Incident reports"}]},{title:"Reports",items:[{title:"Fleet Reports",url:"/reports/fleet",icon:Bl,description:"Fleet analytics"},{title:"Compliance Reports",url:"/reports/compliance",icon:bt,description:"Compliance analytics"}]},{title:"Support & Help",items:[{title:"Support Tickets",url:"/admin/support-tickets",icon:Zr,description:"Manage support tickets and requests"},{title:"Help & Documentation",url:"/help-support",icon:Hl,description:"Help center and documentation"}]}];case"driver":return[{title:"My Dashboard",items:b},{title:"My Work",items:[{title:"My Jobs",url:"/driver-jobs",icon:Gs,description:"Current assignments"},{title:"My Schedule",url:"/driver-schedule",icon:_e,description:"Today's schedule"},{title:"Time Clock",url:"/time-management",icon:Ee,description:"Clock in/out"}]},{title:"Vehicle & Compliance",items:[{title:"Vehicle Checks",url:"/driver/vehicle-checks",icon:Pt,description:"Daily inspections"},{title:"Vehicle Inspections",url:"/vehicle-inspections",icon:Pt,description:"Smart inspection system"},{title:"My Compliance",url:"/driver-compliance",icon:bt,description:"License status"},{title:"Documents",url:"/driver/documents",icon:je,description:"My documents"},{title:"Fuel System",url:"/driver/fuel",icon:qa,description:"Record fuel purchases"}]},{title:"Communication",items:[{title:"Notifications",url:"/notifications",icon:qe,description:"Send and receive notifications"}]}];case"parent":return[{title:"My Family",items:[{title:"Parent Dashboard",url:"/parent/dashboard",icon:It,description:"Track your children's transportation"},{title:"Children",url:"/parent/children",icon:we,description:"Manage children information"}]},{title:"Transportation",items:[{title:"Live Tracking",url:"/parent/tracking",icon:jt,description:"Track bus in real-time"},{title:"Schedule",url:"/parent/schedule",icon:_e,description:"Transport timetable"},{title:"Communication",url:"/parent/communication",icon:$a,description:"Contact transport company"},{title:"Notifications",url:"/notifications",icon:qe,description:"Send and receive notifications"}]}];case"mechanic":return[{title:"Workshop",items:[...b,{title:"Work Orders",url:"/work-orders",icon:st,description:"Assigned tasks"}]},{title:"Inspections",items:[{title:"Vehicle Inspections",url:"/vehicle-inspections",icon:Pt,description:"Inspection reports"},{title:"Defect Reports",url:"/defects",icon:fe,description:"Defect tracking"}]},{title:"Inventory",items:[{title:"Parts & Supplies",url:"/inventory",icon:je,description:"Parts management"}]},{title:"Communication",items:[{title:"Notifications",url:"/notifications",icon:qe,description:"Send and receive notifications"}]}];default:return[{title:"Overview",items:b}]}})(),c=b=>{l(v=>w(m({},v),{[b]:!v[b]}))},f=b=>b.some(v=>a.pathname===v.url.split("?")[0]);return e.jsxs(oi,{className:"border-r border-border bg-background sidebar",collapsible:"offcanvas",children:[e.jsx(ci,{className:"p-3 border-b border-border bg-card sidebar-header",children:e.jsxs($e,{to:"/dashboard",className:"flex items-center space-x-2 group-data-[collapsible=icon]:justify-center",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center shadow-sm bg-gradient-to-r from-primary to-primary/80",children:e.jsx(is,{className:"w-4 h-4 text-primary-foreground"})}),e.jsx("div",{className:"group-data-[collapsible=icon]:hidden",children:e.jsx("span",{className:"text-sm font-bold text-foreground",children:"Logistics Solution Resources"})})]})}),e.jsxs(ui,{className:"overflow-y-auto py-2 bg-background sidebar-content",children:[t&&e.jsx("div",{className:"px-2 mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-lg group-data-[collapsible=icon]:px-1 border border-border bg-card user-profile-section",children:[e.jsxs(ha,{className:"h-7 w-7 flex-shrink-0",children:[e.jsx(xa,{src:(t==null?void 0:t.avatar_url)||"",alt:h()}),e.jsx(pa,{className:"text-primary-foreground text-xs bg-gradient-to-r from-primary to-primary/80",children:u()})]}),e.jsxs("div",{className:"flex-1 min-w-0 group-data-[collapsible=icon]:hidden",children:[e.jsx("p",{className:"text-xs font-medium truncate text-foreground",children:h()}),e.jsx("p",{className:"text-xs capitalize text-muted-foreground",children:t.role})]})]})}),e.jsx("div",{className:"space-y-1 px-2",children:x.map(b=>{var g;const v=(g=o[b.title])!=null?g:f(b.items),_=f(b.items);return e.jsxs(qu,{open:v,onOpenChange:()=>c(b.title),children:[e.jsx(Uu,{asChild:!0,children:e.jsxs("button",{className:`
                    w-full flex items-center justify-between px-2 py-2 rounded-md text-left transition-all duration-200 collapsible-trigger
                    ${_?"active":""}
                    group-data-[collapsible=icon]:justify-center
                  `,children:[e.jsx("span",{className:"text-xs font-medium group-data-[collapsible=icon]:hidden",children:b.title}),e.jsx("div",{className:"group-data-[collapsible=icon]:hidden",children:v?e.jsx(ia,{className:"w-3 h-3 text-gray-600"}):e.jsx(Xr,{className:"w-3 h-3 text-gray-600"})})]})}),e.jsx(Bu,{className:"space-y-0.5 mt-1 group-data-[collapsible=icon]:hidden",children:b.items.map(y=>{const N=a.pathname===y.url.split("?")[0];return e.jsxs($e,{to:y.url,className:`
                          flex items-center space-x-2 px-3 py-1.5 ml-2 rounded-md transition-all duration-200 text-xs sidebar-item
                          ${N?"active":""}
                        `,children:[e.jsx(y.icon,{className:`w-3.5 h-3.5 flex-shrink-0 nav-icon ${N?"active":""}`}),e.jsx("span",{className:"truncate font-medium",children:y.title}),y.badge&&e.jsx(oe,{variant:y.badge.variant,className:"text-xs h-4",children:y.badge.text})]},y.title)})})]},b.title)})}),e.jsxs("div",{className:"mt-4 px-2 space-y-1",children:[e.jsx($u,{children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs($e,{to:"/staff-directory",className:`flex items-center space-x-2 px-2 py-1.5 rounded-md text-xs transition-all duration-200 sidebar-item ${a.pathname==="/staff-directory"?"active":""}`,children:[e.jsx(Ml,{className:"w-3.5 h-3.5 nav-icon"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Staff Directory"})]}),e.jsxs($e,{to:"/admin/api-management",className:`flex items-center space-x-2 px-2 py-1.5 rounded-md text-xs transition-all duration-200 sidebar-item ${a.pathname==="/admin/api-management"?"active":""}`,children:[e.jsx(Il,{className:"w-3.5 h-3.5 nav-icon"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"API Management"})]})]})}),e.jsxs("div",{className:"border-t border-border pt-2 space-y-0.5",children:[e.jsxs($e,{to:"/profile",className:`flex items-center space-x-2 px-2 py-1.5 rounded-md text-xs transition-all duration-200 ${a.pathname==="/profile"?"bg-accent text-accent-foreground border border-border":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"}`,children:[e.jsx(We,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Profile"})]}),e.jsxs($e,{to:(t==null?void 0:t.role)==="driver"?"/driver/settings":"/settings",className:`flex items-center space-x-2 px-2 py-1.5 rounded-md text-xs transition-all duration-200 ${((t==null?void 0:t.role)==="driver"?a.pathname==="/driver/settings":a.pathname==="/settings")?"bg-accent text-accent-foreground border border-border":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"}`,children:[e.jsx(et,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Settings"})]})]})]})]}),e.jsx(di,{className:"p-2 border-t border-border bg-muted/50 sidebar-footer",children:e.jsxs(T,{onClick:d,variant:"outline",size:"sm",className:"w-full flex items-center justify-center space-x-2 text-muted-foreground border-border hover:bg-accent hover:border-border/80 h-8 text-xs transition-all duration-200",children:[e.jsx(Jr,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Sign Out"})]})})]})},Wu=({className:t})=>{try{return qt(),e.jsx(li,{className:t})}catch(s){return null}};var aa=["Enter"," "],Gu=["ArrowDown","PageUp","Home"],mi=["ArrowUp","PageDown","End"],Yu=[...Gu,...mi],Qu={ltr:[...aa,"ArrowRight"],rtl:[...aa,"ArrowLeft"]},Xu={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ut="Menu",[zt,Ju,Zu]=wr(Ut),[ct,hi]=Ct(Ut,[Zu,gs,Ir]),As=gs(),xi=Ir(),[em,dt]=ct(Ut),[tm,Bt]=ct(Ut),pi=t=>{const{__scopeMenu:s,open:a=!1,children:n,dir:r,onOpenChange:o,modal:l=!0}=t,d=As(s),[u,h]=i.useState(null),p=i.useRef(!1),x=De(o),c=Lr(r);return i.useEffect(()=>{const f=()=>{p.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>p.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),e.jsx(kr,w(m({},d),{children:e.jsx(em,{scope:s,open:a,onOpenChange:x,content:u,onContentChange:h,children:e.jsx(tm,{scope:s,onClose:i.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:p,dir:c,modal:l,children:n})})}))};pi.displayName=Ut;var sm="MenuAnchor",fa=i.forwardRef((t,s)=>{const o=t,{__scopeMenu:a}=o,n=j(o,["__scopeMenu"]),r=As(a);return e.jsx(Er,w(m(m({},r),n),{ref:s}))});fa.displayName=sm;var ga="MenuPortal",[am,fi]=ct(ga,{forceMount:void 0}),gi=t=>{const{__scopeMenu:s,forceMount:a,children:n,container:r}=t,o=dt(ga,s);return e.jsx(am,{scope:s,forceMount:a,children:e.jsx(Ye,{present:a||o.open,children:e.jsx(_r,{asChild:!0,container:r,children:n})})})};gi.displayName=ga;var ze="MenuContent",[rm,va]=ct(ze),vi=i.forwardRef((t,s)=>{const a=fi(ze,t.__scopeMenu),d=t,{forceMount:n=a.forceMount}=d,r=j(d,["forceMount"]),o=dt(ze,t.__scopeMenu),l=Bt(ze,t.__scopeMenu);return e.jsx(zt.Provider,{scope:t.__scopeMenu,children:e.jsx(Ye,{present:n||o.open,children:e.jsx(zt.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(nm,w(m({},r),{ref:s})):e.jsx(im,w(m({},r),{ref:s}))})})})}),nm=i.forwardRef((t,s)=>{const a=dt(ze,t.__scopeMenu),n=i.useRef(null),r=Se(s,n);return i.useEffect(()=>{const o=n.current;if(o)return ol(o)},[]),e.jsx(ba,w(m({},t),{ref:r,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:B(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)}))}),im=i.forwardRef((t,s)=>{const a=dt(ze,t.__scopeMenu);return e.jsx(ba,w(m({},t),{ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)}))}),ba=i.forwardRef((t,s)=>{const ee=t,{__scopeMenu:a,loop:n=!1,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:x,onInteractOutside:c,onDismiss:f,disableOutsideScroll:b}=ee,v=j(ee,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),_=dt(ze,a),g=Bt(ze,a),y=As(a),N=xi(a),C=Ju(a),[D,z]=i.useState(null),$=i.useRef(null),G=Se(s,$,_.onContentChange),se=i.useRef(0),W=i.useRef(""),J=i.useRef(0),le=i.useRef(null),R=i.useRef("right"),ae=i.useRef(0),O=b?ml:i.Fragment,Z=b?{as:ot,allowPinchZoom:!0}:void 0,ce=V=>{var be,Ve;const H=W.current+V,X=C().filter(Ce=>!Ce.disabled),Y=document.activeElement,xe=(be=X.find(Ce=>Ce.ref.current===Y))==null?void 0:be.textValue,A=X.map(Ce=>Ce.textValue),te=vm(A,H,xe),me=(Ve=X.find(Ce=>Ce.textValue===te))==null?void 0:Ve.ref.current;(function Ce(Kt){W.current=Kt,window.clearTimeout(se.current),Kt!==""&&(se.current=window.setTimeout(()=>Ce(""),1e3))})(H),me&&setTimeout(()=>me.focus())};i.useEffect(()=>()=>window.clearTimeout(se.current),[]),ll();const E=i.useCallback(V=>{var X,Y;return R.current===((X=le.current)==null?void 0:X.side)&&jm(V,(Y=le.current)==null?void 0:Y.area)},[]);return e.jsx(rm,{scope:a,searchRef:W,onItemEnter:i.useCallback(V=>{E(V)&&V.preventDefault()},[E]),onItemLeave:i.useCallback(V=>{var H;E(V)||((H=$.current)==null||H.focus(),z(null))},[E]),onTriggerLeave:i.useCallback(V=>{E(V)&&V.preventDefault()},[E]),pointerGraceTimerRef:J,onPointerGraceIntentChange:i.useCallback(V=>{le.current=V},[]),children:e.jsx(O,w(m({},Z),{children:e.jsx(cl,{asChild:!0,trapped:r,onMountAutoFocus:B(o,V=>{var H;V.preventDefault(),(H=$.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:x,onInteractOutside:c,onDismiss:f,children:e.jsx(dl,w(m({asChild:!0},N),{dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:D,onCurrentTabStopIdChange:z,onEntryFocus:B(u,V=>{g.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Tr,w(m(m({role:"menu","aria-orientation":"vertical","data-state":Mi(_.open),"data-radix-menu-content":"",dir:g.dir},y),v),{ref:G,style:m({outline:"none"},v.style),onKeyDown:B(v.onKeyDown,V=>{const X=V.target.closest("[data-radix-menu-content]")===V.currentTarget,Y=V.ctrlKey||V.altKey||V.metaKey,xe=V.key.length===1;X&&(V.key==="Tab"&&V.preventDefault(),!Y&&xe&&ce(V.key));const A=$.current;if(V.target!==A||!Yu.includes(V.key))return;V.preventDefault();const me=C().filter(be=>!be.disabled).map(be=>be.ref.current);mi.includes(V.key)&&me.reverse(),fm(me)}),onBlur:B(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(se.current),W.current="")}),onPointerMove:B(t.onPointerMove,Ft(V=>{const H=V.target,X=ae.current!==V.clientX;if(V.currentTarget.contains(H)&&X){const Y=V.clientX>ae.current?"right":"left";R.current=Y,ae.current=V.clientX}}))}))}))})})}))})});vi.displayName=ze;var om="MenuGroup",ja=i.forwardRef((t,s)=>{const r=t,{__scopeMenu:a}=r,n=j(r,["__scopeMenu"]);return e.jsx(he.div,w(m({role:"group"},n),{ref:s}))});ja.displayName=om;var lm="MenuLabel",bi=i.forwardRef((t,s)=>{const r=t,{__scopeMenu:a}=r,n=j(r,["__scopeMenu"]);return e.jsx(he.div,w(m({},n),{ref:s}))});bi.displayName=lm;var cs="MenuItem",tr="menu.itemSelect",Ms=i.forwardRef((t,s)=>{const x=t,{disabled:a=!1,onSelect:n}=x,r=j(x,["disabled","onSelect"]),o=i.useRef(null),l=Bt(cs,t.__scopeMenu),d=va(cs,t.__scopeMenu),u=Se(s,o),h=i.useRef(!1),p=()=>{const c=o.current;if(!a&&c){const f=new CustomEvent(tr,{bubbles:!0,cancelable:!0});c.addEventListener(tr,b=>n==null?void 0:n(b),{once:!0}),Cr(c,f),f.defaultPrevented?h.current=!1:l.onClose()}};return e.jsx(ji,w(m({},r),{ref:u,disabled:a,onClick:B(t.onClick,p),onPointerDown:c=>{var f;(f=t.onPointerDown)==null||f.call(t,c),h.current=!0},onPointerUp:B(t.onPointerUp,c=>{var f;h.current||(f=c.currentTarget)==null||f.click()}),onKeyDown:B(t.onKeyDown,c=>{const f=d.searchRef.current!=="";a||f&&c.key===" "||aa.includes(c.key)&&(c.currentTarget.click(),c.preventDefault())})}))});Ms.displayName=cs;var ji=i.forwardRef((t,s)=>{const b=t,{__scopeMenu:a,disabled:n=!1,textValue:r}=b,o=j(b,["__scopeMenu","disabled","textValue"]),l=va(cs,a),d=xi(a),u=i.useRef(null),h=Se(s,u),[p,x]=i.useState(!1),[c,f]=i.useState("");return i.useEffect(()=>{var _;const v=u.current;v&&f(((_=v.textContent)!=null?_:"").trim())},[o.children]),e.jsx(zt.ItemSlot,{scope:a,disabled:n,textValue:r!=null?r:c,children:e.jsx(ul,w(m({asChild:!0},d),{focusable:!n,children:e.jsx(he.div,w(m({role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},o),{ref:h,onPointerMove:B(t.onPointerMove,Ft(v=>{n?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:B(t.onPointerLeave,Ft(v=>l.onItemLeave(v))),onFocus:B(t.onFocus,()=>x(!0)),onBlur:B(t.onBlur,()=>x(!1))}))}))})}),cm="MenuCheckboxItem",yi=i.forwardRef((t,s)=>{const o=t,{checked:a=!1,onCheckedChange:n}=o,r=j(o,["checked","onCheckedChange"]);return e.jsx(Ci,{scope:t.__scopeMenu,checked:a,children:e.jsx(Ms,w(m({role:"menuitemcheckbox","aria-checked":ds(a)?"mixed":a},r),{ref:s,"data-state":wa(a),onSelect:B(r.onSelect,()=>n==null?void 0:n(ds(a)?!0:!a),{checkForDefaultPrevented:!1})}))})});yi.displayName=cm;var wi="MenuRadioGroup",[dm,um]=ct(wi,{value:void 0,onValueChange:()=>{}}),Ni=i.forwardRef((t,s)=>{const l=t,{value:a,onValueChange:n}=l,r=j(l,["value","onValueChange"]),o=De(n);return e.jsx(dm,{scope:t.__scopeMenu,value:a,onValueChange:o,children:e.jsx(ja,w(m({},r),{ref:s}))})});Ni.displayName=wi;var _i="MenuRadioItem",Si=i.forwardRef((t,s)=>{const l=t,{value:a}=l,n=j(l,["value"]),r=um(_i,t.__scopeMenu),o=a===r.value;return e.jsx(Ci,{scope:t.__scopeMenu,checked:o,children:e.jsx(Ms,w(m({role:"menuitemradio","aria-checked":o},n),{ref:s,"data-state":wa(o),onSelect:B(n.onSelect,()=>{var d;return(d=r.onValueChange)==null?void 0:d.call(r,a)},{checkForDefaultPrevented:!1})}))})});Si.displayName=_i;var ya="MenuItemIndicator",[Ci,mm]=ct(ya,{checked:!1}),Ei=i.forwardRef((t,s)=>{const l=t,{__scopeMenu:a,forceMount:n}=l,r=j(l,["__scopeMenu","forceMount"]),o=mm(ya,a);return e.jsx(Ye,{present:n||ds(o.checked)||o.checked===!0,children:e.jsx(he.span,w(m({},r),{ref:s,"data-state":wa(o.checked)}))})});Ei.displayName=ya;var hm="MenuSeparator",Ri=i.forwardRef((t,s)=>{const r=t,{__scopeMenu:a}=r,n=j(r,["__scopeMenu"]);return e.jsx(he.div,w(m({role:"separator","aria-orientation":"horizontal"},n),{ref:s}))});Ri.displayName=hm;var xm="MenuArrow",Ti=i.forwardRef((t,s)=>{const o=t,{__scopeMenu:a}=o,n=j(o,["__scopeMenu"]),r=As(a);return e.jsx(Pr,w(m(m({},r),n),{ref:s}))});Ti.displayName=xm;var pm="MenuSub",[gf,Pi]=ct(pm),Dt="MenuSubTrigger",ki=i.forwardRef((t,s)=>{const a=dt(Dt,t.__scopeMenu),n=Bt(Dt,t.__scopeMenu),r=Pi(Dt,t.__scopeMenu),o=va(Dt,t.__scopeMenu),l=i.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:u}=o,h={__scopeMenu:t.__scopeMenu},p=i.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return i.useEffect(()=>p,[p]),i.useEffect(()=>{const x=d.current;return()=>{window.clearTimeout(x),u(null)}},[d,u]),e.jsx(fa,w(m({asChild:!0},h),{children:e.jsx(ji,w(m({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":r.contentId,"data-state":Mi(a.open)},t),{ref:Or(s,r.onTriggerChange),onClick:x=>{var c;(c=t.onClick)==null||c.call(t,x),!(t.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:B(t.onPointerMove,Ft(x=>{o.onItemEnter(x),!x.defaultPrevented&&!t.disabled&&!a.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{a.onOpenChange(!0),p()},100))})),onPointerLeave:B(t.onPointerLeave,Ft(x=>{var f,b;p();const c=(f=a.content)==null?void 0:f.getBoundingClientRect();if(c){const v=(b=a.content)==null?void 0:b.dataset.side,_=v==="right",g=_?-5:5,y=c[_?"left":"right"],N=c[_?"right":"left"];o.onPointerGraceIntentChange({area:[{x:x.clientX+g,y:x.clientY},{x:y,y:c.top},{x:N,y:c.top},{x:N,y:c.bottom},{x:y,y:c.bottom}],side:v}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(x),x.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:B(t.onKeyDown,x=>{var f;const c=o.searchRef.current!=="";t.disabled||c&&x.key===" "||Qu[n.dir].includes(x.key)&&(a.onOpenChange(!0),(f=a.content)==null||f.focus(),x.preventDefault())})}))}))});ki.displayName=Dt;var Di="MenuSubContent",Ai=i.forwardRef((t,s)=>{const a=fi(ze,t.__scopeMenu),p=t,{forceMount:n=a.forceMount}=p,r=j(p,["forceMount"]),o=dt(ze,t.__scopeMenu),l=Bt(ze,t.__scopeMenu),d=Pi(Di,t.__scopeMenu),u=i.useRef(null),h=Se(s,u);return e.jsx(zt.Provider,{scope:t.__scopeMenu,children:e.jsx(Ye,{present:n||o.open,children:e.jsx(zt.Slot,{scope:t.__scopeMenu,children:e.jsx(ba,w(m({id:d.contentId,"aria-labelledby":d.triggerId},r),{ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var c;l.isUsingKeyboardRef.current&&((c=u.current)==null||c.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:B(t.onFocusOutside,x=>{x.target!==d.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:B(t.onEscapeKeyDown,x=>{l.onClose(),x.preventDefault()}),onKeyDown:B(t.onKeyDown,x=>{var b;const c=x.currentTarget.contains(x.target),f=Xu[l.dir].includes(x.key);c&&f&&(o.onOpenChange(!1),(b=d.trigger)==null||b.focus(),x.preventDefault())})}))})})})});Ai.displayName=Di;function Mi(t){return t?"open":"closed"}function ds(t){return t==="indeterminate"}function wa(t){return ds(t)?"indeterminate":t?"checked":"unchecked"}function fm(t){const s=document.activeElement;for(const a of t)if(a===s||(a.focus(),document.activeElement!==s))return}function gm(t,s){return t.map((a,n)=>t[(s+n)%t.length])}function vm(t,s,a){const r=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,o=a?t.indexOf(a):-1;let l=gm(t,Math.max(o,0));r.length===1&&(l=l.filter(h=>h!==a));const u=l.find(h=>h.toLowerCase().startsWith(r.toLowerCase()));return u!==a?u:void 0}function bm(t,s){const{x:a,y:n}=t;let r=!1;for(let o=0,l=s.length-1;o<s.length;l=o++){const d=s[o].x,u=s[o].y,h=s[l].x,p=s[l].y;u>n!=p>n&&a<(h-d)*(n-u)/(p-u)+d&&(r=!r)}return r}function jm(t,s){if(!s)return!1;const a={x:t.clientX,y:t.clientY};return bm(a,s)}function Ft(t){return s=>s.pointerType==="mouse"?t(s):void 0}var ym=pi,wm=fa,Nm=gi,_m=vi,Sm=ja,Cm=bi,Em=Ms,Rm=yi,Tm=Ni,Pm=Si,km=Ei,Dm=Ri,Am=Ti,Mm=ki,Im=Ai,Na="DropdownMenu",[Om,vf]=Ct(Na,[hi]),Pe=hi(),[Lm,Ii]=Om(Na),Oi=t=>{const{__scopeDropdownMenu:s,children:a,dir:n,open:r,defaultOpen:o,onOpenChange:l,modal:d=!0}=t,u=Pe(s),h=i.useRef(null),[p=!1,x]=fs({prop:r,defaultProp:o,onChange:l});return e.jsx(Lm,{scope:s,triggerId:Ws(),triggerRef:h,contentId:Ws(),open:p,onOpenChange:x,onOpenToggle:i.useCallback(()=>x(c=>!c),[x]),modal:d,children:e.jsx(ym,w(m({},u),{open:p,onOpenChange:x,dir:n,modal:d,children:a}))})};Oi.displayName=Na;var Li="DropdownMenuTrigger",zi=i.forwardRef((t,s)=>{const d=t,{__scopeDropdownMenu:a,disabled:n=!1}=d,r=j(d,["__scopeDropdownMenu","disabled"]),o=Ii(Li,a),l=Pe(a);return e.jsx(wm,w(m({asChild:!0},l),{children:e.jsx(he.button,w(m({type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},r),{ref:Or(s,o.triggerRef),onPointerDown:B(t.onPointerDown,u=>{!n&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:B(t.onKeyDown,u=>{n||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})}))}))});zi.displayName=Li;var zm="DropdownMenuPortal",Fi=t=>{const r=t,{__scopeDropdownMenu:s}=r,a=j(r,["__scopeDropdownMenu"]),n=Pe(s);return e.jsx(Nm,m(m({},n),a))};Fi.displayName=zm;var Vi="DropdownMenuContent",$i=i.forwardRef((t,s)=>{const d=t,{__scopeDropdownMenu:a}=d,n=j(d,["__scopeDropdownMenu"]),r=Ii(Vi,a),o=Pe(a),l=i.useRef(!1);return e.jsx(_m,w(m(m({id:r.contentId,"aria-labelledby":r.triggerId},o),n),{ref:s,onCloseAutoFocus:B(t.onCloseAutoFocus,u=>{var h;l.current||(h=r.triggerRef.current)==null||h.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:B(t.onInteractOutside,u=>{const h=u.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,x=h.button===2||p;(!r.modal||x)&&(l.current=!0)}),style:w(m({},t.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});$i.displayName=Vi;var Fm="DropdownMenuGroup",Vm=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Sm,w(m(m({},r),n),{ref:s}))});Vm.displayName=Fm;var $m="DropdownMenuLabel",qi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Cm,w(m(m({},r),n),{ref:s}))});qi.displayName=$m;var qm="DropdownMenuItem",Ui=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Em,w(m(m({},r),n),{ref:s}))});Ui.displayName=qm;var Um="DropdownMenuCheckboxItem",Bi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Rm,w(m(m({},r),n),{ref:s}))});Bi.displayName=Um;var Bm="DropdownMenuRadioGroup",Hm=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Tm,w(m(m({},r),n),{ref:s}))});Hm.displayName=Bm;var Km="DropdownMenuRadioItem",Hi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Pm,w(m(m({},r),n),{ref:s}))});Hi.displayName=Km;var Wm="DropdownMenuItemIndicator",Ki=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(km,w(m(m({},r),n),{ref:s}))});Ki.displayName=Wm;var Gm="DropdownMenuSeparator",Wi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Dm,w(m(m({},r),n),{ref:s}))});Wi.displayName=Gm;var Ym="DropdownMenuArrow",Qm=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Am,w(m(m({},r),n),{ref:s}))});Qm.displayName=Ym;var Xm="DropdownMenuSubTrigger",Gi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Mm,w(m(m({},r),n),{ref:s}))});Gi.displayName=Xm;var Jm="DropdownMenuSubContent",Yi=i.forwardRef((t,s)=>{const o=t,{__scopeDropdownMenu:a}=o,n=j(o,["__scopeDropdownMenu"]),r=Pe(a);return e.jsx(Im,w(m(m({},r),n),{ref:s,style:w(m({},t.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Yi.displayName=Jm;var Zm=Oi,eh=zi,th=Fi,Qi=$i,Xi=qi,Ji=Ui,Zi=Bi,eo=Hi,to=Ki,so=Wi,ao=Gi,ro=Yi;const sh=Zm,ah=eh,rh=i.forwardRef((o,r)=>{var l=o,{className:t,inset:s,children:a}=l,n=j(l,["className","inset","children"]);return e.jsxs(ao,w(m({ref:r,className:P("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t)},n),{children:[a,e.jsx(Xr,{className:"ml-auto h-4 w-4"})]}))});rh.displayName=ao.displayName;const nh=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(ro,m({ref:a,className:P("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},s))});nh.displayName=ro.displayName;const no=i.forwardRef((r,n)=>{var o=r,{className:t,sideOffset:s=4}=o,a=j(o,["className","sideOffset"]);return e.jsx(th,{children:e.jsx(Qi,m({ref:n,sideOffset:s,className:P("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},a))})});no.displayName=Qi.displayName;const pt=i.forwardRef((r,n)=>{var o=r,{className:t,inset:s}=o,a=j(o,["className","inset"]);return e.jsx(Ji,m({ref:n,className:P("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t)},a))});pt.displayName=Ji.displayName;const ih=i.forwardRef((o,r)=>{var l=o,{className:t,children:s,checked:a}=l,n=j(l,["className","children","checked"]);return e.jsxs(Zi,w(m({ref:r,className:P("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a},n),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(to,{children:e.jsx(oa,{className:"h-4 w-4"})})}),s]}))});ih.displayName=Zi.displayName;const oh=i.forwardRef((r,n)=>{var o=r,{className:t,children:s}=o,a=j(o,["className","children"]);return e.jsxs(eo,w(m({ref:n,className:P("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},a),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(to,{children:e.jsx(Kl,{className:"h-2 w-2 fill-current"})})}),s]}))});oh.displayName=eo.displayName;const lh=i.forwardRef((r,n)=>{var o=r,{className:t,inset:s}=o,a=j(o,["className","inset"]);return e.jsx(Xi,m({ref:n,className:P("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t)},a))});lh.displayName=Xi.displayName;const ra=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(so,m({ref:a,className:P("-mx-1 my-1 h-px bg-muted",t)},s))});ra.displayName=so.displayName;const ch=()=>{const{user:t,profile:s}=K(),a=Cs(),{toast:n}=Te(),r=()=>F(void 0,null,function*(){const{error:d}=yield L.auth.signOut();d?n({title:"Error",description:"Failed to sign out",variant:"destructive"}):a("/")}),o=()=>s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s.first_name.charAt(0)}${s.last_name.charAt(0)}`.toUpperCase():s!=null&&s.first_name?s.first_name.charAt(0).toUpperCase():t!=null&&t.email?t.email.charAt(0).toUpperCase():"U",l=()=>s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s.first_name} ${s.last_name}`:s!=null&&s.first_name?s.first_name:null;return t?e.jsxs(sh,{children:[e.jsx(ah,{asChild:!0,children:e.jsx(T,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(ha,{className:"h-10 w-10",children:[e.jsx(xa,{src:(s==null?void 0:s.avatar_url)||"",alt:l()||"User"}),e.jsx(pa,{className:"bg-gradient-to-r from-blue-600 to-green-600 text-white",children:o()})]})})}),e.jsxs(no,{className:"w-56 bg-white z-50",align:"end",forceMount:!0,children:[e.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:e.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[l()&&e.jsx("p",{className:"font-medium",children:l()}),(t==null?void 0:t.email)&&e.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:t.email})]})}),e.jsx(ra,{}),e.jsx(pt,{asChild:!0,children:e.jsxs($e,{to:"/profile",className:"flex items-center",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Profile"]})}),e.jsx(pt,{asChild:!0,children:e.jsxs($e,{to:"/settings",className:"flex items-center",children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(s==null?void 0:s.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(pt,{asChild:!0,children:e.jsxs($e,{to:"/subscriptions",className:"flex items-center",children:[e.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Subscriptions"]})}),e.jsx(pt,{asChild:!0,children:e.jsxs($e,{to:"/admin/support-tickets",className:"flex items-center",children:[e.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Support Tickets"]})})]}),e.jsx(ra,{}),e.jsxs(pt,{onClick:r,className:"flex items-center",children:[e.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]}):e.jsx(T,{asChild:!0,children:e.jsx($e,{to:"/auth",children:"Sign In"})})},_a=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("textarea",m({className:P("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a},s))});_a.displayName="Textarea";const At=vl,Mt=bl,gt=i.forwardRef((r,n)=>{var o=r,{className:t,children:s}=o,a=j(o,["className","children"]);return e.jsxs(zr,w(m({ref:n,className:P("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},a),{children:[s,e.jsx(hl,{asChild:!0,children:e.jsx(ia,{className:"h-4 w-4 opacity-50"})})]}))});gt.displayName=zr.displayName;const io=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Fr,w(m({ref:a,className:P("flex cursor-default items-center justify-center py-1",t)},s),{children:e.jsx(Gl,{className:"h-4 w-4"})}))});io.displayName=Fr.displayName;const oo=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Vr,w(m({ref:a,className:P("flex cursor-default items-center justify-center py-1",t)},s),{children:e.jsx(ia,{className:"h-4 w-4"})}))});oo.displayName=Vr.displayName;const vt=i.forwardRef((o,r)=>{var l=o,{className:t,children:s,position:a="popper"}=l,n=j(l,["className","children","position"]);return e.jsx(xl,{children:e.jsxs($r,w(m({ref:r,className:P("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a},n),{children:[e.jsx(io,{}),e.jsx(pl,{className:P("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(oo,{})]}))})});vt.displayName=$r.displayName;const dh=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(qr,m({ref:a,className:P("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},s))});dh.displayName=qr.displayName;const re=i.forwardRef((r,n)=>{var o=r,{className:t,children:s}=o,a=j(o,["className","children"]);return e.jsxs(Ur,w(m({ref:n,className:P("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},a),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(fl,{children:e.jsx(oa,{className:"h-4 w-4"})})}),e.jsx(gl,{children:s})]}))});re.displayName=Ur.displayName;const uh=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Br,m({ref:a,className:P("-mx-1 my-1 h-px bg-muted",t)},s))});uh.displayName=Br.displayName;var mh="Label",lo=i.forwardRef((t,s)=>e.jsx(he.label,w(m({},t),{ref:s,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||((r=t.onMouseDown)==null||r.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}})));lo.displayName=mh;var co=lo;const hh=lt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pe=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(co,m({ref:a,className:P(hh(),t)},s))});pe.displayName=co.displayName;const _t=Ar,bf=jl,xh=Mr,uo=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(vs,m({ref:a,className:P("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},s))});uo.displayName=vs.displayName;const rt=i.forwardRef((r,n)=>{var o=r,{className:t,children:s}=o,a=j(o,["className","children"]);return e.jsxs(xh,{children:[e.jsx(uo,{}),e.jsxs(bs,w(m({ref:n,className:P("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},a),{children:[s,e.jsxs(Dr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});rt.displayName=bs.displayName;const nt=a=>{var n=a,{className:t}=n,s=j(n,["className"]);return e.jsx("div",m({className:P("flex flex-col space-y-1.5 text-center sm:text-left",t)},s))};nt.displayName="DialogHeader";const mo=a=>{var n=a,{className:t}=n,s=j(n,["className"]);return e.jsx("div",m({className:P("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},s))};mo.displayName="DialogFooter";const it=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(js,m({ref:a,className:P("text-lg font-semibold leading-none tracking-tight",t)},s))});it.displayName=js.displayName;const Is=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(ys,m({ref:a,className:P("text-sm text-muted-foreground",t)},s))});Is.displayName=ys.displayName;const Ht=yl,Rt=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Hr,m({ref:a,className:P("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},s))});Rt.displayName=Hr.displayName;const Me=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Kr,m({ref:a,className:P("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},s))});Me.displayName=Kr.displayName;const Ie=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Wr,m({ref:a,className:P("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},s))});Ie.displayName=Wr.displayName;const ph=Nl,fh=_l,ho=i.forwardRef((o,r)=>{var l=o,{className:t,align:s="center",sideOffset:a=4}=l,n=j(l,["className","align","sideOffset"]);return e.jsx(wl,{children:e.jsx(Gr,m({ref:r,align:s,sideOffset:a,className:P("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},n))})});ho.displayName=Gr.displayName;const gh=()=>{const{user:t}=K();return ge({queryKey:["sent-notifications",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return[];const{data:s,error:a}=yield L.from("notification_messages").select("*").eq("sender_id",t.id).order("created_at",{ascending:!1}).limit(50);if(a)throw a;return s||[]}),enabled:!!(t!=null&&t.id)})},vh=()=>{const{user:t,profile:s}=K();return ge({queryKey:["received-notifications",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return console.log("User not authenticated, returning empty array for received notifications"),[];if(!(s!=null&&s.organization_id))return console.log("Profile or organization not available, returning empty array for received notifications"),[];try{const{data:a,error:n}=yield L.from("notification_messages").select("*").or(`recipient_id.eq.${t.id},and(recipient_role.eq.${s.role},organization_id.eq.${s.organization_id})`).order("created_at",{ascending:!1}).limit(50);if(n){if(console.error("Error fetching received notifications:",n),n.code==="42P01"||n.message.includes("does not exist"))return console.warn("Notification messages table may not exist, returning empty array"),[];throw n}return a||[]}catch(a){return console.error("Unexpected error in useReceivedNotifications:",a),[]}}),enabled:!!(t!=null&&t.id)&&!!(s!=null&&s.organization_id),retry:2,retryDelay:1e3,staleTime:1e4})},bh=()=>{const t=ye(),{toast:s}=Te(),{user:a,profile:n}=K();return Re({mutationFn:r=>F(void 0,null,function*(){if(!(a!=null&&a.id)||!(n!=null&&n.organization_id))throw new Error("User not authenticated or organization not found");const o={sender_id:a.id,sender_name:`${n.first_name} ${n.last_name}`,sender_role:n.role,recipient_id:r.recipientType==="specific"?r.recipientId:null,recipient_role:r.recipientType==="role"?r.recipientRole:null,title:r.title,body:r.body,type:r.type,priority:r.priority,category:r.category,channels:r.channels,scheduled_for:r.isScheduled&&r.scheduledFor?r.scheduledFor:null,organization_id:n.organization_id,metadata:{sent_via:"advanced_notification_system",recipient_type:r.recipientType}},{data:l,error:d}=yield L.from("notification_messages").insert([o]).select().single();if(d)throw d;return l}),onSuccess:r=>{t.invalidateQueries({queryKey:["sent-notifications"]}),t.invalidateQueries({queryKey:["received-notifications"]}),t.invalidateQueries({queryKey:["notification-stats"]}),s({title:"Notification Sent",description:"Your notification has been sent successfully."})},onError:r=>{s({title:"Error",description:"Failed to send notification: "+r.message,variant:"destructive"})}})},jh=()=>{const t=ye(),{toast:s}=Te();return Re({mutationFn:a=>F(void 0,null,function*(){const{error:n}=yield L.from("notification_messages").update({read_at:new Date().toISOString()}).eq("id",a);if(n)throw n}),onSuccess:()=>{t.invalidateQueries({queryKey:["received-notifications"]}),t.invalidateQueries({queryKey:["notification-stats"]})},onError:a=>{s({title:"Error",description:"Failed to mark notification as read: "+a.message,variant:"destructive"})}})},yh=()=>{const{user:t,profile:s}=K(),a=ye(),{toast:n}=Te();i.useEffect(()=>{if(!(t!=null&&t.id)||!(s!=null&&s.organization_id))return;const r=L.channel("notification-messages-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notification_messages",filter:`recipient_id=eq.${t.id}`},o=>{const l=o.new;l.priority==="emergency"?n({title:` ${l.title}`,description:l.body,variant:"destructive",duration:1e4}):l.priority==="high"?n({title:l.title,description:l.body,duration:5e3}):n({title:l.title,description:l.body,duration:3e3}),a.invalidateQueries({queryKey:["received-notifications"]}),a.invalidateQueries({queryKey:["notification-stats"]})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notification_messages",filter:`recipient_id=eq.${t.id}`},()=>{a.invalidateQueries({queryKey:["received-notifications"]}),a.invalidateQueries({queryKey:["notification-stats"]})}).subscribe();return()=>{L.removeChannel(r)}},[t==null?void 0:t.id,s==null?void 0:s.organization_id,a,n])},wh=()=>{const{user:t,profile:s}=K();return ge({queryKey:["unread-notification-count",t==null?void 0:t.id,s==null?void 0:s.organization_id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return console.log("User not authenticated, returning 0 for unread notifications"),0;if(!(s!=null&&s.organization_id))return console.log("Profile or organization not available, returning 0 for unread notifications"),0;try{console.log("Fetching unread notifications for user:",t.id);const{data:a,error:n}=yield L.from("notification_messages").select("id").eq("recipient_id",t.id).is("read_at",null).limit(1);if(n)return console.error("Error fetching unread notifications:",n),(n.code==="42P01"||n.message.includes("does not exist"))&&console.warn("Notification messages table may not exist, returning 0"),0;const{data:r,error:o}=yield L.from("notification_messages").select("id",{count:"exact",head:!0}).eq("recipient_id",t.id).is("read_at",null);return o?(console.error("Error getting unread notification count:",o),(a==null?void 0:a.length)||0):(r==null?void 0:r.length)||0}catch(a){return console.error("Unexpected error in useUnreadNotificationCount:",a),0}}),enabled:!!(t!=null&&t.id)&&!!(s!=null&&s.organization_id),refetchInterval:3e4,retry:2,retryDelay:1e3,staleTime:1e4})},Nh=()=>{const{user:t,profile:s}=K(),{toast:a}=Te();ye();const[n,r]=i.useState(!1),[o,l]=i.useState(!1),[d,u]=i.useState("received"),[h,p]=i.useState(""),[x,c]=i.useState("all"),[f,b]=i.useState("all"),[v,_]=i.useState({recipientType:"specific",recipientId:"",recipientRole:"",title:"",body:"",type:"info",priority:"normal",category:"general",channels:["in_app"],scheduledFor:"",isScheduled:!1}),{data:g=[],isLoading:y}=gh(),{data:N=[],isLoading:C}=vh(),D=bh(),z=jh(),{data:$=0}=wh();yh();const G=()=>{if(!(s!=null&&s.organization_id))return[];switch(s.role){case"admin":case"council":return[{id:"all_drivers",name:"All Drivers",role:"driver"},{id:"all_mechanics",name:"All Mechanics",role:"mechanic"},{id:"all_parents",name:"All Parents",role:"parent"},{id:"all_admins",name:"All Administrators",role:"admin"}];case"driver":return[{id:"all_admins",name:"All Administrators",role:"admin"},{id:"all_mechanics",name:"All Mechanics",role:"mechanic"},{id:"all_parents",name:"All Parents",role:"parent"}];case"parent":return[{id:"all_drivers",name:"All Drivers",role:"driver"},{id:"all_admins",name:"All Administrators",role:"admin"}];case"mechanic":return[{id:"all_admins",name:"All Administrators",role:"admin"},{id:"all_drivers",name:"All Drivers",role:"driver"}];default:return[]}},se=[{id:"safety_alert",name:"Safety Alert",title:"Safety Alert - Immediate Action Required",body:"Please review and acknowledge this safety alert. Your immediate attention is required.",type:"warning",priority:"high",category:"safety"},{id:"schedule_change",name:"Schedule Change",title:"Schedule Update",body:"There has been a change to your schedule. Please review the updated details.",type:"info",priority:"normal",category:"schedule"},{id:"maintenance_reminder",name:"Maintenance Reminder",title:"Vehicle Maintenance Due",body:"Your vehicle is due for maintenance. Please schedule an appointment.",type:"warning",priority:"normal",category:"maintenance"},{id:"emergency_notice",name:"Emergency Notice",title:"EMERGENCY - Immediate Response Required",body:"This is an emergency notification requiring immediate attention.",type:"error",priority:"emergency",category:"emergency"}],W=()=>{_({recipientType:"specific",recipientId:"",recipientRole:"",title:"",body:"",type:"info",priority:"normal",category:"general",channels:["in_app"],scheduledFor:"",isScheduled:!1})},J=E=>{_(ee=>w(m({},ee),{title:E.title,body:E.body,type:E.type,priority:E.priority,category:E.category}))},le=()=>F(void 0,null,function*(){if(!v.title.trim()||!v.body.trim()){a({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}const E={recipientType:v.recipientType,recipientId:v.recipientId,recipientRole:v.recipientRole,title:v.title,body:v.body,type:v.type,priority:v.priority,category:v.category,channels:v.channels,scheduledFor:v.scheduledFor,isScheduled:v.isScheduled};yield D.mutateAsync(E),l(!1),W()}),R=E=>{switch(E){case"success":return e.jsx(Oe,{className:"w-4 h-4 text-green-600"});case"warning":return e.jsx(fe,{className:"w-4 h-4 text-yellow-600"});case"error":return e.jsx(fe,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Ns,{className:"w-4 h-4 text-blue-600"})}},ae=E=>{switch(E){case"emergency":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},O=E=>{switch(E){case"emergency":return"bg-red-50 border-red-200";case"safety":return"bg-yellow-50 border-yellow-200";case"maintenance":return"bg-orange-50 border-orange-200";case"schedule":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},Z=g.filter(E=>{const ee=E.title.toLowerCase().includes(h.toLowerCase())||E.body.toLowerCase().includes(h.toLowerCase()),V=x==="all"||E.type===x,H=f==="all"||E.priority===f;return ee&&V&&H}),ce=N.filter(E=>{const ee=E.title.toLowerCase().includes(h.toLowerCase())||E.body.toLowerCase().includes(h.toLowerCase()),V=x==="all"||E.type===x,H=f==="all"||E.priority===f;return ee&&V&&H});return!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsxs(ph,{open:n,onOpenChange:r,children:[e.jsx(fh,{asChild:!0,children:e.jsxs(T,{variant:"ghost",size:"sm",className:"relative p-2 hover:bg-accent",children:[e.jsx(qe,{className:"h-5 w-5"}),$>0&&e.jsx(oe,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:$>99?"99+":$})]})}),e.jsx(ho,{className:"w-96 p-0",align:"end",children:e.jsxs("div",{className:"flex flex-col h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"Notifications"}),$>0&&e.jsxs(oe,{variant:"secondary",className:"text-xs",children:[$," new"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>l(!0),className:"h-8 w-8 p-0",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>r(!1),className:"h-8 w-8 p-0",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]}),e.jsxs(Ht,{value:d,onValueChange:u,className:"flex-1 flex flex-col",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2 rounded-none",children:[e.jsxs(Me,{value:"received",className:"rounded-none",children:["Received (",N.length,")"]}),e.jsxs(Me,{value:"sent",className:"rounded-none",children:["Sent (",g.length,")"]})]}),e.jsxs("div",{className:"p-3 border-b space-y-2",children:[e.jsx(Ue,{placeholder:"Search notifications...",value:h,onChange:E=>p(E.target.value),className:"h-8"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(At,{value:x,onValueChange:c,children:[e.jsx(gt,{className:"h-8 text-xs",children:e.jsx(Mt,{placeholder:"Type"})}),e.jsxs(vt,{children:[e.jsx(re,{value:"all",children:"All Types"}),e.jsx(re,{value:"info",children:"Info"}),e.jsx(re,{value:"warning",children:"Warning"}),e.jsx(re,{value:"success",children:"Success"}),e.jsx(re,{value:"error",children:"Error"})]})]}),e.jsxs(At,{value:f,onValueChange:b,children:[e.jsx(gt,{className:"h-8 text-xs",children:e.jsx(Mt,{placeholder:"Priority"})}),e.jsxs(vt,{children:[e.jsx(re,{value:"all",children:"All Priority"}),e.jsx(re,{value:"low",children:"Low"}),e.jsx(re,{value:"normal",children:"Normal"}),e.jsx(re,{value:"high",children:"High"}),e.jsx(re,{value:"emergency",children:"Emergency"})]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx(Ie,{value:"received",className:"m-0 p-0 h-full",children:e.jsx("div",{className:"space-y-1 p-2",children:ce.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):ce.slice(0,10).map(E=>e.jsx(q,{className:`${O(E.category)} ${E.read_at?"":"ring-2 ring-blue-200"} cursor-pointer hover:shadow-sm transition-shadow`,onClick:()=>{E.read_at||z.mutate(E.id)},children:e.jsx(U,{className:"p-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R(E.type),e.jsx("h4",{className:"font-medium text-sm truncate",children:E.title}),e.jsx(oe,{className:`${ae(E.priority)} text-xs`,children:E.priority}),!E.read_at&&e.jsx(oe,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs",children:"New"})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-1",children:E.body}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["From: ",E.sender_name]}),e.jsx("span",{children:Ke(new Date(E.created_at),"MMM dd, HH:mm")})]})]})})})},E.id))})}),e.jsx(Ie,{value:"sent",className:"m-0 p-0 h-full",children:e.jsx("div",{className:"space-y-1 p-2",children:Z.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ua,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No sent notifications"})]}):Z.slice(0,10).map(E=>e.jsx(q,{className:`${O(E.category)} cursor-pointer hover:shadow-sm transition-shadow`,children:e.jsx(U,{className:"p-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R(E.type),e.jsx("h4",{className:"font-medium text-sm truncate",children:E.title}),e.jsx(oe,{className:`${ae(E.priority)} text-xs`,children:E.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-1",children:E.body}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["To: ",E.recipient_role||"Specific User"]}),e.jsx("span",{children:Ke(new Date(E.created_at),"MMM dd, HH:mm")})]})]})})})},E.id))})})]}),e.jsx("div",{className:"p-3 border-t bg-muted/50",children:e.jsx(T,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{r(!1),window.location.href="/notifications"},children:"View All Notifications"})})]})]})})]}),e.jsx(_t,{open:o,onOpenChange:l,children:e.jsxs(rt,{className:"max-w-md",children:[e.jsxs(nt,{children:[e.jsx(it,{children:"Quick Message"}),e.jsx(Is,{children:"Send a quick notification to your team."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:se.slice(0,4).map(E=>e.jsxs(T,{variant:"outline",size:"sm",className:"h-auto p-2 text-left",onClick:()=>J(E),children:[e.jsx("div",{className:"text-xs font-medium",children:E.name}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:E.title})]},E.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Send to"}),e.jsxs(At,{value:v.recipientRole,onValueChange:E=>_(ee=>w(m({},ee),{recipientRole:E,recipientType:"role"})),children:[e.jsx(gt,{children:e.jsx(Mt,{placeholder:"Select recipients"})}),e.jsx(vt,{children:G().map(E=>e.jsx(re,{value:E.role,children:E.name},E.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Message"}),e.jsx(_a,{value:v.body,onChange:E=>_(ee=>w(m({},ee),{body:E.target.value})),placeholder:"Enter your message...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Priority"}),e.jsxs(At,{value:v.priority,onValueChange:E=>_(ee=>w(m({},ee),{priority:E})),children:[e.jsx(gt,{children:e.jsx(Mt,{})}),e.jsxs(vt,{children:[e.jsx(re,{value:"low",children:"Low"}),e.jsx(re,{value:"normal",children:"Normal"}),e.jsx(re,{value:"high",children:"High"}),e.jsx(re,{value:"emergency",children:"Emergency"})]})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(T,{variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancel"}),e.jsx(T,{onClick:le,disabled:D.isPending||!v.body.trim()||!v.recipientRole,className:"flex-1",children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{className:"w-4 h-4 mr-2"}),"Send"]})})]})]})]})})]})},sr=()=>{const{user:t}=K(),s=$t(),a=Et();if(!t)return null;const n=()=>{const r=s.pathname;return{"/dashboard":"Dashboard","/vehicles":"Fleet Management","/drivers":"Driver Management","/mechanics":"Mechanics","/jobs":"Job Management","/admin-schedule":"Resource Scheduling","/routes":"School Routes Management","/admin/route-management":"Route Planning & Pricing","/admin/compliance-dashboard":"Compliance Dashboard","/admin/tachograph-management":"Tachograph Management","/admin/api-management":"API Management","/rail-replacement":"Rail Replacement Services","/invoice-management":"Invoice Management","/quotation-management":"Quotation Management","/compliance":"Compliance","/vehicle-inspections":"Vehicle Inspections","/licenses":"License Management","/documents":"Document Management","/incident-reports":"Incident Reports","/analytics":"Analytics","/profile":"Profile","/settings":"Settings","/staff-directory":"Staff Directory","/time-management":"Time Management"}[r]||"TransManager"};return e.jsx("header",{className:"bg-background backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-4 lg:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[!a&&e.jsx(Wu,{className:"h-8 w-8 sm:h-10 sm:w-10 touch-manipulation flex-shrink-0 hover:bg-gray-100 rounded-md transition-colors duration-200"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/lovable-uploads/c7fc78b4-c136-43b3-b47e-00e97017921c.png",alt:"LSR Logistics Logo",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-brand block",children:"LSR"}),e.jsx("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"Logistics Solution Resources"})]})]})]}),!a&&e.jsx("div",{className:"hidden lg:flex items-center space-x-2 border-l border-border pl-6 mx-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:n()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Location"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsx(Nh,{}),e.jsx(ch,{})]})]})})})},_h=()=>{const t=Et(),s=$t(),a=Cs(),{profile:n}=K(),{theme:r,toggleTheme:o,isDark:l}=Xn();if(ma(),!t)return null;const d=()=>{const x=n==null?void 0:n.role;return x==="driver"?[{id:"dashboard",label:"Dashboard",icon:It,path:"/driver-dashboard"},{id:"vehicle-check",label:"Vehicle Check",icon:Oe,path:"/driver/vehicle-checks"},{id:"jobs",label:"Jobs",icon:Gs,path:"/driver-jobs"},{id:"incidents",label:"Incidents",icon:fe,path:"/driver-incidents"},{id:"more",label:"More",icon:Xl,path:"/driver/more"}]:x==="parent"?[{id:"dashboard",label:"Dashboard",icon:ws,path:"/parent/dashboard"},{id:"tracking",label:"Tracking",icon:jt,path:"/parent/tracking"},{id:"children",label:"Children",icon:we,path:"/parent/children"},{id:"schedule",label:"Schedule",icon:_e,path:"/parent/schedule"},{id:"notifications",label:"Alerts",icon:qe,path:"/parent/notifications"}]:x==="mechanic"?[{id:"dashboard",label:"Dashboard",icon:It,path:"/mechanic-dashboard"},{id:"work-orders",label:"Orders",icon:je,path:"/work-orders"},{id:"fleet",label:"Fleet",icon:is,path:"/vehicles"},{id:"documents",label:"Documents",icon:je,path:"/documents"},{id:"profile",label:"Profile",icon:We,path:"/profile"}]:[{id:"dashboard",label:"Dashboard",icon:It,path:"/dashboard"},{id:"vehicles",label:"Fleet",icon:is,path:"/vehicles"},{id:"drivers",label:"Drivers",icon:we,path:"/drivers"},{id:"jobs",label:"Jobs",icon:je,path:"/jobs"},{id:"settings",label:"Settings",icon:et,path:"/settings"}]},u=x=>{if((n==null?void 0:n.role)==="parent"&&["/dashboard","/admin","/vehicles","/drivers","/jobs","/settings","/mechanic-dashboard","/work-orders","/defect-reports","/parts-supplies","/fuel-management","/mechanics","/route-planning","/invoice-management","/analytics","/routes","/staff-directory","/compliance-reports"].some(b=>x.startsWith(b))){a("/parent/dashboard");return}a(x)},h=d(),p=x=>s.pathname===x||x==="/dashboard"&&s.pathname==="/"||s.pathname.startsWith(x);return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 professional-nav-container safe-area-bottom",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.jsx("div",{className:"flex justify-center items-center py-4 px-4",children:e.jsxs("div",{className:"nav-container-white",children:[h.map(x=>{const c=x.icon,f=p(x.path),b=x.id==="vehicle-check";return e.jsxs("button",{onClick:()=>u(x.path),"data-vehicle-check":b,title:`Go to ${x.label.toLowerCase()}`,className:P("professional-nav-button inline-flex items-center mr-4 last-of-type:mr-0 p-2.5 text-sm",f&&"active",b&&"vehicle-check-special"),children:[e.jsx(c,{className:P("w-5 h-5 transition-colors duration-200 nav-icon",b&&"vehicle-check",f&&"active")}),x.badge&&x.badge>0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold shadow-sm",children:x.badge>99?"99+":x.badge})]},x.id)}),e.jsx("button",{onClick:o,title:l?"Switch to light mode":"Switch to dark mode",className:P("professional-nav-button inline-flex items-center p-2.5 text-sm","theme-toggle-button"),children:l?e.jsx(Yl,{className:"w-5 h-5 transition-colors duration-200 nav-icon"}):e.jsx(Ql,{className:"w-5 h-5 transition-colors duration-200 nav-icon"})})]})})})},Sh=({children:t,className:s,enableSwipeGestures:a=!0,showMobileHeader:n=!0,resizeToAvoidKeyboard:r=!0,scrollable:o=!0,padding:l="medium"})=>{const d=Et(),u=Zn(),[h,p]=i.useState(0),[x,c]=i.useState("100dvh");if(i.useEffect(()=>{const _=()=>{if(window.visualViewport&&(c(`${window.visualViewport.height}px`),r)){const g=window.innerHeight-window.visualViewport.height;p(Math.max(0,g))}};return window.visualViewport&&(window.visualViewport.addEventListener("resize",_),_()),()=>{window.visualViewport&&window.visualViewport.removeEventListener("resize",_)}},[r]),!d)return e.jsx("div",{className:s,children:t});const f={small:"px-3 py-2",medium:"px-4 py-3",large:"px-6 py-4"},b="div",v=o?"flex-1 overflow-auto min-h-0":"flex-1 min-h-0";return e.jsxs("div",{className:P("mobile-optimized-layout","touch-manipulation","overflow-x-hidden","flex flex-col","bg-background",u==="landscape"&&"landscape-mode",a&&"swipe-enabled",s),style:{minHeight:x,height:x,WebkitOverflowScrolling:"touch",touchAction:a?"pan-x pan-y":"manipulation",paddingBottom:r?h:0},children:[e.jsx("div",{className:"mobile-safe-area-top bg-background border-b border-border",children:e.jsx("div",{className:P("flex items-center justify-between",f[l]),children:n&&e.jsx("div",{className:"flex items-center space-x-3"})})}),e.jsx(b,{className:v,children:e.jsx("div",{className:P("mobile-content-wrapper","w-full","max-w-full","mx-auto",f[l],o&&"pb-safe"),style:{minHeight:"0",paddingBottom:r?`${h+16}px`:void 0},children:e.jsx("div",{className:"w-full h-full flex flex-col",children:t})})}),e.jsx("div",{className:"mobile-safe-area-bottom h-0 pb-safe"})]})},xo=()=>{const{user:t}=K(),{toast:s}=Te(),a=ye(),{data:n=[],isLoading:r,error:o,refetch:l}=ge({queryKey:["parent-children",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return[];const{data:N,error:C}=yield L.from("child_profiles").select("*").eq("parent_id",t.id).eq("is_active",!0).order("first_name");if(C)throw C;return N||[]}),enabled:!!(t!=null&&t.id)}),{data:d=[],isLoading:u,error:h,refetch:p}=ge({queryKey:["parent-notifications",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return[];const{data:N,error:C}=yield L.from("parent_notifications").select("*").eq("parent_id",t.id).order("created_at",{ascending:!1}).limit(50);if(C)throw C;return N||[]}),enabled:!!(t!=null&&t.id)}),{data:x=[],isLoading:c,error:f,refetch:b}=ge({queryKey:["parent-tracking",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))return[];const N=new Date().toISOString().split("T")[0],{data:C,error:D}=yield L.from("child_tracking").select(`
          *,
          child_profiles!inner(parent_id)
        `).eq("child_profiles.parent_id",t.id).gte("timestamp",`${N}T00:00:00`).lte("timestamp",`${N}T23:59:59`).order("timestamp",{ascending:!1});if(D)throw D;return C||[]}),enabled:!!(t!=null&&t.id)}),v={totalChildren:n.length,childrenOnRoute:x.filter(N=>N.event_type==="pickup"||N.event_type==="boarding").length,unreadNotifications:d.filter(N=>!N.is_read).length,todaysPickups:n.filter(N=>N.pickup_time).length},_=Re({mutationFn:N=>F(void 0,null,function*(){const{error:C}=yield L.from("parent_notifications").update({is_read:!0}).eq("id",N);if(C)throw C}),onSuccess:()=>{a.invalidateQueries({queryKey:["parent-notifications"]}),s({title:"Notification marked as read",description:"The notification has been updated."})},onError:N=>{s({title:"Error",description:"Failed to mark notification as read.",variant:"destructive"})}});return{children:n,notifications:d,trackingData:x,stats:v,childrenLoading:r,notificationsLoading:u,trackingLoading:c,isLoading:r||u||c,childrenError:o,notificationsError:h,trackingError:f,markNotificationRead:_,refreshAllData:()=>F(void 0,null,function*(){yield Promise.all([l(),p(),b()]),s({title:"Data refreshed",description:"All information has been updated."})}),getChildStatus:N=>{const C=x.filter(z=>z.child_id===N);if(C.length===0)return"pickup_scheduled";switch(C[0].event_type){case"pickup":case"boarding":return"on_route";case"dropoff":case"alighting":return"at_school";default:return"at_home"}},refetchChildren:l,refetchNotifications:p,refetchTracking:b}},ve=({children:t,className:s,resizeToAvoidKeyboard:a=!0,scrollable:n=!0,padding:r="medium",showHeader:o=!1,headerContent:l,showFooter:d=!1,footerContent:u})=>{const h=Et(),p=Zn(),[x,c]=i.useState({width:0,height:0}),[f,b]=i.useState(!1),[v,_]=i.useState(0);i.useEffect(()=>{const D=()=>{const $=window.innerHeight,G=window.innerWidth,se=$<v*.8;b(se),c({width:G,height:$}),$>v&&_($)},z=()=>{_(window.innerHeight),setTimeout(D,100)};return _(window.innerHeight),window.addEventListener("resize",D),window.addEventListener("orientationchange",z),D(),()=>{window.removeEventListener("resize",D),window.removeEventListener("orientationchange",z)}},[v]);const g={small:"px-3 py-2",medium:"px-4 py-3",large:"px-6 py-4"},y=x.width<360||x.height<650;x.width<400,x.width>=768;const N=y?"px-3":"px-4",C=y?"space-y-3":"space-y-4";return h?e.jsxs("div",{className:P("responsive-scaffold","flex flex-col","bg-background","overflow-hidden",p==="landscape"&&"landscape-mode",f&&"keyboard-visible",s),style:{minHeight:"100vh",height:f?"auto":"100vh",WebkitOverflowScrolling:"touch",touchAction:"pan-x pan-y",position:"relative",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"safe-area-top bg-background border-b border-border flex-shrink-0",children:o&&e.jsx("div",{className:P("flex items-center justify-between",g[r]),children:l})}),e.jsx("div",{className:"flex-1 min-h-0 relative flex flex-col",children:n?e.jsx("div",{className:P("flex-1 overflow-auto","scrollbar-hide"),style:{minHeight:f?"auto":"0",maxHeight:f?"none":"100%"},children:e.jsx("div",{className:P("w-full","max-w-full","mx-auto",N,C,"pb-safe"),style:{paddingBottom:f?"20px":void 0},children:e.jsx("div",{className:"w-full min-h-full flex flex-col",children:t})})}):e.jsx("div",{className:P("w-full flex-1","max-w-full","mx-auto",N,C),children:e.jsx("div",{className:"w-full h-full flex flex-col",children:t})})}),d&&e.jsx("div",{className:"safe-area-bottom bg-background border-t border-border flex-shrink-0",children:e.jsx("div",{className:P("flex items-center justify-between",g[r]),children:u})}),e.jsx("div",{className:"safe-area-bottom h-0 pb-safe flex-shrink-0"})]}):e.jsx("div",{className:P("min-h-screen bg-background",s),children:t})},Ch=()=>{const{user:t,profile:s}=K();Te();const[a,n]=i.useState("overview"),{children:r,notifications:o,stats:l,isLoading:d,childrenError:u,notificationsError:h,markNotificationRead:p,refreshAllData:x,getChildStatus:c}=xo(),f=r,b=y=>{switch(y){case"on_route":return"text-blue-600 bg-blue-50 border-blue-200";case"at_school":return"text-green-600 bg-green-50 border-green-200";case"at_home":return"text-gray-600 bg-gray-50 border-gray-200";case"pickup_scheduled":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},v=y=>{switch(y){case"on_route":return"On Route";case"at_school":return"At School";case"at_home":return"At Home";case"pickup_scheduled":return"Pickup Scheduled";default:return"Unknown"}},_=y=>{switch(y){case"on_route":return e.jsx(Je,{className:"w-4 h-4"});case"at_school":return e.jsx(Oe,{className:"w-4 h-4"});case"at_home":return e.jsx(we,{className:"w-4 h-4"});case"pickup_scheduled":return e.jsx(Ee,{className:"w-4 h-4"});default:return e.jsx(tt,{className:"w-4 h-4"})}},g=y=>{p.mutate(y)};return d?e.jsx(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})})}):u||h?e.jsx(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data. Please try again."}),e.jsx(T,{onClick:x,className:"mt-4",children:"Retry"})]})})}):e.jsxs(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50 relative overflow-hidden",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute -bottom-20 left-1/3 w-80 h-80 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"6s"}}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mobile-text-xl",children:"Parent Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-1 mobile-text-responsive",children:["Welcome back, ",(s==null?void 0:s.first_name)||"Parent","! Here's what's happening with your children today."]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:x,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(T,{variant:"outline",size:"sm",children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{children:"Welcome Back!"})]})}),e.jsx(U,{children:e.jsxs("p",{className:"text-muted-foreground",children:["You have ",f.length," children registered for transport services.",f.length>0&&` ${f.filter(y=>c(y.id)==="on_route").length} are currently on route.`]})})]}),e.jsxs(Ht,{value:a,onValueChange:n,className:"space-y-6",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-3 mobile-tabs",children:[e.jsx(Me,{value:"overview",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Overview"}),e.jsx(Me,{value:"tracking",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Tracking"}),e.jsxs(Me,{value:"notifications",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:["Alerts (",l.unreadNotifications,")"]})]}),e.jsxs(Ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"My Children"}),e.jsx(we,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalChildren}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active registrations"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"On Route"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.childrenOnRoute}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently traveling"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Notifications"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.unreadNotifications}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unread messages"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Today's Pickups"}),e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.todaysPickups}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled today"})]})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{children:"Children Status"}),e.jsxs(T,{variant:"outline",size:"sm",className:"mobile-button",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Manage Children"]})]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:f.map(y=>{const N=c(y.id),C=y.date_of_birth?new Date().getFullYear()-new Date(y.date_of_birth).getFullYear():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mobile-text-responsive",children:[y.first_name," ",y.last_name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.grade_level||"N/A","  Age ",C]}),y.pickup_location&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pickup: ",y.pickup_location]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{variant:"outline",className:b(N),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[_(N),e.jsx("span",{className:"text-xs",children:v(N)})]})}),e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(yt,{className:"w-4 h-4"})})]})]},y.id)})})})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs(T,{variant:"outline",className:"w-full justify-start mobile-button",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"View Attendance"]}),e.jsxs(T,{variant:"outline",className:"w-full justify-start mobile-button",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Schedule Changes"]}),e.jsxs(T,{variant:"outline",className:"w-full justify-start mobile-button",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Contact Driver"]})]})]})]}),e.jsx(Ie,{value:"tracking",className:"space-y-6",children:e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{children:"Live Tracking"})]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:f.map(y=>{const N=c(y.id);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mobile-text-responsive",children:[y.first_name," ",y.last_name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:y.school_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(oe,{variant:"outline",className:b(N),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[_(N),e.jsx("span",{className:"text-xs",children:v(N)})]})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ETA: ",N==="on_route"?"15 min":"N/A"]})]})]},y.id)})})})]})}),e.jsx(Ie,{value:"notifications",className:"space-y-6",children:e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{children:"Recent Notifications"})]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:o.slice(0,5).map(y=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(qe,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium mobile-text-responsive",children:y.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:y.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(y.created_at).toLocaleDateString()})]}),!y.read&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>g(y.id),className:"h-6 w-6 p-0",children:e.jsx(Oe,{className:"w-3 h-3"})})]},y.id))})})]})})]})]})]})};function Eh(t,s=[]){let a=[];function n(o,l){const d=i.createContext(l),u=a.length;a=[...a,l];function h(x){const g=x,{scope:c,children:f}=g,b=j(g,["scope","children"]),v=(c==null?void 0:c[t][u])||d,_=i.useMemo(()=>b,Object.values(b));return e.jsx(v.Provider,{value:_,children:f})}function p(x,c){const f=(c==null?void 0:c[t][u])||d,b=i.useContext(f);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${x}\` must be used within \`${o}\``)}return h.displayName=o+"Provider",[h,p]}const r=()=>{const o=a.map(l=>i.createContext(l));return function(d){const u=(d==null?void 0:d[t])||o;return i.useMemo(()=>({[`__scope${t}`]:w(m({},d),{[t]:u})}),[d,u])}};return r.scopeName=t,[n,Rh(r,...s)]}function Rh(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const n=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=n.reduce((d,{useScope:u,scopeName:h})=>{const x=u(o)[`__scope${h}`];return m(m({},d),x)},{});return i.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return a.scopeName=s.scopeName,a}var Sa="Progress",Ca=100,[Th,jf]=Eh(Sa),[Ph,kh]=Th(Sa),po=i.forwardRef((t,s)=>{const p=t,{__scopeProgress:a,value:n=null,max:r,getValueLabel:o=Dh}=p,l=j(p,["__scopeProgress","value","max","getValueLabel"]);(r||r===0)&&!ar(r)&&console.error(Ah(`${r}`,"Progress"));const d=ar(r)?r:Ca;n!==null&&!rr(n,d)&&console.error(Mh(`${n}`,"Progress"));const u=rr(n,d)?n:null,h=us(u)?o(u,d):void 0;return e.jsx(Ph,{scope:a,value:u,max:d,children:e.jsx(he.div,w(m({"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":us(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":vo(u,d),"data-value":u!=null?u:void 0,"data-max":d},l),{ref:s}))})});po.displayName=Sa;var fo="ProgressIndicator",go=i.forwardRef((t,s)=>{var l;const o=t,{__scopeProgress:a}=o,n=j(o,["__scopeProgress"]),r=kh(fo,a);return e.jsx(he.div,w(m({"data-state":vo(r.value,r.max),"data-value":(l=r.value)!=null?l:void 0,"data-max":r.max},n),{ref:s}))});go.displayName=fo;function Dh(t,s){return`${Math.round(t/s*100)}%`}function vo(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function us(t){return typeof t=="number"}function ar(t){return us(t)&&!isNaN(t)&&t>0}function rr(t,s){return us(t)&&!isNaN(t)&&t<=s&&t>=0}function Ah(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ca}\`.`}function Mh(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ca} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bo=po,Ih=go;const rs=i.forwardRef((r,n)=>{var o=r,{className:t,value:s}=o,a=j(o,["className","value"]);return e.jsx(bo,w(m({ref:n,className:P("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t)},a),{children:e.jsx(Ih,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}))});rs.displayName=bo.displayName;const Oh=()=>{const{user:t,profile:s,loading:a}=K(),{selectedOrganizationId:n}=Yn(),[r,o]=i.useState("overview"),{data:l,isLoading:d}=ge({queryKey:["mechanic-dashboard-stats",n],queryFn:()=>F(void 0,null,function*(){if(!n)return null;try{const{data:u,error:h}=yield L.from("vehicles").select("*").eq("organization_id",n),{data:p,error:x}=yield L.from("profiles").select("*").eq("organization_id",n).eq("role","driver"),c=(u==null?void 0:u.length)||0,f=(p==null?void 0:p.length)||0;return{activeWorkOrders:5,completedToday:3,totalDefects:12,pendingRepairs:8,partsNeeded:15,urgentIssues:2,totalVehicles:c,activeDrivers:f}}catch(u){return console.error("Error in dashboard stats query:",u),{activeWorkOrders:5,completedToday:3,totalDefects:12,pendingRepairs:8,partsNeeded:15,urgentIssues:2,totalVehicles:0,activeDrivers:0}}}),enabled:!!n});return a||d?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Loading mechanic dashboard..."})]})})}):e.jsxs(ve,{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mobile-text-xl",children:"Mechanic Dashboard"}),e.jsxs("p",{className:"text-gray-600 mobile-text-responsive",children:["Welcome back, ",(s==null?void 0:s.first_name)||"Mechanic","!"]})]}),e.jsx(T,{variant:"outline",size:"sm",className:"mobile-button",children:e.jsx(et,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Orders"}),e.jsx("p",{className:"text-lg font-semibold",children:(l==null?void 0:l.activeWorkOrders)||0})]})]})})}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Today"}),e.jsx("p",{className:"text-lg font-semibold",children:(l==null?void 0:l.completedToday)||0})]})]})})}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Urgent Issues"}),e.jsx("p",{className:"text-lg font-semibold",children:(l==null?void 0:l.urgentIssues)||0})]})]})})}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Parts Needed"}),e.jsx("p",{className:"text-lg font-semibold",children:(l==null?void 0:l.partsNeeded)||0})]})]})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",onClick:()=>o("work-orders"),children:[e.jsx(je,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Work Orders"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",onClick:()=>o("fleet"),children:[e.jsx(Je,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Fleet"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",onClick:()=>o("inventory"),children:[e.jsx(os,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Inventory"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",onClick:()=>o("defects"),children:[e.jsx(fe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Defects"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Fleet Overview"}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Total Vehicles"})]}),e.jsx(oe,{variant:"secondary",children:(l==null?void 0:l.totalVehicles)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Active Drivers"})]}),e.jsx(oe,{variant:"secondary",children:(l==null?void 0:l.activeDrivers)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Pending Repairs"})]}),e.jsx(oe,{variant:"destructive",children:(l==null?void 0:l.pendingRepairs)||0})]})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Recent Work Orders"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(u=>e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium mobile-text-responsive",children:["Work Order #",u]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Vehicle Maintenance"})]})]}),e.jsx(oe,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"In Progress"})]})})},u))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Performance"}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Completion Rate"}),e.jsx("span",{className:"text-sm text-gray-600",children:"85%"})]}),e.jsx(rs,{value:85,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Time"}),e.jsx("span",{className:"text-sm text-gray-600",children:"2.3 hrs"})]}),e.jsx(rs,{value:70,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Quality Score"}),e.jsx("span",{className:"text-sm text-gray-600",children:"92%"})]}),e.jsx(rs,{value:92,className:"h-2"})]})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Quick Tools"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(T,{variant:"outline",className:"h-12 flex items-center justify-center space-x-2 mobile-button",children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Search Parts"})]}),e.jsxs(T,{variant:"outline",className:"h-12 flex items-center justify-center space-x-2 mobile-button",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"New Order"})]}),e.jsxs(T,{variant:"outline",className:"h-12 flex items-center justify-center space-x-2 mobile-button",children:[e.jsx(Jl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Diagnostics"})]}),e.jsxs(T,{variant:"outline",className:"h-12 flex items-center justify-center space-x-2 mobile-button",children:[e.jsx(tn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Quick Fix"})]})]})]})]})},Lh=()=>{K();const[t,s]=i.useState(null),[a,n]=i.useState(!1),{children:r,isLoading:o,childrenError:l,refreshAllData:d}=xo(),u=r,h=()=>F(void 0,null,function*(){n(!0),yield d(),n(!1)}),p=f=>{switch(f){case"on_route":return"bg-blue-100 text-blue-800 border-blue-200";case"at_school":return"bg-green-100 text-green-800 border-green-200";case"at_home":return"bg-muted text-muted-foreground border-border";case"pickup_scheduled":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-muted text-muted-foreground border-border"}},x=f=>{switch(f){case"on_route":return e.jsx(en,{className:"w-4 h-4"});case"at_school":return e.jsx(Oe,{className:"w-4 h-4"});case"at_home":return e.jsx(ws,{className:"w-4 h-4"});case"pickup_scheduled":return e.jsx(Ee,{className:"w-4 h-4"});default:return e.jsx(tt,{className:"w-4 h-4"})}},c=f=>{switch(f){case"on_route":return"~15 min";case"pickup_scheduled":return"~5 min";default:return"N/A"}};return o?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Loading tracking data..."})]})})}):l?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Failed to load tracking data."}),e.jsx(T,{onClick:h,className:"mt-4 mobile-button",children:"Retry"})]})})}):e.jsxs(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50 relative overflow-hidden",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute -bottom-20 left-1/3 w-80 h-80 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"6s"}}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})})]}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mobile-text-xl",children:"Live Tracking"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Track your children in real-time"})]}),e.jsx(T,{variant:"outline",size:"sm",onClick:h,disabled:a,className:"mobile-button",children:e.jsx(at,{className:`w-4 h-4 ${a?"animate-spin":""}`})})]}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Map View"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Real-time location tracking"})]})})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Children Status"}),e.jsx("div",{className:"space-y-3",children:u.map(f=>e.jsx(q,{className:`mobile-card cursor-pointer transition-all duration-200 ${t===f.id?"ring-2 ring-blue-500":""}`,onClick:()=>s(f.id),children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mobile-text-responsive",children:f.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f.school}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Vehicle #123"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(oe,{className:p(f.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[x(f.status),e.jsx("span",{className:"text-xs",children:f.status.replace("_"," ")})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ETA: ",c(f.status)]})]})]}),t===f.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Location"}),e.jsx("p",{className:"text-sm font-medium",children:"Main Street & 5th Ave"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Speed"}),e.jsx("p",{className:"text-sm font-medium",children:"25 mph"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"flex-1 mobile-button",onClick:()=>window.open("tel:+1234567890"),children:[e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Call Driver"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"flex-1 mobile-button",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Message"]})]})]})]})},f.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Route Information"}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Pickup Time"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"7:30 AM"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Drop-off Time"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"8:15 AM"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium mobile-text-responsive",children:"Route Distance"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"3.2 miles"})]})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Emergency Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button border-red-200 text-red-700",onClick:()=>window.open("tel:+1234567890"),children:[e.jsx(yt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Emergency Call"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",children:[e.jsx(tt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Report Issue"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Driver Information"}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mobile-text-responsive",children:"John Smith"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Licensed Driver"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ID: DRV-2024-001"})]}),e.jsx("div",{className:"text-right",children:e.jsx(oe,{className:"bg-green-100 text-green-800 border-green-200",children:"Available"})})]})})})]})]})},zh=()=>{K(),Yn();const[t,s]=i.useState("all"),[a,n]=i.useState(null),r=[{id:"WO-001",title:"Brake System Inspection",description:"Routine brake system check and maintenance",status:"in_progress",priority:"high",vehicle:"Bus #123",assignedTo:"John Smith",createdAt:"2024-01-15",estimatedTime:"2 hours",parts:["Brake pads","Brake fluid"]},{id:"WO-002",title:"Engine Oil Change",description:"Scheduled oil change and filter replacement",status:"pending",priority:"medium",vehicle:"Bus #124",assignedTo:"Mike Johnson",createdAt:"2024-01-15",estimatedTime:"1 hour",parts:["Oil filter","Engine oil"]},{id:"WO-003",title:"Tire Replacement",description:"Replace worn tires on front axle",status:"urgent",priority:"urgent",vehicle:"Bus #125",assignedTo:"Sarah Wilson",createdAt:"2024-01-15",estimatedTime:"3 hours",parts:["Tires","Wheel nuts"]}],o=h=>{switch(h){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"urgent":return"bg-red-100 text-red-800 border-red-200";default:return"bg-muted text-muted-foreground border-border"}},l=h=>{switch(h){case"low":return"bg-muted text-muted-foreground";case"medium":return"bg-blue-100 text-blue-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-muted text-muted-foreground"}},d=h=>{switch(h){case"pending":return e.jsx(Ee,{className:"w-4 h-4"});case"in_progress":return e.jsx(st,{className:"w-4 h-4"});case"completed":return e.jsx(Oe,{className:"w-4 h-4"});case"urgent":return e.jsx(fe,{className:"w-4 h-4"});default:return e.jsx(je,{className:"w-4 h-4"})}},u=r.filter(h=>t==="all"?!0:h.status===t);return e.jsxs(ve,{className:"bg-gradient-to-br from-gray-50 via-white to-blue-50",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mobile-text-xl",children:"Work Orders"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Manage vehicle maintenance tasks"})]}),e.jsx(T,{variant:"outline",size:"sm",className:"mobile-button",children:e.jsx(Ge,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(q,{className:"mobile-card",children:e.jsxs(U,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:r.filter(h=>h.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Pending"})]})}),e.jsx(q,{className:"mobile-card",children:e.jsxs(U,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-orange-600",children:r.filter(h=>h.status==="in_progress").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"In Progress"})]})}),e.jsx(q,{className:"mobile-card",children:e.jsxs(U,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-red-600",children:r.filter(h=>h.status==="urgent").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Urgent"})]})})]}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:["all","pending","in_progress","urgent","completed"].map(h=>e.jsx(T,{variant:t===h?"default":"outline",size:"sm",onClick:()=>s(h),className:"mobile-button whitespace-nowrap",children:h.charAt(0).toUpperCase()+h.slice(1).replace("_"," ")},h))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Work Orders"}),e.jsx("div",{className:"space-y-3",children:u.map(h=>e.jsx(q,{className:`mobile-card cursor-pointer transition-all duration-200 ${a===h.id?"ring-2 ring-blue-500":""}`,onClick:()=>n(h.id),children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"font-medium mobile-text-responsive",children:h.title}),e.jsx(oe,{className:l(h.priority),children:h.priority})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Je,{className:"w-3 h-3"}),e.jsx("span",{children:h.vehicle})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{children:h.estimatedTime})]})]})]})]}),e.jsx(oe,{className:o(h.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[d(h.status),e.jsx("span",{className:"text-xs",children:h.status.replace("_"," ")})]})})]}),a===h.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Assigned To"}),e.jsx("p",{className:"text-sm font-medium",children:h.assignedTo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),e.jsx("p",{className:"text-sm font-medium",children:h.createdAt})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Required Parts"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:h.parts.map((p,x)=>e.jsx(oe,{variant:"outline",className:"text-xs",children:p},x))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"flex-1 mobile-button",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Update"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"flex-1 mobile-button",onClick:()=>window.open("tel:+1234567890"),children:[e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Call"]})]})]})]})},h.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",children:[e.jsx(Ge,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"New Order"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",children:[e.jsx(Ss,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Search Parts"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",children:[e.jsx(os,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Inventory"})]}),e.jsxs(T,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-1 mobile-button",children:[e.jsx(tn,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Quick Fix"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Recent Activity"}),e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Work Order WO-001 completed"}),e.jsx("p",{className:"text-xs text-gray-500",children:"2 hours ago"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"New work order assigned"}),e.jsx("p",{className:"text-xs text-gray-500",children:"4 hours ago"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(fe,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Urgent repair needed"}),e.jsx("p",{className:"text-xs text-gray-500",children:"6 hours ago"})]})]})]})})})]})]})},Fh=()=>{const{user:t,profile:s}=K();return ge({queryKey:["documents",s==null?void 0:s.organization_id],queryFn:()=>F(void 0,null,function*(){if(!(s!=null&&s.organization_id))throw new Error("Organization ID is required");console.log("Fetching documents from database...");const{data:a,error:n}=yield L.from("documents").select("*").eq("organization_id",s.organization_id).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching documents:",n),n;return console.log("Fetched documents:",a),a||[]}),enabled:!!(s!=null&&s.organization_id)})},yf=()=>{const{profile:t}=K(),s=ye();return Re({mutationFn:a=>F(void 0,null,function*(){if(!(t!=null&&t.organization_id)||!(t!=null&&t.id))throw new Error("Organization and user information required");const{data:n,error:r}=yield L.from("documents").insert(w(m({},a),{organization_id:t.organization_id,uploaded_by:t.id})).select().single();if(r)throw r;return n}),onSuccess:()=>{s.invalidateQueries({queryKey:["documents"]}),Ne.success("Document created successfully")},onError:a=>{console.error("Error creating document:",a),Ne.error("Failed to create document: "+a.message)}})},wf=()=>{const t=ye();return Re({mutationFn:n=>F(void 0,[n],function*({id:s,updates:a}){const{data:r,error:o}=yield L.from("documents").update(a).eq("id",s).select().single();if(o)throw o;return r}),onSuccess:()=>{t.invalidateQueries({queryKey:["documents"]}),Ne.success("Document updated successfully")},onError:s=>{console.error("Error updating document:",s),Ne.error("Failed to update document: "+s.message)}})},Nf=()=>{const t=ye();return Re({mutationFn:s=>F(void 0,null,function*(){const{error:a}=yield L.from("documents").delete().eq("id",s);if(a)throw a}),onSuccess:()=>{t.invalidateQueries({queryKey:["documents"]}),Ne.success("Document deleted successfully")},onError:s=>{console.error("Error deleting document:",s),Ne.error("Failed to delete document: "+s.message)}})},Vh=()=>{K();const{toast:t}=Te(),[s,a]=i.useState(""),[n,r]=i.useState("all"),[o,l]=i.useState("all"),[d,u]=i.useState("list"),[h,p]=i.useState("date"),[x,c]=i.useState("desc"),[f,b]=i.useState(!1),{data:v=[],isLoading:_,error:g,refetch:y}=Fh(),N=R=>{if(R===0)return"0 Bytes";const ae=1024,O=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(R)/Math.log(ae));return parseFloat((R/Math.pow(ae,Z)).toFixed(2))+" "+O[Z]},z=[...v.map(R=>{var ae;return{id:R.id,name:R.name,type:((ae=R.file_type)==null?void 0:ae.toUpperCase())||"UNKNOWN",category:R.category||"other",size:N(R.file_size),uploadedBy:R.uploaded_by||"Unknown",uploadedAt:R.created_at,status:R.status||"pending",expiryDate:R.expiry_date,tags:R.tags||[],isConfidential:!R.is_public,downloadCount:R.download_count||0,description:R.description,version:R.version,department:R.department,priority:R.priority||"medium",isFavorite:R.is_favorite,fileUrl:R.file_path,thumbnailUrl:R.thumbnail_url}}).filter(R=>{var ce;const ae=R.name.toLowerCase().includes(s.toLowerCase())||((ce=R.description)==null?void 0:ce.toLowerCase().includes(s.toLowerCase()))||R.category.toLowerCase().includes(s.toLowerCase()),O=n==="all"||R.category===n,Z=o==="all"||R.status===o;return ae&&O&&Z})].sort((R,ae)=>{let O=0;switch(h){case"name":O=R.name.localeCompare(ae.name);break;case"date":O=new Date(R.uploadedAt).getTime()-new Date(ae.uploadedAt).getTime();break;case"status":O=R.status.localeCompare(ae.status);break}return x==="asc"?O:-O}),$=R=>{switch(R){case"approved":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"expired":return"bg-muted text-muted-foreground border-border";case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"archived":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-muted text-muted-foreground border-border"}},G=R=>{switch(R){case"approved":return e.jsx(Oe,{className:"w-4 h-4"});case"pending":return e.jsx(Ee,{className:"w-4 h-4"});case"rejected":return e.jsx(fe,{className:"w-4 h-4"});case"expired":return e.jsx(_e,{className:"w-4 h-4"});case"active":return e.jsx(Oe,{className:"w-4 h-4"});case"archived":return e.jsx(ec,{className:"w-4 h-4"});default:return e.jsx(Ns,{className:"w-4 h-4"})}},se=R=>R.includes("PDF")?e.jsx(je,{className:"w-5 h-5 text-red-500"}):R.includes("IMAGE")||R.includes("JPG")||R.includes("PNG")?e.jsx(tc,{className:"w-5 h-5 text-blue-500"}):R.includes("DOC")||R.includes("DOCX")?e.jsx(je,{className:"w-5 h-5 text-blue-600"}):R.includes("XLS")||R.includes("XLSX")?e.jsx(je,{className:"w-5 h-5 text-green-600"}):e.jsx(sc,{className:"w-5 h-5 text-gray-500"}),W=R=>{R.fileUrl?(window.open(R.fileUrl,"_blank"),t({title:"Download Started",description:`${R.name} is being downloaded.`})):t({title:"Download Error",description:"File URL not available.",variant:"destructive"})},J=R=>{R.fileUrl?window.open(R.fileUrl,"_blank"):t({title:"View Error",description:"File URL not available.",variant:"destructive"})},le=[{id:"compliance",name:"Compliance Documents"},{id:"vehicle",name:"Vehicle Documents"},{id:"driver",name:"Driver Documents"},{id:"route",name:"Route Documents"},{id:"maintenance",name:"Maintenance Records"},{id:"insurance",name:"Insurance Documents"},{id:"other",name:"Other Documents"}];return _?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Loading documents..."})]})})}):g?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fe,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Failed to load documents."}),e.jsxs(T,{onClick:()=>y(),className:"mt-4 mobile-button",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):e.jsxs(ve,{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mobile-text-xl",children:"Documents"}),e.jsxs("p",{className:"text-gray-600 mobile-text-responsive",children:[z.length," documents available"]})]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>y(),className:"mobile-button",children:e.jsx(at,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ue,{placeholder:"Search documents...",value:s,onChange:R=>a(R.target.value),className:"mobile-input pl-10"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>b(!f),className:"mobile-button",children:[e.jsx(sn,{className:"w-4 h-4 mr-2"}),"Filters"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>u(d==="list"?"grid":"list"),className:"mobile-button",children:d==="list"?e.jsx(an,{className:"w-4 h-4"}):e.jsx(rn,{className:"w-4 h-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>c(x==="asc"?"desc":"asc"),className:"mobile-button",children:x==="asc"?e.jsx(nn,{className:"w-4 h-4"}):e.jsx(on,{className:"w-4 h-4"})})]}),f&&e.jsxs("div",{className:"space-y-3 p-4 bg-card rounded-lg border border-border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Category"}),e.jsxs("select",{value:n,onChange:R=>r(R.target.value),className:"w-full p-2 border rounded-md mobile-input",children:[e.jsx("option",{value:"all",children:"All Categories"}),le.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:o,onChange:R=>l(R.target.value),className:"w-full p-2 border rounded-md mobile-input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"Documents"}),z.length===0?e.jsx(q,{className:"mobile-card",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mobile-text-responsive",children:s||n!=="all"||o!=="all"?"No documents match your filters":"No documents available"}),!s&&n==="all"&&o==="all"&&e.jsxs(T,{className:"mt-4 mobile-button",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})}):e.jsx("div",{className:d==="grid"?"grid grid-cols-1 gap-4":"space-y-3",children:z.map(R=>e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:se(R.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium mobile-text-responsive truncate",children:R.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[R.category,"  ",R.size]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(oe,{className:$(R.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[G(R.status),e.jsx("span",{className:"text-xs",children:R.status})]})}),R.isConfidential&&e.jsxs(oe,{variant:"outline",className:"text-xs",children:[e.jsx(bt,{className:"w-3 h-3 mr-1"}),"Confidential"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{children:R.uploadedBy})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-3 h-3"}),e.jsx("span",{children:Ke(new Date(R.uploadedAt),"MMM dd, yyyy")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>J(R),className:"mobile-button p-1",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>W(R),className:"mobile-button p-1",children:e.jsx(Zl,{className:"w-4 h-4"})})]})]}),R.expiryDate&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",Ke(new Date(R.expiryDate),"MMM dd, yyyy"),kl(new Date(R.expiryDate),new Date)&&e.jsx("span",{className:"text-red-500 ml-2",children:"(Expired)"})]})})]})]})})},R.id))})]})]})},$h=t=>{const{profile:s}=K();return ge({queryKey:["driver-documents",s==null?void 0:s.id,s==null?void 0:s.organization_id],queryFn:()=>F(void 0,null,function*(){if(!(s!=null&&s.organization_id))throw new Error("Organization ID is required");const a=s==null?void 0:s.id;if(!a)throw new Error("Driver ID is required");console.log("Fetching driver documents for driver:",a);const{data:n,error:r}=yield L.from("driver_documents").select("*").eq("organization_id",s.organization_id).eq("driver_id",a).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching driver documents:",r),r;return console.log("Fetched driver documents:",n),n||[]}),enabled:!!(s!=null&&s.organization_id)&&!!(s!=null&&s.id)})},_f=()=>{const{profile:t}=K();return ge({queryKey:["all-driver-documents",t==null?void 0:t.organization_id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.organization_id))throw new Error("Organization ID is required");console.log("Fetching all driver documents for organization:",t.organization_id);const{data:s,error:a}=yield L.from("driver_documents").select(`
          *,
          driver:driver_id(first_name, last_name, email),
          requester:requested_by(first_name, last_name),
          uploader:uploaded_by(first_name, last_name),
          reviewer:reviewed_by(first_name, last_name)
        `).eq("organization_id",t.organization_id).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching all driver documents:",a),a;return console.log("Fetched all driver documents:",s),s||[]}),enabled:!!(t!=null&&t.organization_id)&&((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="council")})},Sf=()=>{const{profile:t}=K(),s=ye();return Re({mutationFn:a=>F(void 0,null,function*(){if(!(t!=null&&t.organization_id)||!(t!=null&&t.id))throw new Error("Organization and user information required");const{data:n,error:r}=yield L.from("driver_documents").insert(w(m({},a),{organization_id:t.organization_id,requested_by:t.id,status:"required"})).select().single();if(r)throw r;return n}),onSuccess:()=>{s.invalidateQueries({queryKey:["driver-documents"]}),s.invalidateQueries({queryKey:["all-driver-documents"]}),s.invalidateQueries({queryKey:["document-notifications"]}),Ne.success("Document request created successfully")},onError:a=>{console.error("Error creating document request:",a),Ne.error("Failed to create document request: "+a.message)}})},qh=()=>{const{profile:t}=K(),s=ye();return Re({mutationFn:o=>F(void 0,[o],function*({documentId:a,file:n,notes:r}){if(!(t!=null&&t.organization_id)||!(t!=null&&t.id))throw new Error("Organization and user information required");const d=`driver-documents/${`${a}_${Date.now()}_${n.name}`}`,{error:u}=yield L.storage.from("documents").upload(d,n);if(u)throw u;const{data:h}=L.storage.from("documents").getPublicUrl(d),{data:p,error:x}=yield L.from("driver_documents").update({file_name:n.name,file_path:d,file_url:h.publicUrl,file_type:n.type,file_size:n.size,status:"uploaded",uploaded_at:new Date().toISOString(),uploaded_by:t.id,driver_notes:r}).eq("id",a).eq("driver_id",t.id).select().single();if(x)throw x;return p}),onSuccess:()=>{s.invalidateQueries({queryKey:["driver-documents"]}),s.invalidateQueries({queryKey:["all-driver-documents"]}),s.invalidateQueries({queryKey:["document-notifications"]}),Ne.success("Document uploaded successfully")},onError:a=>{console.error("Error uploading document:",a),Ne.error("Failed to upload document: "+a.message)}})},Cf=()=>{const{profile:t}=K(),s=ye();return Re({mutationFn:o=>F(void 0,[o],function*({documentId:a,status:n,notes:r}){if(!(t!=null&&t.organization_id)||!(t!=null&&t.id))throw new Error("Organization and user information required");const{data:l,error:d}=yield L.from("driver_documents").update({status:n,admin_notes:r,review_date:new Date().toISOString(),reviewed_by:t.id}).eq("id",a).select().single();if(d)throw d;return l}),onSuccess:()=>{s.invalidateQueries({queryKey:["driver-documents"]}),s.invalidateQueries({queryKey:["all-driver-documents"]}),s.invalidateQueries({queryKey:["document-notifications"]}),Ne.success("Document review completed")},onError:a=>{console.error("Error reviewing document:",a),Ne.error("Failed to review document: "+a.message)}})},Ef=()=>{const{profile:t}=K();return ge({queryKey:["document-notifications",t==null?void 0:t.id,t==null?void 0:t.organization_id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.organization_id)||!(t!=null&&t.id))throw new Error("User information required");console.log("Fetching document notifications for user:",t.id);const{data:s,error:a}=yield L.from("document_notifications").select("*").eq("organization_id",t.organization_id).or(`driver_id.eq.${t.id},admin_id.eq.${t.id}`).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching document notifications:",a),a;return console.log("Fetched document notifications:",s),s||[]}),enabled:!!(t!=null&&t.organization_id)&&!!(t!=null&&t.id)})},Rf=()=>{K();const t=ye();return Re({mutationFn:s=>F(void 0,null,function*(){const{data:a,error:n}=yield L.from("document_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",s).select().single();if(n)throw n;return a}),onSuccess:()=>{t.invalidateQueries({queryKey:["document-notifications"]})},onError:s=>{console.error("Error marking notification as read:",s)}})},jo=()=>{K();const{toast:t}=Te(),[s,a]=i.useState(""),[n,r]=i.useState("all"),[o,l]=i.useState("all"),[d,u]=i.useState("list"),[h,p]=i.useState("dueDate"),[x,c]=i.useState("asc"),[f,b]=i.useState(!1),[v,_]=i.useState(null),[g,y]=i.useState(!1),[N,C]=i.useState(null),[D,z]=i.useState(""),{data:$=[],isLoading:G,error:se,refetch:W}=$h(),J=qh(),R=[...$.filter(A=>{var Ve;const te=A.name.toLowerCase().includes(s.toLowerCase())||((Ve=A.description)==null?void 0:Ve.toLowerCase().includes(s.toLowerCase()))||A.category.toLowerCase().includes(s.toLowerCase()),me=n==="all"||A.status===n,be=o==="all"||A.category===o;return te&&me&&be})].sort((A,te)=>{let me=0;switch(h){case"name":me=A.name.localeCompare(te.name);break;case"dueDate":!A.due_date&&!te.due_date?me=0:A.due_date?te.due_date?me=new Date(A.due_date).getTime()-new Date(te.due_date).getTime():me=-1:me=1;break;case"status":me=A.status.localeCompare(te.status);break;case"priority":const be={critical:4,high:3,medium:2,low:1};me=be[A.priority]-be[te.priority];break}return x==="asc"?me:-me}),ae=A=>{switch(A){case"approved":return"bg-green-100 text-green-800 border-green-200";case"uploaded":return"bg-blue-100 text-blue-800 border-blue-200";case"pending_review":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"required":return"bg-red-100 text-red-800 border-red-200";case"expired":return"bg-muted text-muted-foreground border-border";default:return"bg-muted text-muted-foreground border-border"}},O=A=>{switch(A){case"approved":return e.jsx(nc,{className:"w-4 h-4"});case"uploaded":return e.jsx(Qt,{className:"w-4 h-4"});case"pending_review":return e.jsx(rc,{className:"w-4 h-4"});case"required":return e.jsx(tt,{className:"w-4 h-4"});case"expired":return e.jsx(ac,{className:"w-4 h-4"});default:return e.jsx(Ns,{className:"w-4 h-4"})}},Z=A=>{switch(A){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-muted"}},ce=A=>{_(A),y(!0)},E=A=>{A.file_url?window.open(A.file_url,"_blank"):t({title:"No file available",description:"This document hasn't been uploaded yet.",variant:"destructive"})},ee=A=>{var me;const te=(me=A.target.files)==null?void 0:me[0];te&&C(te)},V=()=>F(void 0,null,function*(){if(!(!N||!v))try{yield J.mutateAsync({documentId:v.id,file:N,notes:D}),y(!1),C(null),z(""),_(null)}catch(A){console.error("Upload failed:",A)}}),H=[{id:"License",name:"License Documents"},{id:"Medical",name:"Medical Certificates"},{id:"Training",name:"Training Certificates"},{id:"Insurance",name:"Insurance Documents"},{id:"Background",name:"Background Checks"},{id:"Other",name:"Other Documents"}],X=[{id:"required",name:"Required"},{id:"uploaded",name:"Uploaded"},{id:"pending_review",name:"Pending Review"},{id:"approved",name:"Approved"},{id:"expired",name:"Expired"}],Y=R.filter(A=>A.is_urgent||A.status==="required"),xe=R.filter(A=>!A.is_urgent&&A.status!=="required");return G?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Loading documents..."})]})})}):se?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fe,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mobile-text-responsive",children:"Failed to load documents."}),e.jsxs(T,{onClick:()=>W(),className:"mt-4 mobile-button",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})}):e.jsxs(ve,{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mobile-text-xl",children:"My Documents"}),e.jsxs("p",{className:"text-gray-600 mobile-text-responsive",children:[R.length," documents  ",Y.length," require attention"]})]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"mobile-button",children:e.jsx(at,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ue,{placeholder:"Search documents...",value:s,onChange:A=>a(A.target.value),className:"mobile-input pl-10"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>b(!f),className:"mobile-button",children:[e.jsx(sn,{className:"w-4 h-4 mr-2"}),"Filters"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>u(d==="list"?"grid":"list"),className:"mobile-button",children:d==="list"?e.jsx(an,{className:"w-4 h-4"}):e.jsx(rn,{className:"w-4 h-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>c(x==="asc"?"desc":"asc"),className:"mobile-button",children:x==="asc"?e.jsx(nn,{className:"w-4 h-4"}):e.jsx(on,{className:"w-4 h-4"})})]}),f&&e.jsxs("div",{className:"space-y-3 p-4 bg-card rounded-lg border border-border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Category"}),e.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"w-full p-2 border rounded-md mobile-input",children:[e.jsx("option",{value:"all",children:"All Categories"}),H.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsxs("select",{value:n,onChange:A=>r(A.target.value),className:"w-full p-2 border rounded-md mobile-input",children:[e.jsx("option",{value:"all",children:"All Status"}),X.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]})]})]})]}),Y.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mobile-text-large text-red-700 flex items-center",children:[e.jsx(fe,{className:"w-5 h-5 mr-2"}),"Requires Attention (",Y.length,")"]}),e.jsx("div",{className:"space-y-3",children:Y.map(A=>e.jsx(q,{className:"mobile-card border-red-200 bg-red-50",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${Z(A.priority)}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium mobile-text-responsive truncate",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[A.category,"  ",A.description]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(oe,{className:ae(A.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[O(A.status),e.jsx("span",{className:"text-xs",children:A.status.replace("_"," ")})]})}),A.isUrgent&&e.jsx(oe,{variant:"destructive",className:"text-xs",children:"Urgent"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{children:"Requested by Admin"})]}),A.due_date&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-3 h-3"}),e.jsxs("span",{children:["Due: ",Ke(new Date(A.due_date),"MMM dd, yyyy")]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:A.status==="required"?e.jsx(T,{variant:"default",size:"sm",onClick:()=>ce(A),className:"mobile-button bg-red-600 hover:bg-red-700",children:e.jsx(Qt,{className:"w-4 h-4"})}):e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>E(A),className:"mobile-button p-1",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>ce(A),className:"mobile-button p-1",children:e.jsx(Qt,{className:"w-4 h-4"})})]})})]})})]})})},A.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold mobile-text-large",children:"All Documents"}),xe.length===0?e.jsx(q,{className:"mobile-card",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mobile-text-responsive",children:s||o!=="all"||n!=="all"?"No documents match your filters":"No other documents available"})]})}):e.jsx("div",{className:d==="grid"?"grid grid-cols-1 gap-4":"space-y-3",children:xe.map(A=>e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${Z(A.priority)}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium mobile-text-responsive truncate",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[A.category,"  ",A.description]}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:e.jsx(oe,{className:ae(A.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[O(A.status),e.jsx("span",{className:"text-xs",children:A.status.replace("_"," ")})]})})}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsxs("span",{children:["Requested by ",A.requestedBy]})]}),A.dueDate&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-3 h-3"}),e.jsxs("span",{children:["Due: ",Ke(new Date(A.dueDate),"MMM dd, yyyy")]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>E(A),className:"mobile-button p-1",children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>ce(A),className:"mobile-button p-1",children:e.jsx(Qt,{className:"w-4 h-4"})})]})]})})]})})},A.id))})]}),g&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card rounded-lg p-4 w-full max-w-md max-h-[90vh] overflow-y-auto border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upload Document"}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>y(!1),className:"p-1",children:e.jsx(Vt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.jsx("strong",{children:v.name})}),e.jsx("p",{className:"text-xs text-gray-500",children:v.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:ee,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"w-full",children:e.jsxs(T,{variant:"outline",className:"w-full mobile-button",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Choose File"]})}),N&&e.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[e.jsxs("p",{className:"font-medium",children:["Selected: ",N.name]}),e.jsxs("p",{className:"text-gray-600",children:["Size: ",(N.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("textarea",{placeholder:"Add notes (optional)",value:D,onChange:A=>z(A.target.value),className:"w-full p-2 border rounded-md mobile-input",rows:3,style:{fontSize:"16px",lineHeight:"1.4",resize:"none",minHeight:"80px"}})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(T,{variant:"outline",className:"flex-1 mobile-button",onClick:()=>{y(!1),C(null),z("")},children:"Cancel"}),e.jsx(T,{className:"flex-1 mobile-button",onClick:V,disabled:!N||J.isPending,children:J.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):"Upload"})]})]})]})})]})},Uh=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Bh=()=>{const{user:t}=K();return ge({queryKey:["child-profiles",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:s,error:a}=yield L.from("child_profiles").select("*").eq("parent_id",t.id).eq("is_active",!0).order("created_at",{ascending:!1});if(a)throw a;return s}),enabled:!!(t!=null&&t.id)})},Tf=()=>{const t=ye(),{user:s}=K();return Re({mutationFn:a=>F(void 0,null,function*(){if(!(s!=null&&s.id))throw new Error("User not authenticated");const{data:n,error:r}=yield L.from("child_profiles").insert(w(m({},a),{parent_id:s.id})).select().single();if(r)throw r;return n}),onSuccess:()=>{t.invalidateQueries({queryKey:["child-profiles",s==null?void 0:s.id]})}})},Pf=()=>{const t=ye(),{user:s}=K();return Re({mutationFn:r=>F(void 0,null,function*(){var o=r,{id:a}=o,n=j(o,["id"]);const{data:l,error:d}=yield L.from("child_profiles").update(n).eq("id",a).select().single();if(d)throw d;return l}),onSuccess:()=>{t.invalidateQueries({queryKey:["child-profiles",s==null?void 0:s.id]})}})},kf=t=>(K(),ge({queryKey:["risk-assessments",t],queryFn:()=>F(void 0,null,function*(){if(!t)return[];const{data:s,error:a}=yield L.from("risk_assessments").select("*").eq("child_id",t).eq("is_active",!0).order("created_at",{ascending:!1});if(a)throw a;return s}),enabled:!!t})),Df=()=>{const t=ye();return Re({mutationFn:s=>F(void 0,null,function*(){const{data:a,error:n}=yield L.from("risk_assessments").insert(s).select().single();if(n)throw n;return a}),onSuccess:s=>{t.invalidateQueries({queryKey:["risk-assessments",s.child_id]})}})},Hh=()=>{const{user:t}=K();return ge({queryKey:["parent-communications",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:s,error:a}=yield L.from("parent_communications").select(`
          *,
          child_profiles!inner(first_name, last_name),
          profiles!parent_communications_driver_id_fkey(first_name, last_name)
        `).or(`parent_id.eq.${t.id},driver_id.eq.${t.id}`).order("sent_at",{ascending:!1}).limit(50);if(a)throw a;return s}),enabled:!!(t!=null&&t.id)})},Af=()=>{const t=ye(),{user:s}=K();return Re({mutationFn:a=>F(void 0,null,function*(){if(!(s!=null&&s.id))throw new Error("User not authenticated");const{data:n,error:r}=yield L.from("parent_communications").insert(w(m({},a),{parent_id:s.id})).select().single();if(r)throw r;return n}),onSuccess:()=>{t.invalidateQueries({queryKey:["parent-communications",s==null?void 0:s.id]})}})},Kh=(t,s,a)=>(K(),ge({queryKey:["student-attendance",t,s,a],queryFn:()=>F(void 0,null,function*(){if(!t)return[];let n=L.from("student_attendance").select("*").eq("child_id",t).order("date",{ascending:!1});s&&(n=n.gte("date",s)),a&&(n=n.lte("date",a));const{data:r,error:o}=yield n;if(o)throw o;return r}),enabled:!!t})),Wh=t=>(K(),ge({queryKey:["child-transport-status",t],queryFn:()=>F(void 0,null,function*(){if(!t)return null;const{data:s,error:a}=yield L.from("child_transport_status").select("*").eq("child_id",t).order("last_updated",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw a;return s}),enabled:!!t,refetchInterval:3e4})),Gh=t=>{const s=new Date,a=new Date(t);let n=s.getFullYear()-a.getFullYear();const r=s.getMonth()-a.getMonth();return(r<0||r===0&&s.getDate()<a.getDate())&&n--,n},Yh=()=>{const{user:t,profile:s,loading:a}=K(),{toast:n}=Te(),[r,o]=i.useState(!1);i.useState(null),i.useState(null),i.useState(null),i.useState(null),i.useState(!1);const[l,d]=i.useState(null),[u,h]=i.useState("overview"),{data:p=[],isLoading:x,error:c,refetch:f}=Bh();Hh();const{data:b=[],isLoading:v}=Kh(l==null?void 0:l.id,Ke(new Date().setDate(new Date().getDate()-7),"yyyy-MM-dd"),Ke(new Date,"yyyy-MM-dd"));if(Wh(l==null?void 0:l.id),a)return e.jsx(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading child management..."})]})})});if(!t||!s)return e.jsx(Ae,{to:"/auth",replace:!0});if(s.role!=="parent")return e.jsx(Ae,{to:"/dashboard",replace:!0});const _=()=>F(void 0,null,function*(){try{yield f(),n({title:"Data refreshed",description:"Child information has been updated."})}catch(g){n({title:"Refresh failed",description:"Failed to refresh child data. Please try again.",variant:"destructive"})}});return e.jsxs(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50 relative overflow-hidden",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute -bottom-20 left-1/3 w-80 h-80 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"6s"}}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mobile-text-xl",children:"My Children"}),e.jsx("p",{className:"text-gray-600 mt-1 mobile-text-responsive",children:"Manage your children's information and track their status"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add Child"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Total Children"}),e.jsx(we,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active registrations"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"On Transport"}),e.jsx(ic,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.filter(g=>g.is_active).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently traveling"})]})]})]}),e.jsxs(Ht,{value:u,onValueChange:h,className:"space-y-6",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-3 mobile-tabs",children:[e.jsx(Me,{value:"overview",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Overview"}),e.jsx(Me,{value:"details",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Details"}),e.jsx(Me,{value:"attendance",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Attendance"})]}),e.jsxs(Ie,{value:"overview",className:"space-y-6",children:[e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{children:"Children Status"}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add Child"]})]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:x?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Xe,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading children..."})]}):c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Failed to load children data"}),e.jsx(T,{onClick:_,className:"mt-2",size:"sm",children:"Retry"})]}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(we,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No children registered"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first child to start tracking their transport"}),e.jsxs(T,{onClick:()=>o(!0),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Add Child"]})]}):p.map(g=>{const y=g.date_of_birth?new Date().getFullYear()-new Date(g.date_of_birth).getFullYear():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mobile-text-responsive",children:[g.first_name," ",g.last_name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.grade||"N/A","  Age ",y]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.school})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{variant:"outline",className:"text-gray-600 bg-gray-50 border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Active"})]})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>d(g),children:e.jsx(wt,{className:"w-3 h-3"})}),e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(oc,{className:"w-3 h-3"})}),e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(yt,{className:"w-3 h-3"})})]})]})]},g.id)})})})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs(T,{variant:"outline",className:"w-full justify-start",onClick:()=>h("attendance"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"View Attendance Records"]}),e.jsxs(T,{variant:"outline",className:"w-full justify-start",onClick:()=>o(!0),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Register New Child"]}),e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Contact Transport"]})]})]})]}),e.jsx(Ie,{value:"details",className:"space-y-6",children:l?e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{children:[l.first_name," ",l.last_name]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Age"}),e.jsxs("p",{className:"text-foreground",children:[Gh(l.date_of_birth)," years"]})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"School"}),e.jsx("p",{className:"text-foreground",children:l.school})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Grade"}),e.jsx("p",{className:"text-foreground",children:l.grade})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsxs(oe,{className:"text-gray-600 bg-gray-50 border-gray-200",children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Active"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Medical Notes"}),e.jsx("p",{className:"text-foreground mt-1",children:l.medical_conditions||"No medical notes available"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(pe,{className:"text-sm font-medium text-muted-foreground",children:"Pickup Location"}),e.jsx("p",{className:"text-foreground mt-1",children:l.pickup_location||"Not specified"})]})]})]}):e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(We,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a child to view detailed information"})]})})})}),e.jsx(Ie,{value:"attendance",className:"space-y-6",children:l?e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{children:["Attendance History - ",l.first_name]})]})}),e.jsx(U,{children:v?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Xe,{className:"h-5 w-5 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading attendance..."})]}):b.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No attendance records found"}):e.jsx("div",{className:"space-y-2",children:b.slice(0,7).map((g,y)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:Ke(new Date(g.date),"MMM dd, yyyy")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ke(new Date(g.date),"EEEE")})]}),e.jsx(oe,{variant:g.status==="present"?"default":"destructive",children:g.status})]},y))})})]}):e.jsx(q,{className:"mobile-card",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a child to view attendance records"})]})})})})]})]}),e.jsx(_t,{open:r,onOpenChange:o,children:e.jsxs(rt,{className:"max-w-md",children:[e.jsxs(nt,{children:[e.jsx(it,{children:"Add New Child"}),e.jsx(Is,{children:"Enter your child's information to register them for transport services."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"firstName",children:"First Name"}),e.jsx(Ue,{id:"firstName",placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"lastName",children:"Last Name"}),e.jsx(Ue,{id:"lastName",placeholder:"Enter last name"})]})]}),e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(Ue,{id:"dateOfBirth",type:"date"})]}),e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"school",children:"School"}),e.jsx(Ue,{id:"school",placeholder:"Enter school name"})]}),e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"grade",children:"Grade Level"}),e.jsxs(At,{children:[e.jsx(gt,{children:e.jsx(Mt,{placeholder:"Select grade"})}),e.jsxs(vt,{children:[e.jsx(re,{value:"pre-k",children:"Pre-K"}),e.jsx(re,{value:"k",children:"Kindergarten"}),e.jsx(re,{value:"1",children:"Grade 1"}),e.jsx(re,{value:"2",children:"Grade 2"}),e.jsx(re,{value:"3",children:"Grade 3"}),e.jsx(re,{value:"4",children:"Grade 4"}),e.jsx(re,{value:"5",children:"Grade 5"}),e.jsx(re,{value:"6",children:"Grade 6"}),e.jsx(re,{value:"7",children:"Grade 7"}),e.jsx(re,{value:"8",children:"Grade 8"}),e.jsx(re,{value:"9",children:"Grade 9"}),e.jsx(re,{value:"10",children:"Grade 10"}),e.jsx(re,{value:"11",children:"Grade 11"}),e.jsx(re,{value:"12",children:"Grade 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(pe,{htmlFor:"medicalNotes",children:"Medical Notes (Optional)"}),e.jsx(_a,{id:"medicalNotes",placeholder:"Any medical conditions or special requirements"})]})]}),e.jsxs(mo,{children:[e.jsx(T,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(T,{onClick:()=>{o(!1),n({title:"Child added",description:"Your child has been registered successfully."})},children:"Add Child"})]})]})})]})},yo=t=>{const{user:s}=K(),n=(t||new Date).toISOString().split("T")[0];return ge({queryKey:["parent-schedules",s==null?void 0:s.id,n],queryFn:()=>F(void 0,null,function*(){if(!(s!=null&&s.id))return[];console.log("Fetching parent schedules for date:",n);try{const{data:r,error:o}=yield L.from("child_profiles").select("*").eq("parent_id",s.id).eq("is_active",!0);if(o)throw console.error("Error fetching children:",o),o;if(!r||r.length===0)return console.log("No children found for parent"),[];const{data:l,error:d}=yield L.from("route_assignments").select("*").eq("assignment_date",n).eq("status","active").eq("is_active",!0);if(d)throw console.error("Error fetching route assignments:",d),d;const u=(l==null?void 0:l.map(v=>v.route_id).filter(Boolean))||[],{data:h}=u.length>0?yield L.from("routes").select("id, name, start_location, end_location").in("id",u):{data:[]},p=(l==null?void 0:l.map(v=>v.driver_id).filter(Boolean))||[],{data:x}=p.length>0?yield L.from("profiles").select("id, first_name, last_name, phone").in("id",p):{data:[]},c=(l==null?void 0:l.map(v=>v.vehicle_id).filter(Boolean))||[],{data:f}=c.length>0?yield L.from("vehicles").select("id, vehicle_number, license_plate").in("id",c):{data:[]},b=[];for(const v of r){const _=l==null?void 0:l.find(g=>g.route_id===v.route_id);if(_){const g=h==null?void 0:h.find(C=>C.id===_.route_id),y=x==null?void 0:x.find(C=>C.id===_.driver_id),N=f==null?void 0:f.find(C=>C.id===_.vehicle_id);g&&y&&N&&(v.pickup_time&&b.push({id:`pickup-${v.id}-${_.id}`,childName:`${v.first_name} ${v.last_name}`,type:"pickup",time:v.pickup_time,location:v.pickup_location||g.start_location||"Pickup Location",driverName:`${y.first_name||"Unknown"} ${y.last_name||"Driver"}`,vehicleNumber:N.vehicle_number,status:"scheduled",childId:v.id,routeId:v.route_id,routeName:g.name,assignmentDate:n}),v.dropoff_time&&b.push({id:`dropoff-${v.id}-${_.id}`,childName:`${v.first_name} ${v.last_name}`,type:"dropoff",time:v.dropoff_time,location:v.dropoff_location||g.end_location||"Dropoff Location",driverName:`${y.first_name||"Unknown"} ${y.last_name||"Driver"}`,vehicleNumber:N.vehicle_number,status:"scheduled",childId:v.id,routeId:v.route_id,routeName:g.name,assignmentDate:n}))}}return b.sort((v,_)=>{const g=new Date(`2000-01-01T${v.time}`),y=new Date(`2000-01-01T${_.time}`);return g.getTime()-y.getTime()}),console.log("Generated parent schedule items:",b),b}catch(r){return console.error("Error in useParentSchedules:",r),[]}}),enabled:!!(s!=null&&s.id)})},Qh=t=>{const{data:s=[]}=yo(t);return{totalTrips:s.length,pickups:s.filter(a=>a.type==="pickup").length,dropoffs:s.filter(a=>a.type==="dropoff").length,completed:s.filter(a=>a.status==="completed").length,inProgress:s.filter(a=>a.status==="in_progress").length,delayed:s.filter(a=>a.status==="delayed").length}},Xh=()=>{const{user:t,profile:s,loading:a}=K(),[n,r]=i.useState(new Date),[o,l]=i.useState("today"),{data:d=[],isLoading:u,error:h}=yo(n),p=Qh(n);if(a||u)return e.jsx(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading schedule..."})]})})});if(!t||!s)return e.jsx(Ae,{to:"/auth",replace:!0});if(s.role!=="parent")return e.jsx(Ae,{to:"/dashboard",replace:!0});const x=g=>{switch(g){case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"delayed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=g=>{switch(g){case"scheduled":return"Scheduled";case"in_progress":return"In Progress";case"completed":return"Completed";case"delayed":return"Delayed";default:return"Unknown"}},f=g=>g==="pickup"?e.jsx(Je,{className:"w-4 h-4"}):e.jsx(we,{className:"w-4 h-4"}),b=g=>g==="pickup"?"text-blue-600":"text-green-600",v=g=>g==="pickup"?"Pickup":"Dropoff",_=g=>{try{const[y,N]=g.split(":"),C=parseInt(y),D=C>=12?"PM":"AM";return`${C%12||12}:${N} ${D}`}catch(y){return g}};return e.jsxs(ve,{className:"bg-gradient-to-br from-violet-50 via-blue-50 via-cyan-50 via-emerald-50 to-teal-50 relative overflow-hidden",scrollable:!0,padding:"medium",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute -bottom-20 left-1/3 w-80 h-80 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"4s"}}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-64 h-64 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob",style:{animationDelay:"6s"}}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),e.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mobile-text-xl",children:"Schedule"}),e.jsx("p",{className:"text-gray-600 mt-1 mobile-text-responsive",children:"View and manage your children's transport schedule"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(T,{variant:"outline",size:"sm",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Export"]})})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{children:"Select Date"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"date",value:n.toISOString().split("T")[0],onChange:g=>r(new Date(g.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mobile-input"}),e.jsx(T,{variant:"outline",onClick:()=>r(new Date),children:"Today"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Total Trips"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.totalTrips}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled for today"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Pickups"}),e.jsx(Je,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.pickups}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Morning pickups"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Dropoffs"}),e.jsx(we,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.dropoffs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Afternoon dropoffs"})]})]}),e.jsxs(q,{className:"mobile-card",children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Trips completed"})]})]})]}),e.jsxs(Ht,{value:o,onValueChange:l,className:"space-y-6",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2 mobile-tabs",children:[e.jsx(Me,{value:"today",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Today"}),e.jsx(Me,{value:"weekly",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Weekly"})]}),e.jsx(Ie,{value:"today",className:"space-y-6",children:e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsx(ie,{children:"Today's Schedule"})}),e.jsx(U,{children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No schedule items for today"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:h?"Error loading schedule data":"Your children may not be assigned to any routes today"})]}):e.jsx("div",{className:"space-y-4",children:d.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${b(g.type)} bg-opacity-10`,children:f(g.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold mobile-text-responsive",children:g.childName}),e.jsx(oe,{variant:"outline",className:b(g.type),children:v(g.type)})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:_(g.time)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:g.location})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Driver: ",g.driverName,"  Vehicle: ",g.vehicleNumber,g.routeName&&`  Route: ${g.routeName}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{variant:"outline",className:x(g.status),children:e.jsx("span",{className:"text-xs",children:c(g.status)})}),e.jsx(T,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(yt,{className:"w-4 h-4"})})]})]},g.id))})})]})}),e.jsx(Ie,{value:"weekly",className:"space-y-6",children:e.jsxs(q,{className:"mobile-card",children:[e.jsx(ne,{children:e.jsx(ie,{children:"Weekly Schedule"})}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-7 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(g=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:g}),e.jsx("div",{className:"space-y-1",children:d.slice(0,2).map(y=>e.jsxs("div",{className:"text-xs p-2 bg-gray-100 rounded",children:[e.jsx("div",{className:"font-medium truncate",children:y.childName}),e.jsx("div",{className:"text-gray-600",children:_(y.time)})]},`${g}-${y.id}`))})]},g))})})]})})]})]})]})};var Ea="Switch",[Jh,Mf]=Ct(Ea),[Zh,ex]=Jh(Ea),wo=i.forwardRef((t,s)=>{const N=t,{__scopeSwitch:a,name:n,checked:r,defaultChecked:o,required:l,disabled:d,value:u="on",onCheckedChange:h,form:p}=N,x=j(N,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[c,f]=i.useState(null),b=Se(s,C=>f(C)),v=i.useRef(!1),_=c?p||!!c.closest("form"):!0,[g=!1,y]=fs({prop:r,defaultProp:o,onChange:h});return e.jsxs(Zh,{scope:a,checked:g,disabled:d,children:[e.jsx(he.button,w(m({type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":So(g),"data-disabled":d?"":void 0,disabled:d,value:u},x),{ref:b,onClick:B(t.onClick,C=>{y(D=>!D),_&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})})),_&&e.jsx(tx,{control:c,bubbles:!v.current,name:n,value:u,checked:g,required:l,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});wo.displayName=Ea;var No="SwitchThumb",_o=i.forwardRef((t,s)=>{const o=t,{__scopeSwitch:a}=o,n=j(o,["__scopeSwitch"]),r=ex(No,a);return e.jsx(he.span,w(m({"data-state":So(r.checked),"data-disabled":r.disabled?"":void 0},n),{ref:s}))});_o.displayName=No;var tx=t=>{const u=t,{control:s,checked:a,bubbles:n=!0}=u,r=j(u,["control","checked","bubbles"]),o=i.useRef(null),l=Sl(a),d=Cl(s);return i.useEffect(()=>{const h=o.current,p=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==a&&c){const f=new Event("click",{bubbles:n});c.call(h,a),h.dispatchEvent(f)}},[l,a,n]),e.jsx("input",w(m({type:"checkbox","aria-hidden":!0,defaultChecked:a},r),{tabIndex:-1,ref:o,style:w(m(m({},t.style),d),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function So(t){return t?"checked":"unchecked"}var Co=wo,sx=_o;const ns=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(Co,w(m({className:P("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t)},s),{ref:a,children:e.jsx(sx,{className:P("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});ns.displayName=Co.displayName;const nr=()=>{const[t,s]=i.useState(!1),[a,n]=i.useState(!1),[r,o]=i.useState({essential:!0,analytics:!1,marketing:!1,functional:!1});i.useEffect(()=>{const f=localStorage.getItem("cookie_consent");if(!f)s(!0);else{const b=JSON.parse(f);o(b)}},[]);const l=()=>{const f={essential:!0,analytics:!0,marketing:!0,functional:!0};o(f),localStorage.setItem("cookie_consent",JSON.stringify(f)),s(!1),h(),p()},d=()=>{const f={essential:!0,analytics:!1,marketing:!1,functional:!1};o(f),localStorage.setItem("cookie_consent",JSON.stringify(f)),s(!1)},u=()=>{localStorage.setItem("cookie_consent",JSON.stringify(r)),n(!1),r.analytics&&h(),r.marketing&&p(),r.functional&&x()},h=()=>{console.log("Analytics cookies enabled")},p=()=>{console.log("Marketing cookies enabled")},x=()=>{console.log("Functional cookies enabled")},c=(f,b)=>{o(v=>w(m({},v),{[f]:b}))};return!t&&!a?e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Cookie Settings"]})}):e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50 shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qs,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"We use cookies"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"We use cookies to enhance your experience, analyze site usage, and assist in our marketing efforts. Essential cookies are required for the site to function properly."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Customize"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:d,children:"Essential Only"}),e.jsx(T,{size:"sm",onClick:l,className:"bg-blue-600 hover:bg-blue-700",children:"Accept All"})]})]})}),e.jsx(_t,{open:a,onOpenChange:n,children:e.jsxs(rt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(nt,{children:e.jsxs(it,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-5 h-5"}),"Cookie Preferences"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Manage your cookie preferences. Essential cookies are required for the website to function and cannot be disabled."}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{className:"w-4 h-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Essential Cookies"})]}),e.jsx(oe,{className:"bg-green-100 text-green-800",children:"Always Active"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Required for the website to function properly. These cookies enable basic functionality like page navigation and access to secure areas."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Examples: Authentication, session management, security features"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Analytics Cookies"})]}),e.jsx(ns,{checked:r.analytics,onCheckedChange:f=>c("analytics",f)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Help us understand how visitors interact with our website by collecting and reporting information anonymously."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Examples: Google Analytics, Hotjar, page view tracking"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Functional Cookies"})]}),e.jsx(ns,{checked:r.functional,onCheckedChange:f=>c("functional",f)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Enable enhanced functionality and personalization, such as remembering your preferences and settings."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Examples: Language preferences, user interface customization"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-4 h-4 text-orange-600"}),e.jsx("h4",{className:"font-medium",children:"Marketing Cookies"})]}),e.jsx(ns,{checked:r.marketing,onCheckedChange:f=>c("marketing",f)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Used to track visitors across websites to display relevant and engaging advertisements."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Examples: Social media pixels, advertising networks"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4 border-t",children:[e.jsx(T,{variant:"outline",onClick:()=>{o({essential:!0,analytics:!1,marketing:!1,functional:!1})},className:"flex-1",children:"Essential Only"}),e.jsx(T,{onClick:()=>{o({essential:!0,analytics:!0,marketing:!0,functional:!0})},className:"flex-1",children:"Accept All"}),e.jsx(T,{onClick:u,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Save Preferences"})]})]})]})})]})},kt=({children:t})=>{const{user:s,loading:a}=K(),n=$t(),r=Et(),o=["/","/auth","/driver-login","/mechanic-login","/mechanic-auth","/forgot-password","/reset-password","/auth/callback"],l=s&&!o.includes(n.pathname);if(a&&!o.includes(n.pathname))return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your dashboard..."})]})});if(s&&o.includes(n.pathname)&&n.pathname!=="/")return e.jsx(Ae,{to:"/dashboard",replace:!0});if(!l)return e.jsx("div",{className:"w-full h-full",children:t});if(r){const{profile:d}=K(),u=d==null?void 0:d.role;if(u==="parent"&&["/dashboard","/admin","/vehicles","/drivers","/jobs","/settings","/mechanic-dashboard","/work-orders","/defect-reports","/parts-supplies","/fuel-management","/mechanics","/route-planning","/invoice-management","/analytics","/routes","/staff-directory","/compliance-reports"].some(x=>n.pathname.startsWith(x)))return e.jsx(Ae,{to:"/parent/dashboard",replace:!0});let h=t;return u==="parent"&&n.pathname==="/parent/dashboard"?h=e.jsx(Ch,{}):u==="parent"&&n.pathname==="/parent/tracking"?h=e.jsx(Lh,{}):u==="parent"&&n.pathname==="/parent/children"?h=e.jsx(Yh,{}):u==="parent"&&n.pathname==="/parent/schedule"?h=e.jsx(Xh,{}):u==="mechanic"&&n.pathname==="/mechanic-dashboard"?h=e.jsx(Oh,{}):u==="mechanic"&&n.pathname==="/work-orders"?h=e.jsx(zh,{}):n.pathname==="/documents"?h=e.jsx(Vh,{}):n.pathname==="/driver/documents"&&(h=e.jsx(jo,{})),e.jsxs(Sh,{children:[e.jsx(sr,{}),e.jsx("main",{className:"mobile-content-area",children:e.jsx("div",{className:"max-w-full mx-auto",children:h})}),e.jsx(_h,{}),e.jsx(nr,{})]})}return e.jsx(ii,{defaultOpen:!0,children:e.jsxs("div",{className:"min-h-screen flex w-full overflow-hidden",children:[e.jsx(Ku,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx(sr,{}),e.jsx("main",{className:"flex-1 overflow-auto bg-background",children:e.jsx("div",{className:"w-full h-full p-3 sm:p-4 lg:p-6",children:e.jsx("div",{className:"max-w-full mx-auto",children:t})})})]}),e.jsx(nr,{})]})})},M=({children:t,allowedRoles:s=[],requiresAuth:a=!0})=>{const{user:n,profile:r,loading:o}=K(),l=$t();return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600"})}):a&&!n?e.jsx(Ae,{to:"/auth",state:{from:l},replace:!0}):a&&n&&!r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Xe,{className:"h-8 w-8 animate-spin text-blue-600"})}):s.length>0&&r&&!s.includes(r.role)?e.jsx(Ae,{to:"/unauthorized",replace:!0}):e.jsx(e.Fragment,{children:t})},ax=lt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ms=i.forwardRef((r,n)=>{var o=r,{className:t,variant:s}=o,a=j(o,["className","variant"]);return e.jsx("div",m({ref:n,role:"alert",className:P(ax({variant:s}),t)},a))});ms.displayName="Alert";const hs=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx("div",m({ref:a,className:P("text-sm [&_p]:leading-relaxed",t)},s))});hs.displayName="AlertDescription";const rx=({open:t,onSuccess:s})=>{const[a,n]=i.useState(""),[r,o]=i.useState(""),[l,d]=i.useState(!1),[u,h]=i.useState(!1),[p,x]=i.useState(!1),[c,f]=i.useState(""),{toast:b}=Te(),v=g=>{const y=g.length>=8,N=/[A-Z]/.test(g),C=/[a-z]/.test(g),D=/\d/.test(g),z=/[!@#$%^&*(),.?":{}|<>]/.test(g);return{isValid:y&&N&&C&&D&&z,errors:[!y&&"Password must be at least 8 characters",!N&&"Password must contain an uppercase letter",!C&&"Password must contain a lowercase letter",!D&&"Password must contain a number",!z&&"Password must contain a special character"].filter(Boolean)}},_=()=>F(void 0,null,function*(){if(f(""),!a||!r){f("Please fill in all fields");return}if(a!==r){f("Passwords do not match");return}const g=v(a);if(!g.isValid){f(g.errors.join(", "));return}x(!0);try{const{data:{user:y}}=yield L.auth.getUser();if(!y)throw new Error("No user found. Please log in again.");const{error:N}=yield L.auth.updateUser({password:a});if(N)throw console.error("Password update error:",N),N;const{error:C}=yield L.from("profiles").update({must_change_password:!1,password_changed_at:new Date().toISOString()}).eq("id",y.id);C&&(console.error("Profile update error:",C),console.warn("Profile update failed, but password was changed:",C)),b({title:"Success",description:"Password updated successfully!"}),s()}catch(y){console.error("Password change error:",y),f(y.message||"Failed to update password")}finally{x(!1)}});return e.jsx(_t,{open:t,onOpenChange:()=>{},children:e.jsxs(rt,{className:"sm:max-w-md",onInteractOutside:g=>g.preventDefault(),children:[e.jsxs(nt,{children:[e.jsxs(it,{className:"flex items-center gap-2",children:[e.jsx(lc,{className:"w-5 h-5"}),"Password Change Required"]}),e.jsx(Is,{className:"text-left",children:"For security reasons, you must change your password before continuing. Please choose a strong password that meets the requirements below."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ms,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(hs,{children:"This is a one-time mandatory password change for your security."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{id:"newPassword",type:l?"text":"password",value:a,onChange:g=>n(g.target.value),placeholder:"Enter new password",className:"pr-10"}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!l),children:l?e.jsx(Ba,{className:"h-4 w-4"}):e.jsx(wt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pe,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{id:"confirmPassword",type:u?"text":"password",value:r,onChange:g=>o(g.target.value),placeholder:"Confirm new password",className:"pr-10"}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?e.jsx(Ba,{className:"h-4 w-4"}):e.jsx(wt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-xs space-y-1 ml-4",children:[e.jsx("li",{children:" At least 8 characters long"}),e.jsx("li",{children:" Contains uppercase and lowercase letters"}),e.jsx("li",{children:" Contains at least one number"}),e.jsx("li",{children:" Contains at least one special character"})]})]}),c&&e.jsxs(ms,{variant:"destructive",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(hs,{children:c})]}),e.jsx(T,{onClick:_,disabled:p,className:"w-full",children:p?"Updating Password...":"Update Password"})]})]})})},nx=({children:t})=>{const{profile:s,refreshProfile:a}=K(),[n,r]=i.useState(!1);i.useEffect(()=>{(s==null?void 0:s.must_change_password)===!0?r(!0):r(!1)},[s==null?void 0:s.must_change_password]);const o=()=>F(void 0,null,function*(){r(!1),yield a()});return e.jsxs(e.Fragment,{children:[t,e.jsx(rx,{open:n,onSuccess:o})]})},Eo=()=>{const{user:t}=K(),{toast:s}=Te(),a=ye(),{data:n,isLoading:r,error:o,refetch:l}=ge({queryKey:["user-agreement-status",t==null?void 0:t.id],queryFn:()=>F(void 0,null,function*(){if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:v,error:_}=yield L.rpc("check_user_agreement_status",{user_id_param:t.id});if(_)throw _;return v[0]||{needs_terms_acceptance:!1,needs_privacy_acceptance:!1,latest_terms_version:null,latest_privacy_version:null}}),enabled:!!(t!=null&&t.id)}),{data:d,isLoading:u,error:h}=ge({queryKey:["user-agreements"],queryFn:()=>F(void 0,null,function*(){const{data:v,error:_}=yield L.from("user_agreements").select("*").eq("is_active",!0).order("effective_date",{ascending:!1});if(_)throw _;return v||[]})}),p=Re({mutationFn:v=>F(void 0,null,function*(){if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:_,error:g}=yield L.from("user_agreements").select("id").eq("agreement_type",v.agreement_type).eq("version",v.version).single();if(g||!_)throw new Error("Agreement not found");const{error:y}=yield L.from("user_agreement_acceptances").insert({user_id:t.id,agreement_id:_.id,ip_address:"127.0.0.1",user_agent:navigator.userAgent});if(y)throw y;const N={};v.agreement_type==="terms_of_service"?(N.terms_accepted=!0,N.terms_accepted_date=new Date().toISOString(),N.terms_version=v.version):v.agreement_type==="privacy_policy"&&(N.privacy_policy_accepted=!0,N.privacy_policy_accepted_date=new Date().toISOString(),N.privacy_policy_version=v.version);const{error:C}=yield L.from("profiles").update(N).eq("id",t.id);if(C)throw C;return{success:!0}}),onSuccess:()=>{s({title:"Agreement Accepted",description:"Thank you for accepting the agreement."}),a.invalidateQueries({queryKey:["user-agreement-status"]}),a.invalidateQueries({queryKey:["user-profile"]})},onError:v=>{s({title:"Error",description:v.message||"Failed to accept agreement",variant:"destructive"})}}),x=n&&(n.needs_terms_acceptance||n.needs_privacy_acceptance),c=v=>d==null?void 0:d.find(_=>_.agreement_type===v),f=()=>{n!=null&&n.latest_terms_version&&p.mutate({agreement_type:"terms_of_service",version:n.latest_terms_version})},b=()=>{n!=null&&n.latest_privacy_version&&p.mutate({agreement_type:"privacy_policy",version:n.latest_privacy_version})};return{agreementStatus:n,agreements:d,needsAgreementAcceptance:x,isLoadingStatus:r,isLoadingAgreements:u,isAccepting:p.isPending,statusError:o,agreementsError:h,acceptTermsOfService:f,acceptPrivacyPolicy:b,refetchStatus:l,getAgreementByType:c}};function ix(t,s){return i.useReducer((a,n)=>{const r=s[a][n];return r!=null?r:a},t)}var Ra="ScrollArea",[Ro,If]=Ct(Ra),[ox,Fe]=Ro(Ra),To=i.forwardRef((t,s)=>{const J=t,{__scopeScrollArea:a,type:n="hover",dir:r,scrollHideDelay:o=600}=J,l=j(J,["__scopeScrollArea","type","dir","scrollHideDelay"]),[d,u]=i.useState(null),[h,p]=i.useState(null),[x,c]=i.useState(null),[f,b]=i.useState(null),[v,_]=i.useState(null),[g,y]=i.useState(0),[N,C]=i.useState(0),[D,z]=i.useState(!1),[$,G]=i.useState(!1),se=Se(s,le=>u(le)),W=Lr(r);return e.jsx(ox,{scope:a,type:n,dir:W,scrollHideDelay:o,scrollArea:d,viewport:h,onViewportChange:p,content:x,onContentChange:c,scrollbarX:f,onScrollbarXChange:b,scrollbarXEnabled:D,onScrollbarXEnabledChange:z,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:$,onScrollbarYEnabledChange:G,onCornerWidthChange:y,onCornerHeightChange:C,children:e.jsx(he.div,w(m({dir:W},l),{ref:se,style:m({position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":N+"px"},t.style)}))})});To.displayName=Ra;var Po="ScrollAreaViewport",ko=i.forwardRef((t,s)=>{const p=t,{__scopeScrollArea:a,children:n,asChild:r,nonce:o}=p,l=j(p,["__scopeScrollArea","children","asChild","nonce"]),d=Fe(Po,a),u=i.useRef(null),h=Se(s,u,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),e.jsx(he.div,w(m({"data-radix-scroll-area-viewport":""},l),{asChild:r,ref:h,style:m({overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden"},t.style),children:gx({asChild:r,children:n},x=>e.jsx("div",{"data-radix-scroll-area-content":"",ref:d.onContentChange,style:{minWidth:d.scrollbarXEnabled?"fit-content":void 0},children:x}))}))]})});ko.displayName=Po;var Qe="ScrollAreaScrollbar",Ta=i.forwardRef((t,s)=>{const u=t,{forceMount:a}=u,n=j(u,["forceMount"]),r=Fe(Qe,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=r,d=t.orientation==="horizontal";return i.useEffect(()=>(d?o(!0):l(!0),()=>{d?o(!1):l(!1)}),[d,o,l]),r.type==="hover"?e.jsx(lx,w(m({},n),{ref:s,forceMount:a})):r.type==="scroll"?e.jsx(cx,w(m({},n),{ref:s,forceMount:a})):r.type==="auto"?e.jsx(Do,w(m({},n),{ref:s,forceMount:a})):r.type==="always"?e.jsx(Pa,w(m({},n),{ref:s})):null});Ta.displayName=Qe;var lx=i.forwardRef((t,s)=>{const d=t,{forceMount:a}=d,n=j(d,["forceMount"]),r=Fe(Qe,t.__scopeScrollArea),[o,l]=i.useState(!1);return i.useEffect(()=>{const u=r.scrollArea;let h=0;if(u){const p=()=>{window.clearTimeout(h),l(!0)},x=()=>{h=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(h),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",x)}}},[r.scrollArea,r.scrollHideDelay]),e.jsx(Ye,{present:a||o,children:e.jsx(Do,w(m({"data-state":o?"visible":"hidden"},n),{ref:s}))})}),cx=i.forwardRef((t,s)=>{const h=t,{forceMount:a}=h,n=j(h,["forceMount"]),r=Fe(Qe,t.__scopeScrollArea),o=t.orientation==="horizontal",l=Ls(()=>u("SCROLL_END"),100),[d,u]=ix("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(d==="idle"){const p=window.setTimeout(()=>u("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(p)}},[d,r.scrollHideDelay,u]),i.useEffect(()=>{const p=r.viewport,x=o?"scrollLeft":"scrollTop";if(p){let c=p[x];const f=()=>{const b=p[x];c!==b&&(u("SCROLL"),l()),c=b};return p.addEventListener("scroll",f),()=>p.removeEventListener("scroll",f)}},[r.viewport,o,u,l]),e.jsx(Ye,{present:a||d!=="hidden",children:e.jsx(Pa,w(m({"data-state":d==="hidden"?"hidden":"visible"},n),{ref:s,onPointerEnter:B(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:B(t.onPointerLeave,()=>u("POINTER_LEAVE"))}))})}),Do=i.forwardRef((t,s)=>{const a=Fe(Qe,t.__scopeScrollArea),h=t,{forceMount:n}=h,r=j(h,["forceMount"]),[o,l]=i.useState(!1),d=t.orientation==="horizontal",u=Ls(()=>{if(a.viewport){const p=a.viewport.offsetWidth<a.viewport.scrollWidth,x=a.viewport.offsetHeight<a.viewport.scrollHeight;l(d?p:x)}},10);return St(a.viewport,u),St(a.content,u),e.jsx(Ye,{present:n||o,children:e.jsx(Pa,w(m({"data-state":o?"visible":"hidden"},r),{ref:s}))})}),Pa=i.forwardRef((t,s)=>{const c=t,{orientation:a="vertical"}=c,n=j(c,["orientation"]),r=Fe(Qe,t.__scopeScrollArea),o=i.useRef(null),l=i.useRef(0),[d,u]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Lo(d.viewport,d.content),p=w(m({},n),{sizes:d,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:f=>o.current=f,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:f=>l.current=f});function x(f,b){return px(f,l.current,d,b)}return a==="horizontal"?e.jsx(dx,w(m({},p),{ref:s,onThumbPositionChange:()=>{if(r.viewport&&o.current){const f=r.viewport.scrollLeft,b=ir(f,d,r.dir);o.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollLeft=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollLeft=x(f,r.dir))}})):a==="vertical"?e.jsx(ux,w(m({},p),{ref:s,onThumbPositionChange:()=>{if(r.viewport&&o.current){const f=r.viewport.scrollTop,b=ir(f,d);o.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollTop=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollTop=x(f))}})):null}),dx=i.forwardRef((t,s)=>{const p=t,{sizes:a,onSizesChange:n}=p,r=j(p,["sizes","onSizesChange"]),o=Fe(Qe,t.__scopeScrollArea),[l,d]=i.useState(),u=i.useRef(null),h=Se(s,u,o.onScrollbarXChange);return i.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(Mo,w(m({"data-orientation":"horizontal"},r),{ref:h,sizes:a,style:m({bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Os(a)+"px"},t.style),onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,c)=>{if(o.viewport){const f=o.viewport.scrollLeft+x.deltaX;t.onWheelScroll(f),Fo(f,c)&&x.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:ps(l.paddingLeft),paddingEnd:ps(l.paddingRight)}})}}))}),ux=i.forwardRef((t,s)=>{const p=t,{sizes:a,onSizesChange:n}=p,r=j(p,["sizes","onSizesChange"]),o=Fe(Qe,t.__scopeScrollArea),[l,d]=i.useState(),u=i.useRef(null),h=Se(s,u,o.onScrollbarYChange);return i.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(Mo,w(m({"data-orientation":"vertical"},r),{ref:h,sizes:a,style:m({top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Os(a)+"px"},t.style),onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,c)=>{if(o.viewport){const f=o.viewport.scrollTop+x.deltaY;t.onWheelScroll(f),Fo(f,c)&&x.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:ps(l.paddingTop),paddingEnd:ps(l.paddingBottom)}})}}))}),[mx,Ao]=Ro(Qe),Mo=i.forwardRef((t,s)=>{const se=t,{__scopeScrollArea:a,sizes:n,hasThumb:r,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:p,onResize:x}=se,c=j(se,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),f=Fe(Qe,a),[b,v]=i.useState(null),_=Se(s,W=>v(W)),g=i.useRef(null),y=i.useRef(""),N=f.viewport,C=n.content-n.viewport,D=De(p),z=De(u),$=Ls(x,10);function G(W){if(g.current){const J=W.clientX-g.current.left,le=W.clientY-g.current.top;h({x:J,y:le})}}return i.useEffect(()=>{const W=J=>{const le=J.target;(b==null?void 0:b.contains(le))&&D(J,C)};return document.addEventListener("wheel",W,{passive:!1}),()=>document.removeEventListener("wheel",W,{passive:!1})},[N,b,C,D]),i.useEffect(z,[n,z]),St(b,$),St(f.content,$),e.jsx(mx,{scope:a,scrollbar:b,hasThumb:r,onThumbChange:De(o),onThumbPointerUp:De(l),onThumbPositionChange:z,onThumbPointerDown:De(d),children:e.jsx(he.div,w(m({},c),{ref:_,style:m({position:"absolute"},c.style),onPointerDown:B(t.onPointerDown,W=>{W.button===0&&(W.target.setPointerCapture(W.pointerId),g.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),G(W))}),onPointerMove:B(t.onPointerMove,G),onPointerUp:B(t.onPointerUp,W=>{const J=W.target;J.hasPointerCapture(W.pointerId)&&J.releasePointerCapture(W.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),g.current=null})}))})}),xs="ScrollAreaThumb",Io=i.forwardRef((t,s)=>{const o=t,{forceMount:a}=o,n=j(o,["forceMount"]),r=Ao(xs,t.__scopeScrollArea);return e.jsx(Ye,{present:a||r.hasThumb,children:e.jsx(hx,m({ref:s},n))})}),hx=i.forwardRef((t,s)=>{const x=t,{__scopeScrollArea:a,style:n}=x,r=j(x,["__scopeScrollArea","style"]),o=Fe(xs,a),l=Ao(xs,a),{onThumbPositionChange:d}=l,u=Se(s,c=>l.onThumbChange(c)),h=i.useRef(),p=Ls(()=>{h.current&&(h.current(),h.current=void 0)},100);return i.useEffect(()=>{const c=o.viewport;if(c){const f=()=>{if(p(),!h.current){const b=fx(c,d);h.current=b,d()}};return d(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[o.viewport,p,d]),e.jsx(he.div,w(m({"data-state":l.hasThumb?"visible":"hidden"},r),{ref:u,style:m({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},n),onPointerDownCapture:B(t.onPointerDownCapture,c=>{const b=c.target.getBoundingClientRect(),v=c.clientX-b.left,_=c.clientY-b.top;l.onThumbPointerDown({x:v,y:_})}),onPointerUp:B(t.onPointerUp,l.onThumbPointerUp)}))});Io.displayName=xs;var ka="ScrollAreaCorner",Oo=i.forwardRef((t,s)=>{const a=Fe(ka,t.__scopeScrollArea),n=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&n?e.jsx(xx,w(m({},t),{ref:s})):null});Oo.displayName=ka;var xx=i.forwardRef((t,s)=>{const p=t,{__scopeScrollArea:a}=p,n=j(p,["__scopeScrollArea"]),r=Fe(ka,a),[o,l]=i.useState(0),[d,u]=i.useState(0),h=!!(o&&d);return St(r.scrollbarX,()=>{var c;const x=((c=r.scrollbarX)==null?void 0:c.offsetHeight)||0;r.onCornerHeightChange(x),u(x)}),St(r.scrollbarY,()=>{var c;const x=((c=r.scrollbarY)==null?void 0:c.offsetWidth)||0;r.onCornerWidthChange(x),l(x)}),h?e.jsx(he.div,w(m({},n),{ref:s,style:m({width:o,height:d,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0},t.style)})):null});function ps(t){return t?parseInt(t,10):0}function Lo(t,s){const a=t/s;return isNaN(a)?0:a}function Os(t){const s=Lo(t.viewport,t.content),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-a)*s;return Math.max(n,18)}function px(t,s,a,n="ltr"){const r=Os(a),o=r/2,l=s||o,d=r-l,u=a.scrollbar.paddingStart+l,h=a.scrollbar.size-a.scrollbar.paddingEnd-d,p=a.content-a.viewport,x=n==="ltr"?[0,p]:[p*-1,0];return zo([u,h],x)(t)}function ir(t,s,a="ltr"){const n=Os(s),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,o=s.scrollbar.size-r,l=s.content-s.viewport,d=o-n,u=a==="ltr"?[0,l]:[l*-1,0],h=El(t,u);return zo([0,l],[0,d])(h)}function zo(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(a-t[0])}}function Fo(t,s){return t>0&&t<s}var fx=(t,s=()=>{})=>{let a={left:t.scrollLeft,top:t.scrollTop},n=0;return function r(){const o={left:t.scrollLeft,top:t.scrollTop},l=a.left!==o.left,d=a.top!==o.top;(l||d)&&s(),a=o,n=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(n)};function Ls(t,s){const a=De(t),n=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(n.current),[]),i.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(a,s)},[a,s])}function St(t,s){const a=De(s);Sr(()=>{let n=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(a)});return r.observe(t),()=>{window.cancelAnimationFrame(n),r.unobserve(t)}}},[t,a])}function gx(t,s){const{asChild:a,children:n}=t;if(!a)return typeof s=="function"?s(n):s;const r=i.Children.only(n);return i.cloneElement(r,{children:typeof s=="function"?s(r.props.children):s})}var Vo=To,vx=ko,bx=Oo;const $o=i.forwardRef((r,n)=>{var o=r,{className:t,children:s}=o,a=j(o,["className","children"]);return e.jsxs(Vo,w(m({ref:n,className:P("relative overflow-hidden",t)},a),{children:[e.jsx(vx,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(qo,{}),e.jsx(bx,{})]}))});$o.displayName=Vo.displayName;const qo=i.forwardRef((r,n)=>{var o=r,{className:t,orientation:s="vertical"}=o,a=j(o,["className","orientation"]);return e.jsx(Ta,w(m({ref:n,orientation:s,className:P("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t)},a),{children:e.jsx(Io,{className:"relative flex-1 rounded-full bg-border"})}))});qo.displayName=Ta.displayName;const na=i.forwardRef((n,a)=>{var r=n,{className:t}=r,s=j(r,["className"]);return e.jsx(un,w(m({ref:a,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t)},s),{children:e.jsx(gc,{className:P("flex items-center justify-center text-current"),children:e.jsx(oa,{className:"h-4 w-4"})})}))});na.displayName=un.displayName;const jx=({isOpen:t,onClose:s,onAgreementsAccepted:a})=>{const{agreementStatus:n,agreements:r,isLoadingStatus:o,isLoadingAgreements:l,isAccepting:d,acceptTermsOfService:u,acceptPrivacyPolicy:h,getAgreementByType:p}=Eo(),[x,c]=i.useState(!1),[f,b]=i.useState(!1),[v,_]=i.useState("terms");I.useEffect(()=>{t&&(c(!1),b(!1),_("terms"))},[t]);const g=p("terms_of_service"),y=p("privacy_policy"),N=n==null?void 0:n.needs_terms_acceptance,C=n==null?void 0:n.needs_privacy_acceptance,D=(N?x:!0)&&(C?f:!0),z=()=>F(void 0,null,function*(){try{N&&x&&(yield u()),C&&f&&(yield h()),a==null||a(),s()}catch(G){console.error("Failed to accept agreements:",G)}}),$=G=>{if(!G)return e.jsxs("div",{className:"flex items-center justify-center h-32 text-muted-foreground",children:[e.jsx(fe,{className:"h-8 w-8 mr-2"}),"Agreement not found"]});const se=G.content.replace(/## (.*)/g,'<h2 class="text-xl font-semibold mb-4">$1</h2>').replace(/### (.*)/g,'<h3 class="text-lg font-medium mb-3">$1</h3>').replace(/\*\*(.*)\*\*/g,"<strong>$1</strong>").replace(/\*(.*)\*/g,"<em>$1</em>").replace(/- (.*)/g,'<li class="ml-4">$1</li>').replace(/\n\n/g,'</p><p class="mb-3">').replace(/^/,'<p class="mb-3">').replace(/$/,"</p>");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:G.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Version ",G.version,"  Effective ",new Date(G.effective_date).toLocaleDateString()]})]})}),e.jsx($o,{className:"h-96 w-full border rounded-md p-4",children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:se}})})]})};return o||l?e.jsx(_t,{open:t,onOpenChange:s,children:e.jsxs(rt,{className:"max-w-4xl",children:[e.jsx(nt,{children:e.jsx(it,{children:"Loading Agreements..."})}),e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})}):e.jsx(_t,{open:t,onOpenChange:s,children:e.jsxs(rt,{className:"max-w-4xl max-h-[90vh]",children:[e.jsx(nt,{children:e.jsxs(it,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"User Agreements"]})}),e.jsxs("div",{className:"space-y-4",children:[(N||C)&&e.jsxs(ms,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(hs,{children:"Please review and accept the following agreements to continue using the application."})]}),e.jsxs(Ht,{value:v,onValueChange:_,className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2",children:[e.jsxs(Me,{value:"terms",className:P("flex items-center gap-2",N&&"data-[state=active]:bg-orange-100 data-[state=active]:text-orange-800"),children:[e.jsx(je,{className:"h-4 w-4"}),"Terms of Service",N&&e.jsx(fe,{className:"h-3 w-3 text-orange-600"})]}),e.jsxs(Me,{value:"privacy",className:P("flex items-center gap-2",C&&"data-[state=active]:bg-orange-100 data-[state=active]:text-orange-800"),children:[e.jsx(bt,{className:"h-4 w-4"}),"Privacy Policy",C&&e.jsx(fe,{className:"h-3 w-3 text-orange-600"})]})]}),e.jsxs(Ie,{value:"terms",className:"mt-4",children:[$(g),N&&e.jsxs("div",{className:"flex items-center space-x-2 mt-4 p-4 border rounded-lg bg-orange-50",children:[e.jsx(na,{id:"accept-terms",checked:x,onCheckedChange:G=>c(G)}),e.jsx(pe,{htmlFor:"accept-terms",className:"text-sm font-medium",children:"I have read and agree to the Terms of Service"})]})]}),e.jsxs(Ie,{value:"privacy",className:"mt-4",children:[$(y),C&&e.jsxs("div",{className:"flex items-center space-x-2 mt-4 p-4 border rounded-lg bg-orange-50",children:[e.jsx(na,{id:"accept-privacy",checked:f,onCheckedChange:G=>b(G)}),e.jsx(pe,{htmlFor:"accept-privacy",className:"text-sm font-medium",children:"I have read and agree to the Privacy Policy"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(T,{variant:"outline",onClick:s,disabled:d,children:"Cancel"}),e.jsx(T,{onClick:z,disabled:!D||d,className:"flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Accepting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4"}),"Accept All"]})})]})]})]})})},yx=({children:t,showOnFirstLogin:s=!0})=>{const{user:a,profile:n}=K(),{agreementStatus:r,needsAgreementAcceptance:o,isLoadingStatus:l,refetchStatus:d}=Eo(),[u,h]=i.useState(!1),[p,x]=i.useState(!1);i.useEffect(()=>{if(!a||l||!n)return;const b=!n.terms_accepted&&!n.privacy_policy_accepted;o&&(b||!s)&&h(!0),x(!0)},[a,n,o,l,s]);const c=()=>{h(!1),d()},f=()=>{o||h(!1)};return!p||l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking agreements..."})]})}):e.jsxs(e.Fragment,{children:[t,e.jsx(jx,{isOpen:u,onClose:f,onAgreementsAccepted:c})]})},wx=()=>{const[t]=mc(),s=Cs(),[a,n]=i.useState(!1),r=t.get("success"),o=t.get("canceled"),l=t.get("error"),d=t.get("session_id");i.useEffect(()=>{F(void 0,null,function*(){if(r==="true"&&d){n(!0);try{const{data:{session:c}}=yield L.auth.getSession();c!=null&&c.access_token&&console.log("Payment successful, session ID:",d),Ne.success("Payment successful! Your subscription has been activated.")}catch(c){console.error("Error processing payment result:",c),Ne.error("Payment successful but there was an issue updating your account. Please contact support.")}finally{n(!1)}}else o==="true"?Ne.info("Payment was canceled. You can try again anytime."):l&&Ne.error(`Payment failed: ${l}`)})},[r,o,l,d]);const u=()=>{s("/dashboard")},h=()=>{s("/subscriptions")},p=()=>{s("/subscriptions")};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(q,{className:"w-full max-w-md",children:[e.jsxs(ne,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Xe,{className:"w-8 h-8 text-blue-600 animate-spin"})}),e.jsx(ie,{className:"text-2xl font-bold text-blue-600",children:"Processing Payment..."})]}),e.jsx(U,{className:"text-center space-y-4",children:e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your payment and activate your subscription."})})]})}):r==="true"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(q,{className:"w-full max-w-md",children:[e.jsxs(ne,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Oe,{className:"w-8 h-8 text-green-600"})}),e.jsx(ie,{className:"text-2xl font-bold text-green-600",children:"Payment Successful!"})]}),e.jsxs(U,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Your subscription has been activated successfully. You now have access to all the features of your chosen plan."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{onClick:u,className:"w-full",children:"Continue to Dashboard"}),e.jsx(T,{onClick:p,variant:"outline",className:"w-full",children:"View Subscription Details"})]})]})]})}):o==="true"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(q,{className:"w-full max-w-md",children:[e.jsxs(ne,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(tt,{className:"w-8 h-8 text-yellow-600"})}),e.jsx(ie,{className:"text-2xl font-bold text-yellow-600",children:"Payment Canceled"})]}),e.jsxs(U,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Your payment was canceled. No charges were made to your account. You can try again anytime."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{onClick:h,className:"w-full",children:"Try Again"}),e.jsx(T,{onClick:u,variant:"outline",className:"w-full",children:"Go to Dashboard"})]})]})]})}):l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(q,{className:"w-full max-w-md",children:[e.jsxs(ne,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(cc,{className:"w-8 h-8 text-red-600"})}),e.jsx(ie,{className:"text-2xl font-bold text-red-600",children:"Payment Failed"})]}),e.jsxs(U,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"There was an error processing your payment. Please try again or contact support if the problem persists."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{onClick:h,className:"w-full",children:"Try Again"}),e.jsx(T,{onClick:u,variant:"outline",className:"w-full",children:"Go to Dashboard"})]})]})]})}):(i.useEffect(()=>{s("/dashboard")},[s]),null)},Nx={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},_x={primary:"border-primary",secondary:"border-secondary-foreground",white:"border-white"},Sx=({size:t="md",variant:s="primary",className:a,text:n})=>e.jsxs("div",{className:P("flex flex-col items-center justify-center",a),children:[e.jsx("div",{className:P("animate-spin rounded-full border-2 border-t-transparent",Nx[t],_x[s])}),n&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground animate-pulse",children:n})]}),Cx=({text:t="Loading..."})=>e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-secondary/20",children:e.jsx("div",{className:"text-center",children:e.jsx(Sx,{size:"lg",text:t})})}),Ex=i.lazy(()=>k(()=>import("./Index-CyTxCnof.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Rx=i.lazy(()=>k(()=>import("./Dashboard-7LXoJmHK.js"),__vite__mapDeps([10,1,2,6,11,3,4,7,8,9]))),Tx=i.lazy(()=>k(()=>import("./AuthCallback-CxJB__ie.js"),__vite__mapDeps([12,1,2,3,4,7,8,6,9]))),Px=i.lazy(()=>k(()=>import("./ResetPassword-Cc7xY40W.js"),__vite__mapDeps([13,1,2,3,4,7,8,6,9]))),or=i.lazy(()=>k(()=>import("./VehicleManagement-DA-T5p96.js"),__vite__mapDeps([14,1,2,15,6,16,17,18,4,3,7,8,9]))),kx=i.lazy(()=>k(()=>import("./VehicleManagementSettings-DYKj2Nim.js"),__vite__mapDeps([19,1,2,3,4,7,8,6,9]))),lr=i.lazy(()=>k(()=>import("./JobManagement-uigml8qA.js"),__vite__mapDeps([20,1,2,16,6,21,15,4,3,7,8,9]))),Dx=i.lazy(()=>k(()=>import("./TimeManagement-rZx6tp30.js"),__vite__mapDeps([22,1,2,16,23,6,8,4,3,7,9]))),cr=i.lazy(()=>k(()=>import("./LicenseManagement-C2TTJien.js"),__vite__mapDeps([24,1,2,16,6,21,3,4,8,7,9]))),dr=i.lazy(()=>k(()=>import("./DriverManagement-B1ceDLK8.js"),__vite__mapDeps([25,1,2,21,6,16,26,4,8,3,7,9]))),Ax=i.lazy(()=>k(()=>import("./DriverDetail-Dyfh_Y7q.js"),__vite__mapDeps([27,1,2,26,3,4,8,7,6,9]))),Mx=i.lazy(()=>k(()=>import("./DocumentsEnhanced-CMNfpAws.js"),__vite__mapDeps([28,1,2,16,3,4,8,7,6,9]))),Ix=i.lazy(()=>k(()=>import("./Unauthorized-C0j7e7NG.js"),__vite__mapDeps([29,1,2,4,3,7,8,6,9]))),ur=i.lazy(()=>k(()=>import("./IncidentReports-DOsk73pg.js"),__vite__mapDeps([30,1,2,4,31,17,32,6,8,3,7,9]))),Ox=i.lazy(()=>k(()=>import("./UserProfile-BP_3Lmee.js"),__vite__mapDeps([33,1,2,6,4,7,8,3,9]))),Lx=i.lazy(()=>k(()=>import("./Profile-DbIuaqE2.js"),__vite__mapDeps([34,1,2,4,7,8,6,3,9]))),zx=i.lazy(()=>k(()=>import("./Settings-CwyuEhub.js"),__vite__mapDeps([35,1,2,4,7,8,6,3,9]))),Fx=i.lazy(()=>k(()=>import("./Subscriptions-Cgi8EHdh.js").then(t=>t.S),__vite__mapDeps([36,1,2,16,11,6,5,4,7]))),Vx=i.lazy(()=>k(()=>import("./SupportTicket-B4ROqbmt.js"),__vite__mapDeps([37,1,2,38,9,4,3,6,7,8]))),mr=i.lazy(()=>k(()=>import("./HelpSupport-9uPzEI5Q.js"),__vite__mapDeps([39,1,2,38,9,4,3,7,8,6]))),$x=i.lazy(()=>k(()=>import("./AdminSupportTickets-CqF-IzDg.js"),__vite__mapDeps([40,1,2,4,7,8,6,3,9]))),qx=i.lazy(()=>k(()=>import("./StaffDirectory-DOyRgxXI.js"),__vite__mapDeps([41,1,2,6,9,4,3,7,8]))),hr=i.lazy(()=>k(()=>import("./ComplianceReportsPage-CwBHMtDU.js"),__vite__mapDeps([42,1,2,43,6,3,4,7,8,9]))),xr=i.lazy(()=>k(()=>import("./VehicleInspections-BUWAkCuB.js"),__vite__mapDeps([44,1,2,6,4,8,7,3,9]))),Ux=i.lazy(()=>k(()=>import("./CustomerAuth-BqWqJ0kK.js"),__vite__mapDeps([45,1,2,3,4,7,8,6,9]))),Bx=i.lazy(()=>k(()=>import("./AuthPage-CISdmbZj.js").then(t=>t.A),__vite__mapDeps([46,1,2,3,47,7,4]))),Hx=i.lazy(()=>k(()=>import("./DriverMobile-CxlP7R4s.js"),__vite__mapDeps([48,1,2,7,8,4,6,3,9]))),Kx=i.lazy(()=>k(()=>import("./RealTimeTracking-ERBcb6U7.js"),__vite__mapDeps([49,1,2,7,8,4,6,3,9]))),Wx=i.lazy(()=>k(()=>import("./Routes-jH6U9F2g.js"),__vite__mapDeps([50,1,2,16,51,6,3,4,7,8,9]))),Gx=i.lazy(()=>k(()=>import("./AnalyticsPage-_1oOKS8_.js"),__vite__mapDeps([52,1,2,6,3,4,7,8,9]))),Yx=i.lazy(()=>k(()=>import("./WorkOrders-ChW6gnJV.js"),__vite__mapDeps([53,1,2,6,3,4,7,8,9]))),pr=i.lazy(()=>k(()=>import("./DefectReports-BEZQwegK.js"),__vite__mapDeps([54,1,2,6,55,4,3,7,8,9]))),fr=i.lazy(()=>k(()=>import("./PartsSupplies-BCP36KiU.js"),__vite__mapDeps([56,1,2,6,3,4,7,8,9])));i.lazy(()=>k(()=>import("./NotificationCenter-rbfhnqvm.js"),__vite__mapDeps([57,1,2,4,3,7,8,6,9])));const Qx=i.lazy(()=>k(()=>import("./VehicleDetails-BbN_oYkK.js"),__vite__mapDeps([58,1,2,15,6,3,4,8,7,9]))),Xx=i.lazy(()=>k(()=>import("./VehicleServicePage-BNoXAlNA.js"),__vite__mapDeps([59,1,2,15,6,3,4,7,8,9]))),Jx=i.lazy(()=>k(()=>import("./FuelManagement-CgvyT27L.js"),__vite__mapDeps([60,1,2,16,61,6,15,3,4,8,7,9]))),Zx=i.lazy(()=>k(()=>import("./Mechanics-CyrdIBkJ.js"),__vite__mapDeps([62,1,2,6,16,4,8,17,31,15,7,3,9]))),ep=i.lazy(()=>k(()=>import("./MechanicDashboard-dHm_hIpL.js"),__vite__mapDeps([63,1,2,6,55,4,3,7,8,9]))),tp=i.lazy(()=>k(()=>import("./TireManagement-CcR-U1C4.js"),__vite__mapDeps([64,1,2,6,16,3,4,7,8,9]))),sp=i.lazy(()=>k(()=>import("./InfringementManagement-e6CcUrWt.js"),__vite__mapDeps([65,1,2,6,16,3,4,7,8,9]))),ap=i.lazy(()=>k(()=>import("./AdminSchedule-D6kmRnWT.js"),__vite__mapDeps([66,1,2,67,6,21,15,51,3,4,8,7,9]))),rp=i.lazy(()=>k(()=>import("./AdminInventoryDashboard-DtPFcIJe.js"),__vite__mapDeps([68,1,2,6,4,3,7,8,9]))),np=i.lazy(()=>k(()=>import("./AdminMechanicRequests-CHwjoOjb.js"),__vite__mapDeps([69,1,2,6,4,7,8,3,9])));i.lazy(()=>k(()=>import("./AdminTrainingManagement-bMfduUDm.js"),__vite__mapDeps([70,1,2,71,8,4,3,7,6,9])));const ip=i.lazy(()=>k(()=>import("./AdvancedNotifications-DZXW0OtF.js"),__vite__mapDeps([72,1,2,4,7,8,6,3,9])));i.lazy(()=>k(()=>import("./MobileNotificationSystem-DzlTXCQY.js"),__vite__mapDeps([73,1,2,4,8,7,6,3,9])));const op=i.lazy(()=>k(()=>Promise.resolve().then(()=>Uh),void 0)),lp=i.lazy(()=>k(()=>import("./AdminDriverDocuments-CPLjMrd2.js"),__vite__mapDeps([74,1,2,21,6,4,8,7,3,9]))),cp=i.lazy(()=>k(()=>import("./PrivacyPolicy-VwBdYyg1.js"),__vite__mapDeps([75,1,2,76,3,4,7,8,6,9]))),dp=i.lazy(()=>k(()=>import("./DataSubjectRights-ClRbRCOW.js"),__vite__mapDeps([77,1,2,76,3,4,7,8,6,9]))),up=i.lazy(()=>k(()=>import("./DPIA-MOSojQWB.js"),__vite__mapDeps([78,1,2,76,3,4,7,8,6,9]))),mp=i.lazy(()=>k(()=>import("./LocationConsent-BYfwyCx7.js"),__vite__mapDeps([79,1,2,76,3,4,7,8,6,9]))),hp=i.lazy(()=>k(()=>import("./RailReplacement-apBRCQxx.js"),__vite__mapDeps([80,1,2,16,3,4,8,7,6,9]))),gr=i.lazy(()=>k(()=>import("./DriverDashboard-CPoicCKd.js"),__vite__mapDeps([81,1,2,6,3,4,8,7,9]))),xp=i.lazy(()=>k(()=>import("./DriverJobs-Dr1rMnMI.js"),__vite__mapDeps([82,1,2,6,4,3,8,7,9]))),pp=i.lazy(()=>k(()=>import("./DriverSchedule-BDZrmASU.js"),__vite__mapDeps([83,1,2,71,8,4,67,6,23,3,7,9]))),fp=i.lazy(()=>k(()=>import("./DriverIncidents-B5f4-98T.js"),__vite__mapDeps([84,1,2,32,6,3,4,8,7,9]))),gp=i.lazy(()=>k(()=>import("./DriverCompliance-BZc-5P4t.js"),__vite__mapDeps([85,1,2,4,3,8,7,6,9]))),vp=i.lazy(()=>k(()=>import("./VehicleChecks-BeKkzTNE.js"),__vite__mapDeps([86,1,2,16,87,6,15,3,4,8,7,9]))),bp=i.lazy(()=>k(()=>import("./EnhancedVehicleCheckPage-C6S0t6QD.js"),__vite__mapDeps([88,1,2,87,6,18,15,89,4,3,7,8,9]))),jp=i.lazy(()=>k(()=>import("./DriverFuelSystem-bZe4ikoP.js"),__vite__mapDeps([90,1,2,16,61,6,15,4,8,7,3,9]))),yp=i.lazy(()=>k(()=>import("./DriverSettings-DNKY8i4-.js"),__vite__mapDeps([91,1,2,4,3,7,8,6,9]))),wp=i.lazy(()=>k(()=>import("./DriverMore-BGYUMw6Y.js"),__vite__mapDeps([92,1,2,3,4,7,8,6,9])));i.lazy(()=>k(()=>import("./VehicleCheckTemplates-CdzOGmcT.js"),__vite__mapDeps([93,1,2,6,89,4,7,8,3,9])));const Np=i.lazy(()=>k(()=>import("./ChildManagement-BnNIL-vA.js"),__vite__mapDeps([94,1,2,95,6,4,3,8,7,9]))),_p=i.lazy(()=>k(()=>import("./ParentDashboard-Gpr2g7pk.js"),__vite__mapDeps([96,1,2,4,97,6,7,8,3,9,98,99,95])));i.lazy(()=>k(()=>import("./ParentLayout-CSSIPZ8O.js"),__vite__mapDeps([100,1,2,3,4,7,8,6,9])));const Sp=i.lazy(()=>k(()=>import("./ParentRouteTracker-CKSj-S23.js"),__vite__mapDeps([97,1,2,6,4,7,8,3,9]))),Cp=i.lazy(()=>k(()=>import("./ParentCommunicationCenter-CrvAYapn.js"),__vite__mapDeps([98,1,2,4,8,7,6,3,9]))),Ep=i.lazy(()=>k(()=>import("./NotificationCenter-Dz3J9WDC.js"),__vite__mapDeps([99,1,2,4,7,8,6,3,9]))),Rp=i.lazy(()=>k(()=>import("./ParentSchedule-C9_ZGNyL.js"),__vite__mapDeps([101,1,2,3,4,7,8,6,9]))),Tp=i.lazy(()=>k(()=>import("./DataProtection-NpCLByqP.js"),__vite__mapDeps([102,1,2,3,4,7,8,6,9]))),Pp=i.lazy(()=>k(()=>import("./RoutePlanning-2_qJ2PB9.js"),__vite__mapDeps([103,1,2,51,6,3,4,7,8,9]))),kp=i.lazy(()=>k(()=>import("./InvoiceManagement-BPmmJBVV.js"),__vite__mapDeps([104,1,2,16,6,3,4,7,8,9]))),Dp=i.lazy(()=>k(()=>import("./QuotationManagement-BrUPwUn-.js"),__vite__mapDeps([105,1,2,16,6,3,4,7,8,9]))),vr=i.lazy(()=>k(()=>import("./EmailManagement-CB0ta_h0.js"),__vite__mapDeps([106,1,2,16,6,3,4,7,8,9]))),es=i.lazy(()=>k(()=>import("./SmartInspections-Cg6OzE6_.js"),__vite__mapDeps([107,1,2,6,4,7,8,3,9])));i.lazy(()=>k(()=>import("./DriverAppDownload-De_GRFWv.js"),__vite__mapDeps([108,1,2,4,7,8,6,3,9])));const br=i.lazy(()=>k(()=>import("./ComplianceDashboard-CxEziNES.js"),__vite__mapDeps([109,1,2,43,6,3,4,7,8,9]))),jr=i.lazy(()=>k(()=>import("./TachographManager-AFjd0vWB.js"),__vite__mapDeps([110,1,2,16,6,4,3,7,8,9]))),yr=i.lazy(()=>k(()=>import("./APIManagement-BmhTwEmm.js"),__vite__mapDeps([111,1,2,16,3,4,7,8,6,9]))),Ap=i.lazy(()=>k(()=>import("./PersonalAssistants-BAWoY7Tu.js"),__vite__mapDeps([112,1,2,6,16,3,4,7,8,9]))),Mp=i.lazy(()=>k(()=>import("./FleetReportsPage-DSddys3W.js"),__vite__mapDeps([113,1,2,6,3,4,7,8,9]))),Ip=i.lazy(()=>k(()=>import("./SystemDiagnostic-BefgvlWn.js"),__vite__mapDeps([114,1,2,4,7,8,6,3,9]))),Op=i.lazy(()=>k(()=>import("./TestPage-DRmKJXAU.js"),__vite__mapDeps([115,1,2,4,7,8,6,3,9]))),Lp=i.lazy(()=>k(()=>import("./UserAgreementTest-Cad29wsT.js"),__vite__mapDeps([116,1,2,7,8,4,6,3,9]))),zp=i.lazy(()=>k(()=>import("./AgreementManagement-PQ57YJpn.js"),__vite__mapDeps([117,1,2,6,47,4,7,8,3,9]))),Fp=i.lazy(()=>k(()=>import("./EmailVerification-CM5zVpU3.js"),__vite__mapDeps([118,1,2,3,47,4,7,8,6,9]))),Vp=i.lazy(()=>k(()=>import("./EmailTest-ClI5eGqr.js"),__vite__mapDeps([119,1,2,47,120,7,4,8,6,3,9]))),$p=i.lazy(()=>k(()=>import("./ApiKeyTest-BEhsUU1f.js"),__vite__mapDeps([121,7,2,1,4,8,6,3,9]))),qp=i.lazy(()=>k(()=>import("./SimpleApiKeyTest-Ds-5Wio2.js"),__vite__mapDeps([122,7,2,1,4,8,6,3,9]))),Up=i.lazy(()=>k(()=>import("./BasicApiTest-Cs4HbThT.js"),__vite__mapDeps([123,7,2,1]))),Bp=i.lazy(()=>k(()=>import("./PasswordResetForm-CoIxm7iE.js"),__vite__mapDeps([124,1,2,3,125,47,4,7,8,6,9]))),Hp=i.lazy(()=>k(()=>import("./EmailSystemTest-_NDqugO5.js"),__vite__mapDeps([126,1,2,47,125,4,7,8,6,3,9]))),Kp=i.lazy(()=>k(()=>import("./ApiKeyDiagnostic-D9L0NzLc.js"),__vite__mapDeps([127,7,2,1]))),Wp=i.lazy(()=>k(()=>import("./ApiKeySetupGuide-DVgEQx4z.js"),__vite__mapDeps([128,1,2]))),Gp=i.lazy(()=>k(()=>import("./EmailWorkingTest-DboPlulP.js"),__vite__mapDeps([129,1,2,47,7,8,4,6,3,9]))),Yp=i.lazy(()=>k(()=>import("./SimpleEmailTest-DXXwThCk.js"),__vite__mapDeps([130,1,2,47,7,8,4,6,3,9]))),Qp=i.lazy(()=>k(()=>import("./EmailSystemWorkingTest-D9RT-aR3.js"),__vite__mapDeps([131,1,2,47,132,7,8,4,6,3,9]))),Xp=i.lazy(()=>k(()=>import("./EdgeFunctionEmailTest-BGxpcSDD.js"),__vite__mapDeps([133,1,2,47,132,7,8,4,6,3,9]))),Jp=i.lazy(()=>k(()=>import("./EdgeFunctionSetupTest-CBkl8DUb.js"),__vite__mapDeps([134,1,2,7,8,4,6,3,9]))),Zp=i.lazy(()=>k(()=>import("./EdgeFunctionDebugTest-BZAOTD4y.js"),__vite__mapDeps([135,1,2,7,8,4,6,3,9]))),ef=new dc({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,refetchOnWindowFocus:!1,retry:1},mutations:{retry:0}}}),tf=()=>e.jsx(Yd,{onError:(t,s)=>{console.error("App-level error:",t,s)},children:e.jsx(uc,{client:ef,children:e.jsxs(Hn,{children:[e.jsx(Bc,{}),e.jsx(bd,{}),e.jsx(hc,{children:e.jsx(Bd,{children:e.jsx(nx,{children:e.jsx(Hd,{children:e.jsx(Kd,{children:e.jsx(i.Suspense,{fallback:e.jsx(Cx,{}),children:e.jsxs(Us,{children:[e.jsx(S,{path:"/admin/smart-inspections",element:e.jsx(Zt,{children:e.jsx(kt,{children:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(es,{})})})})}),e.jsx(S,{path:"/vehicle-check-questions",element:e.jsx(Zt,{children:e.jsx(kt,{children:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(es,{})})})})}),e.jsx(S,{path:"/test-smart-simple",element:e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" Simple SmartInspections Test"}),e.jsx("p",{className:"mb-4",children:"Testing SmartInspections component directly without any wrappers..."}),e.jsx(es,{})]})}),e.jsx(S,{path:"/auth/callback",element:e.jsx(Tx,{})}),e.jsx(S,{path:"/auth",element:e.jsx(Bx,{})}),e.jsx(S,{path:"/reset-password",element:e.jsx(Px,{})}),e.jsx(S,{path:"/customer-auth",element:e.jsx(Ux,{})}),e.jsx(S,{path:"/test-smart",element:e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" Vehicle Check Questions Test"}),e.jsx("p",{className:"mb-4",children:"This is a test route to verify Vehicle Check Questions routing."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Current URL:"})," ",window.location.href]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pathname:"})," ",window.location.pathname]})]}),e.jsxs("div",{className:"mt-4 space-x-2",children:[e.jsx("a",{href:"/admin/smart-inspections",className:"text-blue-600 hover:underline",children:"Go to Vehicle Check Questions (Original)"}),e.jsx("a",{href:"/vehicle-check-questions",className:"text-blue-600 hover:underline",children:"Go to Vehicle Check Questions (New)"}),e.jsx("a",{href:"/inspections",className:"text-blue-600 hover:underline",children:"Go to Regular Inspections"})]})]})}),e.jsx(S,{path:"/debug-smart",element:e.jsx(Zt,{children:e.jsx(kt,{children:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" Vehicle Check Questions Debug"}),e.jsx("p",{className:"mb-4",children:"Testing Vehicle Check Questions component directly..."}),e.jsx(es,{})]})})})})}),e.jsx(S,{path:"/parent/*",element:e.jsx(M,{allowedRoles:["parent"],children:e.jsx(kt,{children:e.jsxs(Us,{children:[e.jsx(S,{path:"dashboard",element:e.jsx(_p,{})}),e.jsx(S,{path:"tracking",element:e.jsx(Sp,{})}),e.jsx(S,{path:"schedule",element:e.jsx(Rp,{})}),e.jsx(S,{path:"children",element:e.jsx(Np,{})}),e.jsx(S,{path:"communication",element:e.jsx(Cp,{})}),e.jsx(S,{path:"notifications",element:e.jsx(Ep,{})})]})})})}),e.jsx(S,{path:"/parent-dashboard",element:e.jsx(M,{allowedRoles:["parent"],children:e.jsx(Ae,{to:"/parent/dashboard",replace:!0})})}),e.jsx(S,{path:"/child-management",element:e.jsx(M,{allowedRoles:["parent"],children:e.jsx(Ae,{to:"/parent/children",replace:!0})})}),e.jsx(S,{path:"/children",element:e.jsx(M,{allowedRoles:["parent"],children:e.jsx(Ae,{to:"/parent/children",replace:!0})})}),e.jsx(S,{path:"/*",element:e.jsx(Zt,{children:e.jsx(kt,{children:e.jsx(yx,{children:e.jsxs(Us,{children:[e.jsx(S,{path:"/",element:e.jsx(Ex,{})}),e.jsx(S,{path:"/dashboard",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(Rx,{})})}),e.jsx(S,{path:"/documents",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver"],children:e.jsx(Mx,{})})}),e.jsx(S,{path:"/mechanic-dashboard",element:e.jsx(M,{allowedRoles:["mechanic"],children:e.jsx(ep,{})})}),e.jsx(S,{path:"/work-orders",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(Yx,{})})}),e.jsx(S,{path:"/defect-reports",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(pr,{})})}),e.jsx(S,{path:"/defects",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(pr,{})})}),e.jsx(S,{path:"/parts-supplies",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(fr,{})})}),e.jsx(S,{path:"/inventory",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(fr,{})})}),e.jsx(S,{path:"/fuel-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Jx,{})})}),e.jsx(S,{path:"/mechanics",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Zx,{})})}),e.jsx(S,{path:"/admin/tire-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(tp,{})})}),e.jsx(S,{path:"/admin/infringement-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(sp,{})})}),e.jsx(S,{path:"/admin-schedule",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(ap,{})})}),e.jsx(S,{path:"/admin/mechanic-requests",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(np,{})})}),e.jsx(S,{path:"/rail-replacement",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(hp,{})})}),e.jsx(S,{path:"/driver-dashboard",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(gr,{})})}),e.jsx(S,{path:"/driver-jobs",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(xp,{})})}),e.jsx(S,{path:"/driver-schedule",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(pp,{})})}),e.jsx(S,{path:"/driver-incidents",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(fp,{})})}),e.jsx(S,{path:"/driver-compliance",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(gp,{})})}),e.jsx(S,{path:"/driver/vehicle-checks",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(vp,{})})}),e.jsx(S,{path:"/driver/enhanced-vehicle-check",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(bp,{})})}),e.jsx(S,{path:"/driver/fuel",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(jp,{})})}),e.jsx(S,{path:"/driver/settings",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(yp,{})})}),e.jsx(S,{path:"/driver/more",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(wp,{})})}),e.jsx(S,{path:"/driver/documents",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(op,{})})}),e.jsx(S,{path:"/driver/dashboard",element:e.jsx(M,{allowedRoles:["driver"],children:e.jsx(gr,{})})}),e.jsx(S,{path:"/data-protection",element:e.jsx(Tp,{})}),e.jsx(S,{path:"/route-planning",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Pp,{})})}),e.jsx(S,{path:"/invoice-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(kp,{})})}),e.jsx(S,{path:"/quotation-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Dp,{})})}),e.jsx(S,{path:"/email-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(vr,{})})}),e.jsx(S,{path:"/compliance-dashboard",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(br,{})})}),e.jsx(S,{path:"/tachograph-manager",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(jr,{})})}),e.jsx(S,{path:"/api-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(yr,{})})}),e.jsx(S,{path:"/personal-assistants",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Ap,{})})}),e.jsx(S,{path:"/admin/inventory",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(rp,{})})}),e.jsx(S,{path:"/admin/emails",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(vr,{})})}),e.jsx(S,{path:"/admin/compliance-dashboard",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(br,{})})}),e.jsx(S,{path:"/admin/tachograph-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(jr,{})})}),e.jsx(S,{path:"/admin/api-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(yr,{})})}),e.jsx(S,{path:"/reports/fleet",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Mp,{})})}),e.jsx(S,{path:"/reports/compliance",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(hr,{})})}),e.jsx(S,{path:"/system-diagnostic",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Ip,{})})}),e.jsx(S,{path:"/test-page",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Op,{})})}),e.jsx(S,{path:"/test-agreements",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Lp,{})})}),e.jsx(S,{path:"/admin/agreements",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(zp,{})})}),e.jsx(S,{path:"/verify-email",element:e.jsx(Fp,{})}),e.jsx(S,{path:"/test-email",element:e.jsx(Vp,{})}),e.jsx(S,{path:"/test-api-key",element:e.jsx($p,{})}),e.jsx(S,{path:"/simple-test",element:e.jsx(qp,{})}),e.jsx(S,{path:"/basic-test",element:e.jsx(Up,{})}),e.jsx(S,{path:"/reset-password",element:e.jsx(Bp,{})}),e.jsx(S,{path:"/email-system-test",element:e.jsx(Hp,{})}),e.jsx(S,{path:"/api-diagnostic",element:e.jsx(Kp,{})}),e.jsx(S,{path:"/api-setup-guide",element:e.jsx(Wp,{})}),e.jsx(S,{path:"/email-working-test",element:e.jsx(Gp,{})}),e.jsx(S,{path:"/simple-email-test",element:e.jsx(Yp,{})}),e.jsx(S,{path:"/email-system-working-test",element:e.jsx(Qp,{})}),e.jsx(S,{path:"/edge-function-email-test",element:e.jsx(Xp,{})}),e.jsx(S,{path:"/edge-function-setup-test",element:e.jsx(Jp,{})}),e.jsx(S,{path:"/edge-function-debug-test",element:e.jsx(Zp,{})}),e.jsx(S,{path:"/vehicles",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(or,{})})}),e.jsx(S,{path:"/vehicle-management",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(or,{})})}),e.jsx(S,{path:"/vehicle-management-settings",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(kx,{})})}),e.jsx(S,{path:"/vehicle-details/:id",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(Qx,{})})}),e.jsx(S,{path:"/vehicle-service",element:e.jsx(M,{allowedRoles:["admin","council","mechanic"],children:e.jsx(Xx,{})})}),e.jsx(S,{path:"/inspections",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver"],children:e.jsx(xr,{})})}),e.jsx(S,{path:"/vehicle-inspections",element:e.jsx(Ae,{to:"/inspections",replace:!0})}),e.jsx(S,{path:"/compliance",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver"],children:e.jsx(xr,{})})}),e.jsx(S,{path:"/test-inspections",element:e.jsxs("div",{children:[e.jsx("h1",{children:"Test Inspections Route Working!"}),e.jsx("p",{children:"If you can see this, routing is working correctly."}),e.jsx("a",{href:"/inspections",children:"Go to real inspections page"})]})}),e.jsx(S,{path:"/jobs",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(lr,{})})}),e.jsx(S,{path:"/job-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(lr,{})})}),e.jsx(S,{path:"/time-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Dx,{})})}),e.jsx(S,{path:"/licenses",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(cr,{})})}),e.jsx(S,{path:"/license-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(cr,{})})}),e.jsx(S,{path:"/drivers",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(dr,{})})}),e.jsx(S,{path:"/drivers/:driverId",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Ax,{})})}),e.jsx(S,{path:"/driver-management",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(dr,{})})}),e.jsx(S,{path:"/admin-driver-documents",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(lp,{})})}),e.jsx(S,{path:"/privacy-policy",element:e.jsx(cp,{})}),e.jsx(S,{path:"/data-rights",element:e.jsx(dp,{})}),e.jsx(S,{path:"/dpia",element:e.jsx(up,{})}),e.jsx(S,{path:"/location-consent",element:e.jsx(mp,{})}),e.jsx(S,{path:"/incidents",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver"],children:e.jsx(ur,{})})}),e.jsx(S,{path:"/incident-reports",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver"],children:e.jsx(ur,{})})}),e.jsx(S,{path:"/profile",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(Lx,{})})}),e.jsx(S,{path:"/user-profile",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(Ox,{})})}),e.jsx(S,{path:"/settings",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(zx,{})})}),e.jsx(S,{path:"/subscriptions",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Fx,{})})}),e.jsx(S,{path:"/payment-result",element:e.jsx(wx,{})}),e.jsx(S,{path:"/support",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(Vx,{})})}),e.jsx(S,{path:"/help",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(mr,{})})}),e.jsx(S,{path:"/help-support",element:e.jsx(M,{allowedRoles:["admin","council","mechanic","driver","parent"],children:e.jsx(mr,{})})}),e.jsx(S,{path:"/admin/support-tickets",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx($x,{})})}),e.jsx(S,{path:"/staff-directory",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(qx,{})})}),e.jsx(S,{path:"/compliance-reports",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(hr,{})})}),e.jsx(S,{path:"/customer-dashboard",element:e.jsx("div",{children:"Customer Dashboard - Under Construction"})}),e.jsx(S,{path:"/driver-mobile",element:e.jsx(M,{allowedRoles:["driver","admin","council"],children:e.jsx(Hx,{})})}),e.jsx(S,{path:"/tracking/:bookingId",element:e.jsx(Kx,{})}),e.jsx(S,{path:"/analytics",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Gx,{})})}),e.jsx(S,{path:"/routes",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(Wx,{})})}),e.jsx(S,{path:"/notifications",element:e.jsx(M,{allowedRoles:["admin","council"],children:e.jsx(ip,{})})}),e.jsx(S,{path:"/unauthorized",element:e.jsx(Ix,{})}),e.jsx(S,{path:"*",element:e.jsx(Ae,{to:"/dashboard",replace:!0})})]})})})})})]})})})})})})})]})})});class sf extends i.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){}render(){return this.state.hasError?this.props.fallback||this.props.children:this.props.children}}const Uo=document.getElementById("root");if(!Uo)throw new Error("Root element not found");const af=mn(Uo);af.render(e.jsx(i.StrictMode,{children:e.jsx(sf,{children:e.jsx(tf,{})})}));export{Gd as $,ms as A,T as B,q as C,_t as D,ns as E,bf as F,mo as G,P as H,Ue as I,Ne as J,Hn as K,pe as L,Sh as M,zd as N,Fd as O,rs as P,Kn as Q,Fh as R,At as S,_a as T,yf as U,wf as V,Nf as W,ha as X,xa as Y,pa as Z,Xn as _,ne as a,$o as a0,Cx as a1,ph as a2,fh as a3,ho as a4,gh as a5,vh as a6,bh as a7,jh as a8,wh as a9,yh as aa,_f as ab,Ef as ac,Sf as ad,Cf as ae,Rf as af,Bh as ag,Hh as ah,Kh as ai,Wh as aj,xo as ak,kf as al,Tf as am,Pf as an,Df as ao,Gh as ap,yo as aq,Af as ar,Qh as as,Eo as at,jx as au,ie as b,Jn as c,U as d,oe as e,Et as f,hs as g,Ht as h,Rt as i,Me as j,Ie as k,Te as l,rt as m,nt as n,it as o,Is as p,gt as q,Mt as r,L as s,vt as t,K as u,re as v,na as w,si as x,wc as y,Yn as z};
