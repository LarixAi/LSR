var f=Object.defineProperty,w=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var d=(t,r,e)=>r in t?f(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,g=(t,r)=>{for(var e in r||(r={}))v.call(r,e)&&d(t,e,r[e]);if(c)for(var e of c(r))b.call(r,e)&&d(t,e,r[e]);return t},l=(t,r)=>w(t,q(r));var u=(t,r,e)=>new Promise((a,n)=>{var y=s=>{try{o(e.next(s))}catch(i){n(i)}},z=s=>{try{o(e.throw(s))}catch(i){n(i)}},o=s=>s.done?a(s.value):Promise.resolve(s.value).then(y,z);o((e=e.apply(t,r)).next())});import{u as E,a as F,b as R}from"./query-vendor-B2F_wWlc.js";import{u as _,s as h,J as m}from"./index-ZwIgorfy.js";const C=()=>{const{user:t,profile:r}=_();return E({queryKey:["routes",r==null?void 0:r.organization_id],queryFn:()=>u(void 0,null,function*(){if(!(r!=null&&r.organization_id))throw new Error("Organization ID is required");console.log("Fetching routes from database...");const{data:e,error:a}=yield h.from("routes").select(`
          *,
          assignments:route_assignments(*)
        `).eq("organization_id",r.organization_id).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching routes:",a),a;return console.log("Fetched routes:",e),e||[]}),enabled:!!(r!=null&&r.organization_id)})},O=()=>{const{profile:t}=_(),r=F();return R({mutationFn:e=>u(void 0,null,function*(){if(!(t!=null&&t.organization_id))throw new Error("Organization information required");const{data:a,error:n}=yield h.from("routes").insert(l(g({},e),{organization_id:t.organization_id})).select().single();if(n)throw n;return a}),onSuccess:()=>{r.invalidateQueries({queryKey:["routes"]}),m.success("Route created successfully")},onError:e=>{console.error("Error creating route:",e),m.error("Failed to create route: "+e.message)}})},S=()=>{const{data:t=[]}=C();return{total:t.length,active:t.filter(e=>e.status==="active").length,inactive:t.filter(e=>e.status==="inactive").length,total_distance:t.reduce((e,a)=>e+(a.distance||0),0),average_distance:t.length>0?t.reduce((e,a)=>e+(a.distance||0),0)/t.length:0,total_estimated_time:t.reduce((e,a)=>e+(a.estimated_time||0),0),average_estimated_time:t.length>0?t.reduce((e,a)=>e+(a.estimated_time||0),0)/t.length:0}};export{S as a,O as b,C as u};
