import{c as U,m as ss,a1 as as,r as i,aQ as ts,aR as ls,aS as is,aT as ns,y as rs,j as e,N as cs,E as ds,B as n,aq as os,aU as oe,am as xe,e as h,g as F,h as M,F as y,k as j,C as me,d as he,aj as xs,O as ms,Q as hs,V,a as je,Y as js,au as us,I as u,ab as w,ac as C,ad as D,ae as b,af as c,aV as ps,aW as gs,aX as fs,aY as vs,q as r,Z as Ns,D as ue,ax as S,n as R,ak as pe,an as ge,a4 as fe,a5 as ve,a6 as Ne,a7 as ye,a8 as ys,aa as ws,s as Cs,S as Ds,aZ as K,U as bs,l as Ss,a_ as ks,a$ as zs,ap as As,b0 as Fs}from"./main-DVuL102c.js";import{T as Ms,a as Ts,b as we,c as p,d as Us,e as g}from"./table-Jjtal2IW.js";import{C as T}from"./checkbox-BmxDZ4wY.js";import{S as Ce}from"./share-2-bPl-vMSa.js";import{T as De}from"./trash-2-uDLx8yM9.js";import{S as be}from"./star-Dk-sf7Q0.js";import{F as Se}from"./file-check-C3HQBoTk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=U("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=U("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=U("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=U("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=U("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);function Gs(){const{user:ze,profile:Ae,loading:Fe}=ss(),{toast:N}=as(),[k,Me]=i.useState(""),[P,Te]=i.useState("all"),[L,Ue]=i.useState("all"),[B,I]=i.useState("list"),[$,Pe]=i.useState("date"),[H,Le]=i.useState("desc"),[Be,Oe]=i.useState(!1),[f,O]=i.useState([]),[_s,_e]=i.useState(!1);i.useState(!1),i.useState(!1);const[Ee,Ve]=i.useState("documents"),[Re,Ie]=i.useState("30d"),[Q,He]=i.useState(!1);i.useState([]),i.useState([]);const[We,z]=i.useState(!1),[qe,X]=i.useState(!1),[Es,Ze]=i.useState(!1),[Vs,Ye]=i.useState(!1),[d,J]=i.useState(null),[l,x]=i.useState({name:"",category:"",description:"",expiryDate:"",tags:"",isConfidential:!1,isPinned:!1,isStarred:!1}),[A,ee]=i.useState([]),[se,W]=i.useState(0),[q,ae]=i.useState(!1),{data:_=[],isLoading:Ge,error:te,refetch:E}=ts(),Ke=ls();is();const le=ns(),m=rs.useMemo(()=>{const s={total:_.length,approved:0,pending:0,rejected:0,expired:0,archived:0,confidential:0,expiringSoon:0,totalSize:0,categories:{}},t=new Date;return t.setDate(t.getDate()+30),_.forEach(a=>{s[a.status]++,a.is_public||s.confidential++,a.expiry_date&&new Date(a.expiry_date)<=t&&s.expiringSoon++;const o=a.category||"other";s.categories[o]=(s.categories[o]||0)+1,s.totalSize+=a.file_size||0}),s},[_]);if(Fe||Ge)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading document management..."})]})});if(!ze||!Ae)return e.jsx(cs,{to:"/auth",replace:!0});if(te)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsx(ds,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"text-red-700 mb-4 text-sm",children:te.message}),e.jsxs(n,{onClick:()=>E(),variant:"outline",className:"w-full",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})});const Z=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,o)).toFixed(2))+" "+a[o]},$e=_.map(s=>{var t;return{id:s.id,name:s.name,type:((t=s.file_type)==null?void 0:t.toUpperCase())||"UNKNOWN",category:s.category||"other",size:Z(s.file_size),uploadedBy:s.uploaded_by||"Unknown",uploadedAt:s.created_at,status:s.status||"pending",expiryDate:s.expiry_date,tags:s.tags||[],isConfidential:!s.is_public,downloadCount:s.download_count||0,isPinned:s.is_pinned||!1,isStarred:s.is_starred||!1,description:s.description,version:s.version,approvalDate:s.approval_date,approvedBy:s.approved_by,rejectionReason:s.rejection_reason}}),ie=[{id:"compliance",name:"Compliance Documents",icon:Ds,color:"text-blue-600",bgColor:"bg-blue-50"},{id:"insurance",name:"Insurance & Certificates",icon:Se,color:"text-green-600",bgColor:"bg-green-50"},{id:"vehicle",name:"Vehicle Documents",icon:K,color:"text-purple-600",bgColor:"bg-purple-50"},{id:"driver",name:"Driver Documents",icon:bs,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"operational",name:"Operational Documents",icon:Ss,color:"text-indigo-600",bgColor:"bg-indigo-50"},{id:"financial",name:"Financial Documents",icon:je,color:"text-emerald-600",bgColor:"bg-emerald-50"},{id:"other",name:"Other Documents",icon:y,color:"text-gray-600",bgColor:"bg-gray-50"}],Y=s=>{const t={approved:{className:"bg-green-100 text-green-800",icon:me},pending:{className:"bg-yellow-100 text-yellow-800",icon:he},rejected:{className:"bg-red-100 text-red-800",icon:zs},expired:{className:"bg-gray-100 text-gray-800",icon:As},active:{className:"bg-blue-100 text-blue-800",icon:Se},archived:{className:"bg-slate-100 text-slate-800",icon:Fs}},a=t[s]||t.pending,o=a.icon;return e.jsxs(R,{className:`${a.className} flex items-center gap-1`,children:[e.jsx(o,{className:"w-3 h-3"}),s]})},G=s=>{switch(s.toLowerCase()){case"pdf":return e.jsx(y,{className:"w-4 h-4 text-red-600"});case"xlsx":case"xls":return e.jsx(K,{className:"w-4 h-4 text-green-600"});case"jpg":case"jpeg":case"png":return e.jsx(ks,{className:"w-4 h-4 text-purple-600"});case"doc":case"docx":return e.jsx(y,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(K,{className:"w-4 h-4 text-gray-600"})}},v=$e.filter(s=>{var de;const t=s.name.toLowerCase().includes(k.toLowerCase())||((de=s.description)==null?void 0:de.toLowerCase().includes(k.toLowerCase()))||s.tags.some(es=>es.toLowerCase().includes(k.toLowerCase())),a=P==="all"||s.category===P,o=L==="all"||s.status===L;return t&&a&&o}).sort((s,t)=>{let a=0;if(s.isPinned&&!t.isPinned?a=-1:!s.isPinned&&t.isPinned?a=1:s.isStarred&&!t.isStarred?a=-1:!s.isStarred&&t.isStarred&&(a=1),a!==0)return a;switch($){case"name":a=s.name.localeCompare(t.name);break;case"date":a=new Date(s.uploadedAt).getTime()-new Date(t.uploadedAt).getTime();break;case"size":a=parseInt(s.size)-parseInt(t.size);break;case"status":a=s.status.localeCompare(t.status);break;case"category":a=s.category.localeCompare(t.category);break;default:a=new Date(s.uploadedAt).getTime()-new Date(t.uploadedAt).getTime()}return H==="asc"?a:-a}),Qe=s=>{O(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},ne=()=>{f.length===v.length?O([]):O(v.map(s=>s.id))},re=s=>{J(s),X(!0)},ce=s=>{J(s),x({name:s.name,category:s.category,description:s.description||"",expiryDate:s.expiryDate||"",tags:s.tags.join(", "),isConfidential:s.isConfidential,isPinned:s.isPinned||!1,isStarred:s.isStarred||!1}),Ze(!0)},Xe=async s=>{try{await le.mutateAsync(s),N({title:"Document deleted",description:"The document has been successfully deleted."}),E()}catch{N({title:"Error",description:"Failed to delete document. Please try again.",variant:"destructive"})}},Je=async()=>{try{await Promise.all(f.map(s=>le.mutateAsync(s))),N({title:"Documents deleted",description:`${f.length} documents have been successfully deleted.`}),O([]),E()}catch{N({title:"Error",description:"Failed to delete some documents. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Document Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize, track, and manage all your transport documents"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:()=>Oe(!Be),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Filters"]}),e.jsxs(n,{onClick:()=>z(!0),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(h,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(M,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z(m.totalSize)," total size"]})]})]}),e.jsxs(h,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(M,{className:"text-sm font-medium",children:"Approved"}),e.jsx(me,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.approved}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.total>0?Math.round(m.approved/m.total*100):0,"% of total"]})]})]}),e.jsxs(h,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(M,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(he,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.pending}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.expiringSoon," expiring soon"]})]})]}),e.jsxs(h,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(M,{className:"text-sm font-medium",children:"Confidential"}),e.jsx(xs,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.confidential}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure documents"})]})]})]}),e.jsxs(ms,{value:Ee,onValueChange:s=>Ve(s),className:"space-y-4",children:[e.jsxs(hs,{className:"grid w-full grid-cols-4",children:[e.jsxs(V,{value:"documents",className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Documents"]}),e.jsxs(V,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Analytics"]}),e.jsxs(V,{value:"workflow",className:"flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),"Workflow"]}),e.jsxs(V,{value:"templates",className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Templates"]})]}),e.jsxs(js,{value:"documents",className:"space-y-4",children:[e.jsx(h,{children:e.jsxs(j,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(u,{placeholder:"Search documents by name, description, or tags...",value:k,onChange:s=>Me(s.target.value),className:"pl-10"})]})}),e.jsxs(w,{value:P,onValueChange:Te,children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(D,{placeholder:"All Categories"})}),e.jsxs(b,{children:[e.jsx(c,{value:"all",children:"All Categories"}),ie.map(s=>e.jsxs(c,{value:s.id,children:[s.name," (",m.categories[s.id]||0,")"]},s.id))]})]}),e.jsxs(w,{value:L,onValueChange:Ue,children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(D,{placeholder:"All Status"})}),e.jsxs(b,{children:[e.jsx(c,{value:"all",children:"All Status"}),e.jsx(c,{value:"approved",children:"Approved"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"rejected",children:"Rejected"}),e.jsx(c,{value:"expired",children:"Expired"}),e.jsx(c,{value:"archived",children:"Archived"})]})]}),e.jsxs(w,{value:Re,onValueChange:s=>Ie(s),children:[e.jsx(C,{className:"w-[120px]",children:e.jsx(D,{placeholder:"Date Range"})}),e.jsxs(b,{children:[e.jsx(c,{value:"7d",children:"Last 7 days"}),e.jsx(c,{value:"30d",children:"Last 30 days"}),e.jsx(c,{value:"90d",children:"Last 90 days"}),e.jsx(c,{value:"1y",children:"Last year"}),e.jsx(c,{value:"all",children:"All time"})]})]}),e.jsxs(w,{value:$,onValueChange:s=>Pe(s),children:[e.jsx(C,{className:"w-[140px]",children:e.jsx(D,{placeholder:"Sort by"})}),e.jsxs(b,{children:[e.jsx(c,{value:"date",children:"Date"}),e.jsx(c,{value:"name",children:"Name"}),e.jsx(c,{value:"size",children:"Size"}),e.jsx(c,{value:"status",children:"Status"}),e.jsx(c,{value:"category",children:"Category"})]})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>Le(H==="asc"?"desc":"asc"),children:H==="asc"?e.jsx(ps,{className:"w-4 h-4"}):e.jsx(gs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(n,{variant:B==="list"?"default":"ghost",size:"sm",onClick:()=>I("list"),children:e.jsx(fs,{className:"w-4 h-4"})}),e.jsx(n,{variant:B==="grid"?"default":"ghost",size:"sm",onClick:()=>I("grid"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx(n,{variant:B==="kanban"?"default":"ghost",size:"sm",onClick:()=>I("kanban"),children:e.jsx(Bs,{className:"w-4 h-4"})})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>He(!Q),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Advanced"]})]}),Q&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"File Size Range"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(u,{placeholder:"Min size (KB)",className:"text-xs"}),e.jsx(u,{placeholder:"Max size (MB)",className:"text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Upload Date Range"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(u,{type:"date",className:"text-xs"}),e.jsx(u,{type:"date",className:"text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Document Owner"}),e.jsxs(w,{children:[e.jsx(C,{className:"text-xs",children:e.jsx(D,{placeholder:"Select owner"})}),e.jsxs(b,{children:[e.jsx(c,{value:"all",children:"All Users"}),e.jsx(c,{value:"me",children:"My Documents"}),e.jsx(c,{value:"team",children:"Team Documents"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Apply Filters"]}),e.jsx(n,{variant:"ghost",size:"sm",children:"Clear All"})]})]})]})}),f.length>0&&e.jsx(h,{className:"border-blue-200 bg-blue-50",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[f.length," document(s) selected"]}),e.jsx(n,{variant:"outline",size:"sm",onClick:ne,children:"Select All"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>_e(!0),children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ye(!0),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(n,{variant:"destructive",size:"sm",onClick:Je,children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})}),B==="list"?e.jsxs(h,{children:[e.jsx(F,{children:e.jsx(M,{children:"Documents"})}),e.jsx(j,{children:e.jsxs(Ms,{children:[e.jsx(Ts,{children:e.jsxs(we,{children:[e.jsx(p,{className:"w-12",children:e.jsx(T,{checked:f.length===v.length&&v.length>0,onCheckedChange:ne})}),e.jsx(p,{children:"Document"}),e.jsx(p,{children:"Category"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Size"}),e.jsx(p,{children:"Uploaded"}),e.jsx(p,{children:"Downloads"}),e.jsx(p,{className:"w-32",children:"Actions"})]})}),e.jsx(Us,{children:v.map(s=>e.jsxs(we,{children:[e.jsx(g,{children:e.jsx(T,{checked:f.includes(s.id),onCheckedChange:()=>Qe(s.id)})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.isPinned&&e.jsx(ke,{className:"w-4 h-4 text-blue-600"}),s.isStarred&&e.jsx(be,{className:"w-4 h-4 text-yellow-600"}),G(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.uploadedBy," • ",S(new Date(s.uploadedAt),"MMM dd, yyyy")]})]})]})}),e.jsx(g,{children:e.jsx(R,{variant:"outline",children:s.category})}),e.jsx(g,{children:Y(s.status)}),e.jsx(g,{children:s.size}),e.jsx(g,{children:S(new Date(s.uploadedAt),"MMM dd, yyyy")}),e.jsx(g,{children:s.downloadCount}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>re(s),children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ce(s),children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Xe(s.id),children:e.jsx(De,{className:"w-4 h-4"})})]})})]},s.id))})]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:v.map(s=>e.jsx(h,{className:"relative group hover:shadow-lg transition-shadow",children:e.jsxs(j,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.size})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.isPinned&&e.jsx(ke,{className:"w-4 h-4 text-blue-600"}),s.isStarred&&e.jsx(be,{className:"w-4 h-4 text-yellow-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{variant:"outline",className:"text-xs",children:s.category}),Y(s.status)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Uploaded by ",s.uploadedBy]}),e.jsx("div",{children:S(new Date(s.uploadedAt),"MMM dd, yyyy")}),e.jsxs("div",{children:[s.downloadCount," downloads"]})]}),e.jsxs("div",{className:"flex gap-1 pt-2",children:[e.jsxs(n,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>re(s),children:[e.jsx(pe,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs(n,{variant:"ghost",size:"sm",className:"flex-1",onClick:()=>ce(s),children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})]})},s.id))}),v.length===0&&e.jsx(h,{children:e.jsx(j,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:k||P!=="all"||L!=="all"?"Try adjusting your search or filters":"Get started by uploading your first document"}),e.jsxs(n,{onClick:()=>z(!0),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})})})]})]}),e.jsx(fe,{open:We,onOpenChange:z,children:e.jsxs(ve,{className:"max-w-2xl",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Upload Document"}),e.jsx(ys,{children:"Upload a new document to your organization's document library."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Ps,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop files here, or click to select"}),e.jsx(n,{variant:"outline",onClick:()=>{var s;return(s=document.getElementById("file-upload"))==null?void 0:s.click()},children:"Choose Files"}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,className:"hidden",onChange:s=>ee(Array.from(s.target.files||[]))})]}),q&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[se,"%"]})]}),e.jsx(ws,{value:se})]}),A.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Selected Files:"}),e.jsx("div",{className:"space-y-1",children:A.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Z(s.size)})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",children:"Document Name"}),e.jsx(u,{id:"name",value:l.name,onChange:s=>x({...l,name:s.target.value}),placeholder:"Enter document name"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"category",children:"Category"}),e.jsxs(w,{value:l.category,onValueChange:s=>x({...l,category:s}),children:[e.jsx(C,{children:e.jsx(D,{placeholder:"Select category"})}),e.jsx(b,{children:ie.map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(Cs,{id:"description",value:l.description,onChange:s=>x({...l,description:s.target.value}),placeholder:"Enter document description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),e.jsx(u,{id:"expiryDate",type:"date",value:l.expiryDate,onChange:s=>x({...l,expiryDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"tags",children:"Tags (Optional)"}),e.jsx(u,{id:"tags",value:l.tags,onChange:s=>x({...l,tags:s.target.value}),placeholder:"Enter tags separated by commas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"confidential",checked:l.isConfidential,onCheckedChange:s=>x({...l,isConfidential:s})}),e.jsx(r,{htmlFor:"confidential",children:"Mark as confidential"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"pinned",checked:l.isPinned,onCheckedChange:s=>x({...l,isPinned:s})}),e.jsx(r,{htmlFor:"pinned",children:"Pin document"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"starred",checked:l.isStarred,onCheckedChange:s=>x({...l,isStarred:s})}),e.jsx(r,{htmlFor:"starred",children:"Star document"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(n,{onClick:async()=>{var s,t;ae(!0),W(0);try{for(let a=0;a<=100;a+=10)W(a),await new Promise(o=>setTimeout(o,100));await Ke.mutateAsync({name:l.name,category:l.category,description:l.description,expiry_date:l.expiryDate||null,tags:l.tags.split(",").map(a=>a.trim()).filter(a=>a),is_public:!l.isConfidential,is_pinned:l.isPinned,is_starred:l.isStarred,file_type:((s=A[0])==null?void 0:s.type)||"application/octet-stream",file_size:((t=A[0])==null?void 0:t.size)||0}),N({title:"Document uploaded",description:"Your document has been successfully uploaded."}),z(!1),ee([]),x({name:"",category:"",description:"",expiryDate:"",tags:"",isConfidential:!1,isPinned:!1,isStarred:!1}),E()}catch{N({title:"Upload failed",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{ae(!1),W(0)}},disabled:q||A.length===0||!l.name||!l.category,children:q?"Uploading...":"Upload Document"})]})]})}),e.jsx(fe,{open:qe,onOpenChange:X,children:e.jsxs(ve,{className:"max-w-4xl",children:[e.jsx(Ne,{children:e.jsx(ye,{children:"Document Details"})}),d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[G(d.type),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.type," • ",d.size]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Category"}),e.jsx("p",{className:"text-sm",children:d.category})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Status"}),e.jsx("div",{className:"mt-1",children:Y(d.status)})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Uploaded By"}),e.jsx("p",{className:"text-sm",children:d.uploadedBy})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Upload Date"}),e.jsx("p",{className:"text-sm",children:S(new Date(d.uploadedAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Downloads"}),e.jsx("p",{className:"text-sm",children:d.downloadCount})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Confidential"}),e.jsx("p",{className:"text-sm",children:d.isConfidential?"Yes":"No"})]}),d.expiryDate&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Expiry Date"}),e.jsx("p",{className:"text-sm",children:S(new Date(d.expiryDate),"MMM dd, yyyy")})]}),d.approvalDate&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Approved On"}),e.jsx("p",{className:"text-sm",children:S(new Date(d.approvalDate),"MMM dd, yyyy")})]})]}),d.description&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm mt-1",children:d.description})]}),d.tags.length>0&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:d.tags.map((s,t)=>e.jsx(R,{variant:"secondary",className:"text-xs",children:s},t))})]}),d.rejectionReason&&e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium text-red-600",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm mt-1 text-red-600",children:d.rejectionReason})]})]})]})})]})}export{Gs as default};
