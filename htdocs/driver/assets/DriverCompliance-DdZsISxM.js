import{c as Oe,m as ge,r as x,J as G,a3 as K,j as e,B as g,e as T,g as ee,h as se,k as R,aq as pe,n as I,C as te,a0 as ze,x as Pe,N as be,E as X,S as Z,a9 as re,O as Ae,Q as qe,V as ce,Y as le,F as oe,ax as q,a4 as Ve,as as He,ak as Je,a5 as Be,a6 as Ge,a7 as Qe,D as we,aa as We,d as Ye,f as Xe,az as Ze}from"./main-DVuL102c.js";import{W as Ke,a as es}from"./wifi-CoafhbsB.js";import{A as H}from"./award-D5hdS4i_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),me={ENABLED:!0,LOG_LEVEL:"verbose",TIMEOUT_WARNING_THRESHOLD:3e3,TIMEOUT_ERROR_THRESHOLD:8e3,PERFORMANCE_MONITORING:!0,NETWORK_MONITORING:!0,ERROR_TRACKING:!0},i=(a,r,l)=>{const y=new Date().toISOString(),n=me.LOG_LEVEL;if(a==="error"||a==="warn"||a==="info"||n==="debug"){const C=`[DriverCompliance:${a.toUpperCase()}]`,D=`${y} ${C} ${r}`;a==="error"?console.error(D,l):a==="warn"?console.warn(D,l):console.log(D,l)}},f={startTime:0,checkpoints:new Map,start(a){this.startTime=performance.now(),this.checkpoints.set(a,this.startTime),i("debug",`⏱️ Performance monitoring started: ${a}`)},checkpoint(a){const r=performance.now(),l=this.checkpoints.get(a)||this.startTime,y=r-l;return i("debug",`⏱️ Checkpoint [${a}]: ${y.toFixed(2)}ms`),y>me.TIMEOUT_WARNING_THRESHOLD&&i("warn",`⚠️ Slow operation detected [${a}]: ${y.toFixed(2)}ms`),y},end(a){const r=this.checkpoint(a);return i("info",`✅ Operation completed [${a}]: ${r.toFixed(2)}ms`),r>me.TIMEOUT_ERROR_THRESHOLD&&i("error",`❌ Operation timeout [${a}]: ${r.toFixed(2)}ms`),r}},_e={async checkConnection(){try{const a=performance.now(),r=await fetch("/api/health",{method:"HEAD",cache:"no-cache"}),l=performance.now()-a;return i("debug",`🌐 Network check: ${l.toFixed(2)}ms, status: ${r.status}`),{connected:r.ok,latency:l}}catch(a){return i("warn","🌐 Network check failed:",a),{connected:!1,latency:0}}},async checkSupabaseConnection(){try{const a=performance.now(),{data:r,error:l}=await G.from("profiles").select("id").limit(1),y=performance.now()-a;return i("debug",`🔗 Supabase connection check: ${y.toFixed(2)}ms, error: ${(l==null?void 0:l.message)||"none"}`),{connected:!l,latency:y,error:l}}catch(a){return i("warn","🔗 Supabase connection check failed:",a),{connected:!1,latency:0,error:a}}}},de={activeRequests:new Map,async deduplicate(a,r){if(this.activeRequests.has(a))return i("debug",`🔄 Request deduplicated: ${a}`),this.activeRequests.get(a);const l=r().finally(()=>{this.activeRequests.delete(a),i("debug",`🧹 Request cleaned up: ${a}`)});return this.activeRequests.set(a,l),i("debug",`🆕 New request started: ${a}`),l},clear(){this.activeRequests.clear(),i("debug","🧹 All requests cleared")}},$e=()=>{const{user:a,profile:r}=ge(),[l,y]=x.useState(null),[n,C]=x.useState([]),[D,k]=x.useState([]),[J,ae]=x.useState([]),[Q,_]=x.useState([]),[E,L]=x.useState([]),[F,w]=x.useState(!0),[U,$]=x.useState(null),O=x.useRef(!1),v=x.useRef(null),V=x.useRef(null),z=x.useRef(0),P=x.useRef(0),M=x.useRef(new Set),d=x.useRef(!1),s=x.useRef(null),m=(h,N,c)=>{const o=setTimeout(()=>{i("warn",`⏰ Timeout triggered: ${c}`),M.current.delete(o),h()},N);return M.current.add(o),o},p=x.useCallback(async()=>{if(d.current){i("warn","🔄 Fetch already in progress, skipping duplicate request");return}const h=++z.current,N=Date.now();if(i("info",`🔄 Starting compliance data fetch #${h}`,{userId:a==null?void 0:a.id,profileId:r==null?void 0:r.id,timestamp:new Date().toISOString()}),!(a!=null&&a.id)||!(r!=null&&r.id)){i("warn","❌ No user or profile found, skipping compliance data fetch",{userId:a==null?void 0:a.id,profileId:r==null?void 0:r.id,fetchId:h}),w(!1);return}s.current=new AbortController,d.current=!0;try{if(me.NETWORK_MONITORING){i("debug","🌐 Checking network connectivity...");const c=await _e.checkConnection(),o=await _e.checkSupabaseConnection();if(i("info","🌐 Network status:",{networkStatus:c,supabaseStatus:o}),!c.connected||!o.connected){i("error","❌ Network connectivity issues detected",{networkStatus:c,supabaseStatus:o}),$("Network connectivity issues detected"),w(!1);return}}f.start(`fetch_compliance_data_${h}`),w(!0),$(null),P.current=N,await de.deduplicate(`compliance_fetch_${a.id}_${r.id}`,async()=>{i("debug","📊 Fetching driver licenses..."),f.start("fetch_licenses");let c=[];try{const{data:t,error:u}=await G.from("driver_licenses").select("*").eq("driver_id",a.id).eq("organization_id",r.organization_id).order("created_at",{ascending:!1});f.end("fetch_licenses"),u?(i("warn","driver_licenses table not found, using empty data",{error:u}),c=[]):(i("debug",`✅ Fetched ${(t==null?void 0:t.length)||0} driver licenses`),c=t||[])}catch(t){f.end("fetch_licenses"),i("warn","driver_licenses table not accessible, using empty data",{error:t}),c=[]}i("debug","📚 Fetching training completions..."),f.start("fetch_training");let o=[];try{const{data:t,error:u}=await G.from("training_completions").select("*").eq("driver_id",a.id).eq("organization_id",r.organization_id).order("completion_date",{ascending:!1});f.end("fetch_training"),u?(i("warn","training_completions table not found, using empty data",{error:u}),o=[]):(i("debug",`✅ Fetched ${(t==null?void 0:t.length)||0} training records`),o=t||[])}catch(t){f.end("fetch_training"),i("warn","training_completions table not accessible, using empty data",{error:t}),o=[]}i("debug","⚠️ Fetching compliance violations..."),f.start("fetch_violations");let b=[];try{const{data:t,error:u}=await G.from("compliance_violations").select("*").eq("driver_id",a.id).eq("organization_id",r.organization_id).order("violation_date",{ascending:!1});f.end("fetch_violations"),u?(i("warn","compliance_violations table not found, using empty data",{error:u}),b=[]):(i("debug",`✅ Fetched ${(t==null?void 0:t.length)||0} violation records`),b=t||[])}catch(t){f.end("fetch_violations"),i("warn","compliance_violations table not accessible, using empty data",{error:t}),b=[]}i("debug","📈 Fetching compliance scores..."),f.start("fetch_scores");let W=[];try{const{data:t,error:u}=await G.from("driver_compliance_scores").select("*").eq("driver_id",a.id).eq("organization_id",r.organization_id).order("last_assessment_date",{ascending:!1});f.end("fetch_scores"),u?(i("warn","driver_compliance_scores table not found, using empty data",{error:u}),W=[]):(i("debug",`✅ Fetched ${(t==null?void 0:t.length)||0} compliance score records`),W=t||[])}catch(t){f.end("fetch_scores"),i("warn","driver_compliance_scores table not accessible, using empty data",{error:t}),W=[]}i("debug","🧮 Processing data..."),f.start("process_data");const xe=(c==null?void 0:c.filter(t=>t.status==="valid"&&new Date(t.expiry_date)>new Date))||[],ne=(c==null?void 0:c.filter(t=>new Date(t.expiry_date)<=new Date))||[];i("debug",`📋 License processing: ${xe.length} valid, ${ne.length} expired`);const he=[],ts=[],B=(b==null?void 0:b.filter(t=>t.status==="active"||t.status==="pending"))||[],je=(b==null?void 0:b.filter(t=>t.status==="resolved"||t.status==="closed"))||[];i("debug",`⚠️ Violation processing: ${B.length} active, ${je.length} resolved`);let S=0;if(W.length>0)S=W[0].overall_score,i("debug",`📊 Using existing compliance score: ${S}`);else{i("debug","📊 Calculating new compliance score...");const u=Math.min(xe.length*8,40);if(S+=u,o.length>0){const Fe=he.length/5*100,Ue=Math.round(Fe/100*30);S+=Ue}const A=B.length===0?20:0;S+=A;const ie=Math.min(je.length*2,10);S+=ie,S=Math.min(S,100),i("debug",`📊 Calculated compliance score: ${S}`,{licensePoints:u,trainingPoints:o.length>0?Math.round(he.length/5*30):0,noViolationsBonus:A,resolvedViolationPoints:ie})}let Y="low";ne.length>0||B.length>2?Y="high":(B.length>0||ne.length>0)&&(Y="medium"),i("debug",`⚠️ Risk level determined: ${Y}`,{expiredLicenses:ne.length,activeViolations:B.length});const Ce=(o==null?void 0:o.length)>0?new Date(Math.max(...o.map(t=>new Date(t.completion_date).getTime()))):new Date,fe={overallScore:Math.round(S),riskLevel:Y.charAt(0).toUpperCase()+Y.slice(1),lastAssessment:new Date().toISOString(),trainingProgress:o.length>0?Math.round(he.length/5*100):0,certificationsCount:xe.length,infringementsCount:B.length,nextTrainingDue:Ce.toISOString().split("T")[0]};y(fe),i("debug","✅ Compliance data set:",fe),L(c||[]);const ye=(b||[]).map(t=>({id:t.id,violationType:t.violation_type||"Unknown",description:t.description||"No description provided",severity:t.severity||"moderate",violationDate:t.violation_date||t.created_at,status:t.status||"pending",resolvedDate:t.resolved_at}));k(ye),i("debug",`✅ Processed ${ye.length} violations`);const Te={"driver-safety-fundamentals":"Driver Safety Fundamentals","vehicle-inspection-training":"Daily Vehicle Inspection Procedures","emergency-procedures":"Emergency Response Procedures","legal-compliance":"Legal Compliance and Documentation","passenger-assistance":"Passenger Assistance Training","defensive-driving":"Defensive Driving Techniques","first-aid":"First Aid Training","customer-service":"Customer Service Excellence"};let ue=[];o.length>0&&(ue=Object.entries(Te).map(([t,u])=>{const A=o==null?void 0:o.find(ie=>ie.training_type===t);return A?{id:t,name:u,status:A.status,progress:A.progress||(A.status==="completed"?100:0),dueDate:A.due_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}:{id:t,name:u,status:"not_started",progress:0,dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}})),C(ue),i("debug",`✅ Generated ${ue.length} training modules`);const Re=(c||[]).slice(0,2).map(t=>({id:`license_${t.id}`,type:"license",description:`License ${t.license_number} ${t.status==="valid"?"verified":"expired"}`,timestamp:t.created_at,status:t.status==="valid"?"success":"warning"})),ke=(o||[]).slice(0,2).map(t=>({id:`training_${t.id}`,type:"training",description:`Training ${t.training_type} ${t.status}`,timestamp:t.completion_date||t.created_at,status:t.status==="completed"?"success":"info"})),Se=(b||[]).slice(0,2).map(t=>({id:`violation_${t.id}`,type:"violation",description:`Compliance violation: ${t.violation_type}`,timestamp:t.violation_date||t.created_at,status:"warning"})),Ne=[...Re,...ke,...Se].sort((t,u)=>new Date(u.timestamp).getTime()-new Date(t.timestamp).getTime()).slice(0,5);_(Ne),i("debug",`✅ Generated ${Ne.length} recent activities`);const Ie=(c||[]).map(t=>({id:`license_${t.id}`,type:"License Verification",date:t.created_at,status:t.status==="valid"?"Verified":"Expired",description:`${t.license_type} License: ${t.license_number}`})),Me=(o||[]).map(t=>({id:`training_${t.id}`,type:"Training Completion",date:t.completion_date||t.created_at,status:t.status==="completed"?"Completed":"In Progress",description:`Training: ${t.training_type}`})),Ee=(b||[]).map(t=>({id:`violation_${t.id}`,type:"Compliance Review",date:t.violation_date||t.created_at,status:t.status==="active"?"Under Review":"Resolved",description:`${t.violation_type}: ${t.description}`})),ve=[...Ie,...Me,...Ee].sort((t,u)=>new Date(u.date).getTime()-new Date(t.date).getTime()).slice(0,10);ae(ve),i("debug",`✅ Generated ${ve.length} compliance history records`),f.end("process_data"),f.end(`fetch_compliance_data_${h}`);const Le=Date.now()-N;return i("info",`✅ Compliance data fetch #${h} completed successfully`,{duration:`${Le}ms`,fetchId:h,timestamp:new Date().toISOString()}),{success:!0}})}catch(c){const o=Date.now()-N;i("error",`❌ Compliance data fetch #${h} failed`,{error:c.message,stack:c.stack,duration:`${o}ms`,fetchId:h,timestamp:new Date().toISOString()}),$(c.message||"Failed to load compliance data"),K.error("Failed to load compliance data")}finally{w(!1),d.current=!1,s.current=null}},[a==null?void 0:a.id,r==null?void 0:r.id]);x.useEffect(()=>{i("info","🔄 useDriverCompliance effect triggered",{userId:a==null?void 0:a.id,profileId:r==null?void 0:r.id,timestamp:new Date().toISOString()});const h=a==null?void 0:a.id,N=r==null?void 0:r.id;(h!==v.current||N!==V.current)&&(i("info","🔄 User or profile changed, updating refs and fetching data",{oldUserId:v.current,newUserId:h,oldProfileId:V.current,newProfileId:N}),v.current=h,V.current=N,O.current=!1,de.clear());const c=m(()=>{F&&d.current&&(i("warn","⚠️ Compliance data fetch timeout, aborting request",{fetchAttempts:z.current,lastFetchTime:P.current,currentTime:Date.now()}),s.current&&s.current.abort(),w(!1),$("Failed to load compliance data: timeout"),d.current=!1)},15e3,"compliance_fetch_timeout");return h&&N&&!O.current&&!d.current?(O.current=!0,p()):h||m(()=>{a!=null&&a.id||(i("warn","❌ No user found after delay, stopping loading"),w(!1))},2e3,"no_user_timeout"),()=>{clearTimeout(c),M.current.delete(c)}},[a==null?void 0:a.id,r==null?void 0:r.id]);const j=x.useCallback(()=>{i("info","🔄 Manual refresh triggered"),O.current=!1,d.current=!1,s.current&&s.current.abort(),de.clear(),p()},[p]);return i("debug","📊 Current compliance state",{loading:F,error:U,hasData:!!l,fetchAttempts:z.current,lastFetchTime:P.current,activeTimeouts:M.current.size,isFetching:d.current,activeRequests:de.activeRequests.size}),{complianceData:l,trainingModules:n,violations:D,complianceHistory:J,recentActivity:Q,driverLicenses:E,loading:F,error:U,refreshData:j}},ss=()=>{var P,M;const{user:a,profile:r}=ge(),{complianceData:l,trainingModules:y,violations:n,complianceHistory:C,recentActivity:D,driverLicenses:k,loading:J,error:ae,refreshData:Q}=$e(),[_,E]=x.useState({fetchAttempts:0,lastFetchTime:0,averageResponseTime:0,networkLatency:0,supabaseLatency:0,errorCount:0,timeoutCount:0,activeConnections:0}),[L,F]=x.useState(!1),[w,U]=x.useState({online:navigator.onLine,supabaseConnected:!1,lastCheck:Date.now()}),[$,O]=x.useState([]);x.useEffect(()=>{const d=async()=>{const m=navigator.onLine;let p=!1;try{const j=performance.now(),{data:h,error:N}=await G.from("profiles").select("id").limit(1),c=performance.now()-j;p=!N,E(o=>({...o,supabaseLatency:c}))}catch{p=!1}U({online:m,supabaseConnected:p,lastCheck:Date.now()})},s=setInterval(d,5e3);return d(),()=>clearInterval(s)},[]),x.useEffect(()=>{const d=console.log,s=console.warn,m=console.error,p=/⏱️ Checkpoint \[([^\]]+)\]: ([\d.]+)ms/;return console.log=(...j)=>{d.apply(console,j);const h=j.join(" "),N=h.match(p);if(N){const[,c,o]=N;O(b=>[...b.slice(-9),{timestamp:Date.now(),operation:c,duration:parseFloat(o),success:!0}])}h.includes("❌ Compliance data fetch")&&E(c=>({...c,errorCount:c.errorCount+1})),h.includes("⏰ Timeout triggered: compliance_fetch_timeout")&&E(c=>({...c,timeoutCount:c.timeoutCount+1}))},console.warn=(...j)=>{s.apply(console,j)},console.error=(...j)=>{m.apply(console,j)},()=>{console.log=d,console.warn=s,console.error=m}},[]);const v=d=>d?"text-green-500":"text-red-500",V=d=>d?e.jsx(te,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"}),z=$.length>0?$.reduce((d,s)=>d+s.duration,0)/$.length:0;return L?e.jsx("div",{className:"fixed bottom-4 right-4 z-50 w-96 max-h-96 overflow-auto",children:e.jsxs(T,{className:"bg-background/95 backdrop-blur-sm border-2 border-orange-200",children:[e.jsx(ee,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(se,{className:"text-sm flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Compliance Debug Panel"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(g,{onClick:()=>F(!1),size:"sm",variant:"ghost",children:"×"})})]})}),e.jsxs(R,{className:"space-y-4 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Network Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:v(w.online),children:w.online?e.jsx(Ke,{className:"w-3 h-3"}):e.jsx(es,{className:"w-3 h-3"})}),e.jsx("span",{className:v(w.supabaseConnected),children:V(w.supabaseConnected)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Network Latency:"}),e.jsxs("span",{className:"ml-1",children:[_.networkLatency.toFixed(0),"ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Supabase Latency:"}),e.jsxs("span",{className:"ml-1",children:[_.supabaseLatency.toFixed(0),"ms"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Performance"}),e.jsx(g,{onClick:Q,size:"sm",variant:"outline",className:"h-6 px-2",children:e.jsx(pe,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Response Time:"}),e.jsxs("span",{className:z>3e3?"text-orange-500":"text-green-500",children:[z.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fetch Attempts:"}),e.jsx("span",{children:_.fetchAttempts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Errors:"}),e.jsx("span",{className:"text-red-500",children:_.errorCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Timeouts:"}),e.jsx("span",{className:"text-orange-500",children:_.timeoutCount})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Current State"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Loading:"}),e.jsx(I,{variant:J?"destructive":"secondary",className:"text-xs",children:J?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Has Data:"}),e.jsx(I,{variant:l?"default":"secondary",className:"text-xs",children:l?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Error:"}),e.jsx("span",{className:"text-red-500 max-w-32 truncate",children:ae||"None"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Data Counts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:["Licenses: ",k.length]}),e.jsxs("div",{children:["Training: ",y.length]}),e.jsxs("div",{children:["Violations: ",n.length]}),e.jsxs("div",{children:["History: ",C.length]}),e.jsxs("div",{children:["Activity: ",D.length]})]})]}),$.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"Recent Operations"}),e.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:$.slice(-3).map((d,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"truncate max-w-24",children:d.operation}),e.jsxs("span",{className:d.duration>3e3?"text-orange-500":"text-green-500",children:[d.duration.toFixed(0),"ms"]})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"font-medium",children:"User Info"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"User ID:"}),e.jsxs("span",{className:"font-mono text-xs truncate max-w-24",children:[(P=a==null?void 0:a.id)==null?void 0:P.slice(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Profile ID:"}),e.jsxs("span",{className:"font-mono text-xs truncate max-w-24",children:[(M=r==null?void 0:r.id)==null?void 0:M.slice(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Role:"}),e.jsx("span",{children:(r==null?void 0:r.role)||"Unknown"})]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})}):e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs(g,{onClick:()=>F(!0),size:"sm",variant:"outline",className:"bg-background/80 backdrop-blur-sm",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Debug"]})})},ls=()=>{const{user:a,profile:r,session:l,loading:y}=ge(),n=Pe(),{complianceData:C,trainingModules:D,violations:k,complianceHistory:J,recentActivity:ae,driverLicenses:Q,loading:_,error:E,refreshData:L}=$e(),F=async(s,m)=>{try{const p=await fetch("https://dznbihypzmvcmradijqn.supabase.co/functions/v1/update-training-progress",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l==null?void 0:l.access_token}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bmJpaHlwem12Y21yYWRpanFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NzQsImV4cCI6MjA3MDUzMDU3NH0.dS4mQBL0q_JhsZQF14KKB0nL2f3H--2hPoxXzitPOgo"},body:JSON.stringify({training_id:s,progress:m,status:m===100?"completed":"in_progress"}),mode:"cors",credentials:"omit"});if(!p.ok){const h=await p.text();throw new Error(`HTTP ${p.status}: ${h}`)}const j=await p.json();K.success("Training progress updated!"),L()}catch(p){K.error(p instanceof Error?p.message:"Failed to update training progress")}},w=async s=>{try{const m=await fetch("https://dznbihypzmvcmradijqn.supabase.co/functions/v1/update-training-progress",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l==null?void 0:l.access_token}`,apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6bmJpaHlwem12Y21yYWRpanFuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NzQsImV4cCI6MjA3MDUzMDU3NH0.dS4mQBL0q_JhsZQF14KKB0nL2f3H--2hPoxXzitPOgo"},body:JSON.stringify({training_id:s,progress:100,status:"completed",completion_date:new Date().toISOString()}),mode:"cors",credentials:"omit"});if(!m.ok){const j=await m.text();throw new Error(`HTTP ${m.status}: ${j}`)}const p=await m.json();K.success("Training completed successfully!"),L()}catch(m){K.error(m instanceof Error?m.message:"Failed to complete training")}};if(y||_)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading compliance dashboard..."})]})});if(!a||!r)return e.jsx(be,{to:"/auth",replace:!0});if(r.role!=="driver")return e.jsx(be,{to:"/dashboard",replace:!0});if(E)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Compliance Data"}),e.jsx("p",{className:"text-red-700 mb-4",children:E}),e.jsxs(g,{onClick:L,variant:"outline",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})});const U=(s,m)=>s==="expired"||m<0?e.jsx(I,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Expired"}):s==="due_soon"||m<=30&&m>0?e.jsx(I,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Due Soon"}):s==="valid"?e.jsx(I,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Valid"}):s==="completed"?e.jsx(I,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Completed"}):s==="in_progress"?e.jsx(I,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"In Progress"}):s==="due"?e.jsx(I,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Due"}):e.jsx(I,{variant:"secondary",children:s}),$=s=>{switch(s){case"license":return e.jsx(Z,{className:"w-5 h-5 text-blue-600"});case"medical":return e.jsx(oe,{className:"w-5 h-5 text-green-600"});case"training":return e.jsx(H,{className:"w-5 h-5 text-purple-600"});case"background":return e.jsx(te,{className:"w-5 h-5 text-orange-600"});case"inspection":return e.jsx(te,{className:"w-5 h-5 text-red-600"});default:return e.jsx(oe,{className:"w-5 h-5"})}},O=s=>s>=90?"text-green-600":s>=75?"text-yellow-600":"text-red-600",v=Q.map(s=>{const m=new Date(s.expiry_date),p=new Date,j=Math.ceil((m.getTime()-p.getTime())/(1e3*60*60*24));return{id:s.id,name:`${s.license_type} License`,type:"license",status:j>0?"valid":"expired",expiryDate:s.expiry_date,daysUntilExpiry:j,lastUpdated:s.created_at,documentUrl:"#",licenseNumber:s.license_number,issuingAuthority:s.issuing_authority}}),V=v.filter(s=>s.status==="valid"&&s.daysUntilExpiry>0),z=v.filter(s=>s.status==="expired"||s.daysUntilExpiry<=0),P=v.filter(s=>s.status==="valid"&&s.daysUntilExpiry<=30&&s.daysUntilExpiry>0),M=v.length>0||D.length>0||k.length>0||J.length>0,d=e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:`${n?"space-y-3":"flex justify-between items-center"}`,children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`${n?"text-2xl":"text-3xl"} font-bold text-gray-900 flex items-center gap-2 sm:gap-3`,children:[e.jsx(Z,{className:`${n?"w-6 h-6":"w-8 h-8"} text-green-600`}),"Driver Compliance"]}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Track your compliance status and certifications"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${n?"w-full":"space-x-2"}`,children:[e.jsxs(g,{onClick:L,variant:"outline",disabled:_,size:n?"sm":"default",className:n?"flex-1":"",children:[e.jsx(pe,{className:`w-4 h-4 ${n?"mr-1":"mr-2"} ${_?"animate-spin":""}`}),n?"Refresh":"Refresh Data"]}),e.jsxs(g,{className:`bg-green-600 hover:bg-green-700 ${n?"flex-1":""}`,size:n?"sm":"default",children:[e.jsx(re,{className:`w-4 h-4 ${n?"mr-1":"mr-2"}`}),n?"Update":"Update Documents"]})]})]}),!M&&!_&&e.jsx(T,{className:"bg-gradient-to-r from-blue-50 to-green-50",children:e.jsxs(R,{className:`${n?"p-6":"p-8"} text-center`,children:[e.jsx(Z,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Welcome to Your Compliance Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Your compliance dashboard is ready! Once you have licenses, training records, or compliance data, it will appear here for easy tracking and management."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(g,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Upload Documents"]}),e.jsxs(g,{variant:"outline",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"View Training"]})]})]})}),e.jsx(T,{className:"bg-gradient-to-r from-green-50 to-blue-50",children:e.jsx(R,{className:`${n?"p-4":"p-6"}`,children:e.jsxs("div",{className:`${n?"flex flex-col space-y-4":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:n?"text-center":"",children:[e.jsx("h2",{className:`${n?"text-lg":"text-xl"} font-semibold mb-2`,children:"Overall Compliance Score"}),e.jsxs("div",{className:`${n?"text-3xl":"text-4xl"} font-bold ${O(C.overallScore)}`,children:[C.overallScore,"%"]}),e.jsx("p",{className:`text-gray-600 mt-2 ${n?"text-sm":""}`,children:C.overallScore>=90?"Excellent compliance status":C.overallScore>=75?"Good compliance status":"Compliance attention needed"})]}),e.jsx("div",{className:`${n?"flex justify-center":"text-right"}`,children:e.jsxs("div",{className:`${n?"w-24 h-24":"w-32 h-32"} relative`,children:[e.jsxs("svg",{className:`${n?"w-24 h-24":"w-32 h-32"} transform -rotate-90`,viewBox:"0 0 36 36",children:[e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"2",strokeDasharray:`${C.overallScore}, 100`})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(te,{className:`${n?"w-6 h-6":"w-8 h-8"} text-green-600`})})]})})]})})}),e.jsxs("div",{className:`grid ${n?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[e.jsx(T,{children:e.jsx(R,{className:`${n?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${n?"gap-2":"gap-3"}`,children:[e.jsx(te,{className:`${n?"w-6 h-6":"w-8 h-8"} text-green-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${n?"text-xs":"text-sm"} text-gray-600`,children:"Valid Documents"}),e.jsx("p",{className:`${n?"text-lg":"text-2xl"} font-bold text-green-600`,children:V.length})]})]})})}),e.jsx(T,{children:e.jsx(R,{className:`${n?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${n?"gap-2":"gap-3"}`,children:[e.jsx(X,{className:`${n?"w-6 h-6":"w-8 h-8"} text-yellow-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${n?"text-xs":"text-sm"} text-gray-600`,children:"Due Soon"}),e.jsx("p",{className:`${n?"text-lg":"text-2xl"} font-bold text-yellow-600`,children:P.length})]})]})})}),e.jsx(T,{children:e.jsx(R,{className:`${n?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${n?"gap-2":"gap-3"}`,children:[e.jsx(X,{className:`${n?"w-6 h-6":"w-8 h-8"} text-red-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${n?"text-xs":"text-sm"} text-gray-600`,children:"Expired"}),e.jsx("p",{className:`${n?"text-lg":"text-2xl"} font-bold text-red-600`,children:z.length})]})]})})}),e.jsx(T,{children:e.jsx(R,{className:`${n?"p-3":"p-6"}`,children:e.jsxs("div",{className:`flex items-center ${n?"gap-2":"gap-3"}`,children:[e.jsx(H,{className:`${n?"w-6 h-6":"w-8 h-8"} text-blue-600`}),e.jsxs("div",{children:[e.jsx("p",{className:`${n?"text-xs":"text-sm"} text-gray-600`,children:"Active Violations"}),e.jsx("p",{className:`${n?"text-lg":"text-2xl"} font-bold`,children:k.filter(s=>s.status==="active"||s.status==="pending").length})]})]})})})]}),e.jsxs(Ae,{defaultValue:"documents",className:`${n?"space-y-4":"space-y-6"}`,children:[e.jsxs(qe,{className:`grid w-full ${n?"grid-cols-2 gap-1":"grid-cols-4"}`,children:[e.jsx(ce,{value:"documents",className:n?"text-xs px-2":"",children:n?"Docs":"Documents"}),e.jsx(ce,{value:"training",className:n?"text-xs px-2":"",children:"Training"}),e.jsx(ce,{value:"driving-record",className:n?"text-xs px-2":"",children:n?"Record":"Driving Record"}),e.jsx(ce,{value:"reminders",className:n?"text-xs px-2":"",children:"Reminders"})]}),e.jsx(le,{value:"documents",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Required Documents"]})}),e.jsx(R,{children:v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload your licenses and certifications to track compliance"}),e.jsxs(g,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})]}):e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[$(s.type),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expires: ",q(new Date(s.expiryDate),"MM/dd/yyyy"),s.daysUntilExpiry>0?` (${s.daysUntilExpiry} days remaining)`:` (Expired ${Math.abs(s.daysUntilExpiry)} days ago)`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[U(s.status,s.daysUntilExpiry),e.jsxs(Ve,{children:[e.jsx(He,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",children:e.jsx(Je,{className:"w-4 h-4"})})}),e.jsxs(Be,{children:[e.jsx(Ge,{children:e.jsxs(Qe,{children:[s.name," Details"]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{children:U(s.status,s.daysUntilExpiry)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expires:"}),e.jsx("span",{children:q(new Date(s.expiryDate),"MM/dd/yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("span",{children:q(new Date(s.lastUpdated),"MM/dd/yyyy")})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(g,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Download"]}),e.jsxs(g,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Update"]})]})]})]})})]})]})]})]}),s.daysUntilExpiry<=30&&s.daysUntilExpiry>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Renewal Required"})]}),e.jsxs("p",{className:"text-yellow-700 mt-1",children:["This document expires in ",s.daysUntilExpiry," days. Please renew to maintain compliance."]})]}),s.daysUntilExpiry<0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Document Expired"})]}),e.jsxs("p",{className:"text-red-700 mt-1",children:["This document expired ",Math.abs(s.daysUntilExpiry)," days ago. Immediate renewal required to maintain driving privileges."]})]})]},s.id))})})]})}),e.jsx(le,{value:"training",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Training & Certifications"]})}),e.jsx(R,{children:D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Training Records"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Complete training modules to improve your compliance score"}),e.jsxs(g,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Start Training"]})]}):e.jsx("div",{className:"space-y-4",children:D.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Training Module"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[U(s.status),s.status==="completed"&&e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),"Certificate"]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.status==="completed"&&e.jsxs("p",{children:["Completed: 100% | Progress: ",s.progress,"%"]}),s.status==="in_progress"&&e.jsxs("div",{children:[e.jsxs("p",{children:["Due: ",s.dueDate?q(new Date(s.dueDate),"MM/dd/yyyy"):"No due date"]}),e.jsx(We,{value:s.progress,className:"mt-2"}),e.jsxs("p",{className:"text-xs mt-1",children:[s.progress,"% complete"]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>F(s.id,Math.min(s.progress+25,100)),children:"Update Progress"}),s.progress>=100&&e.jsx(g,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>w(s.id),children:"Mark Complete"})]})]}),s.status==="not_started"&&e.jsxs("p",{children:["Due: ",s.dueDate?q(new Date(s.dueDate),"MM/dd/yyyy"):"No due date"]})]})]},s.id))})})]})}),e.jsx(le,{value:"driving-record",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Compliance Violations"]})}),e.jsxs(R,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Active Violations"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:k.filter(s=>s.status==="active"||s.status==="pending").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Current active violations"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Resolved Violations"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:k.filter(s=>s.status==="resolved"||s.status==="closed").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Successfully resolved violations"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Recent Violations"}),k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Clean Record"}),e.jsx("p",{className:"text-green-700",children:"No compliance violations found"})]}):e.jsx("div",{className:"space-y-3",children:k.slice(0,5).map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.violationType}),e.jsxs("p",{className:"text-sm text-gray-600",children:[q(new Date(s.violationDate),"MM/dd/yyyy")," • ",s.description]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(I,{className:`${s.severity==="critical"?"bg-red-100 text-red-800":s.severity==="major"?"bg-orange-100 text-orange-800":s.severity==="minor"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"} hover:bg-opacity-80 mt-1`,children:s.severity}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s.status})]})]})},s.id))})]})]})]})}),e.jsx(le,{value:"reminders",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(ee,{children:e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Upcoming Reminders"]})}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-4",children:[v.filter(s=>s.daysUntilExpiry<=60&&s.daysUntilExpiry>0).sort((s,m)=>s.daysUntilExpiry-m.daysUntilExpiry).map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[s.name," Renewal"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",q(new Date(s.expiryDate),"MM/dd/yyyy")," (",s.daysUntilExpiry," days)"]})]})]}),e.jsx(g,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:"Set Reminder"})]})},s.id)),D.filter(s=>s.status==="not_started").map(s=>e.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[s.name," Training"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",q(new Date(s.dueDate),"MM/dd/yyyy")]})]})]}),e.jsx(g,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Schedule Training"})]})},s.id))]})})]})})]})]});return e.jsxs(e.Fragment,{children:[n?e.jsx(Ze,{children:d}):d,e.jsx(ss,{})]})};export{ls as default};
