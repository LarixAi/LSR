import{bd as Me,bq as se,r as l,j as e,br as Oe,bs as Le,bg as ae,bt as ze,bu as Ie,bi as Ue,bv as Ve,bw as qe,bx as Be,by as te,bz as He,bA as Ye,aB as b,bB as re,a1 as We,m as ne,a4 as Ge,a5 as Qe,a6 as Je,a7 as Ke,S as Xe,a8 as Ze,e as x,k as h,b5 as le,b6 as ie,b7 as ce,n as M,O as es,Q as ss,V as H,Y,g as V,h as q,i as W,q as F,B as C,ai as as,b9 as ts,E as rs,T as ns,C as ls,a as is,l as oe,U as B,F as cs,W as os,u as ds,H as ms,J as U,au as G,I as xs,ab as Q,ac as J,ad as K,ae as X,af as T,v as hs,P as gs,M as ps}from"./main-DVuL102c.js";import{S as k}from"./switch-Ct9qaOvk.js";import{S as us}from"./save-D41s1EFm.js";import{C as fs}from"./clipboard-list-wLQIWV0d.js";import{A as vs}from"./arrow-left-DxhsiT2w.js";import{U as js}from"./user-check-ocIY3ZDi.js";var de="AlertDialog",[bs,Is]=Me(de,[se]),v=se(),me=a=>{const{__scopeAlertDialog:t,...r}=a,i=v(t);return e.jsx(Ye,{...i,...r,modal:!0})};me.displayName=de;var _s="AlertDialogTrigger",Ns=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,c=v(r);return e.jsx(Oe,{...c,...i,ref:t})});Ns.displayName=_s;var ys="AlertDialogPortal",xe=a=>{const{__scopeAlertDialog:t,...r}=a,i=v(t);return e.jsx(He,{...i,...r})};xe.displayName=ys;var ws="AlertDialogOverlay",he=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,c=v(r);return e.jsx(Le,{...c,...i,ref:t})});he.displayName=ws;var P="AlertDialogContent",[As,Cs]=bs(P),ge=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,children:i,...c}=a,g=v(r),d=l.useRef(null),S=ae(t,d),_=l.useRef(null);return e.jsx(ze,{contentName:P,titleName:pe,docsSlug:"alert-dialog",children:e.jsx(As,{scope:r,cancelRef:_,children:e.jsxs(Ie,{role:"alertdialog",...g,...c,ref:S,onOpenAutoFocus:Ue(c.onOpenAutoFocus,m=>{var N;m.preventDefault(),(N=_.current)==null||N.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(Ve,{children:i}),e.jsx(Ds,{contentRef:d})]})})})});ge.displayName=P;var pe="AlertDialogTitle",ue=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,c=v(r);return e.jsx(qe,{...c,...i,ref:t})});ue.displayName=pe;var fe="AlertDialogDescription",ve=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,c=v(r);return e.jsx(Be,{...c,...i,ref:t})});ve.displayName=fe;var Ss="AlertDialogAction",je=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,c=v(r);return e.jsx(te,{...c,...i,ref:t})});je.displayName=Ss;var be="AlertDialogCancel",_e=l.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...i}=a,{cancelRef:c}=Cs(be,r),g=v(r),d=ae(t,c);return e.jsx(te,{...g,...i,ref:d})});_e.displayName=be;var Ds=({contentRef:a})=>{const t=`\`${P}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${P}\` by passing a \`${fe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${P}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var i;document.getElementById((i=a.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Ts=me,Ps=xe,Ne=he,ye=ge,we=je,Ae=_e,Ce=ue,Se=ve;const Rs=Ts,$s=Ps,De=l.forwardRef(({className:a,...t},r)=>e.jsx(Ne,{className:b("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:r}));De.displayName=Ne.displayName;const Te=l.forwardRef(({className:a,...t},r)=>e.jsxs($s,{children:[e.jsx(De,{}),e.jsx(ye,{ref:r,className:b("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));Te.displayName=ye.displayName;const Pe=({className:a,...t})=>e.jsx("div",{className:b("flex flex-col space-y-2 text-center sm:text-left",a),...t});Pe.displayName="AlertDialogHeader";const Re=({className:a,...t})=>e.jsx("div",{className:b("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});Re.displayName="AlertDialogFooter";const $e=l.forwardRef(({className:a,...t},r)=>e.jsx(Ce,{ref:r,className:b("text-lg font-semibold",a),...t}));$e.displayName=Ce.displayName;const Ee=l.forwardRef(({className:a,...t},r)=>e.jsx(Se,{ref:r,className:b("text-sm text-muted-foreground",a),...t}));Ee.displayName=Se.displayName;const Fe=l.forwardRef(({className:a,...t},r)=>e.jsx(we,{ref:r,className:b(re(),a),...t}));Fe.displayName=we.displayName;const ke=l.forwardRef(({className:a,...t},r)=>e.jsx(Ae,{ref:r,className:b(re({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));ke.displayName=Ae.displayName;const Z=[{key:"jobs",label:"Job Management",icon:fs,description:"Access to create, view, and manage jobs and assignments"},{key:"vehicles",label:"Vehicle Logs",icon:ns,description:"Vehicle inspections, maintenance logs, and fleet management"},{key:"inspections",label:"Inspection Tools",icon:ls,description:"Vehicle inspection forms and safety checklists"},{key:"reports",label:"Report Access",icon:is,description:"Analytics, compliance reports, and business intelligence"},{key:"settings",label:"Settings Panel",icon:oe,description:"System configuration and administrative settings"},{key:"communications",label:"Parent Communications",icon:B,description:"Parent portal, messaging, and notification management"},{key:"documents",label:"Document Management",icon:cs,description:"Upload, review, and approve driver documents"},{key:"maintenance",label:"Maintenance System",icon:os,description:"Maintenance requests, scheduling, and inventory"}],ee={driver:{label:"Driver Template",permissions:{jobs:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},reports:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},settings:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},communications:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},documents:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1},maintenance:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1}}},mechanic:{label:"Mechanic Template",permissions:{jobs:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1},reports:{can_view:!0,can_create:!1,can_edit:!1,can_delete:!1},settings:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},communications:{can_view:!1,can_create:!1,can_edit:!1,can_delete:!1},documents:{can_view:!0,can_create:!0,can_edit:!1,can_delete:!1},maintenance:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!1}}},admin:{label:"Admin Template",permissions:{jobs:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},vehicles:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},inspections:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},reports:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},settings:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},communications:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},documents:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0},maintenance:{can_view:!0,can_create:!0,can_edit:!0,can_delete:!0}}}},Es=({user:a,open:t,onOpenChange:r})=>{const{toast:i}=We(),{profile:c}=ne(),[g,d]=l.useState({}),[S,_]=l.useState(!1),[m,N]=l.useState(!1),[R,j]=l.useState(!1),[p,y]=l.useState(!1),$=(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="council";l.useEffect(()=>{a&&t&&D()},[a,t]);const D=async()=>{if(a){_(!0);try{const n={};Z.forEach(({key:s})=>{n[s]={permission_type:s,can_view:!1,can_create:!1,can_edit:!1,can_delete:!1,is_active:!0}}),d(n),y(!1)}catch(n){console.error("Error fetching permissions:",n),i({title:"Error",description:"Failed to load user permissions.",variant:"destructive"})}finally{_(!1)}}},w=(n,s,o)=>{d(u=>({...u,[n]:{...u[n],[s]:o}})),y(!0)},O=n=>{const s=ee[n],o={...g};Object.entries(s.permissions).forEach(([u,f])=>{o[u]={...o[u],...f}}),d(o),y(!0),i({title:"Template Applied",description:`${s.label} permissions have been applied.`})},L=async()=>{if(a){N(!0);try{console.log("Permissions would be saved:",g),i({title:"Permissions Updated",description:`${a.first_name} ${a.last_name}'s permissions have been saved successfully.`}),y(!1),j(!1)}catch(n){console.error("Error saving permissions:",n),i({title:"Save Failed",description:n.message||"Failed to save permissions. Please try again.",variant:"destructive"})}finally{N(!1)}}},z=()=>{D(),y(!1)},E=(n,s)=>`${(n==null?void 0:n.charAt(0))||""}${(s==null?void 0:s.charAt(0))||""}`.toUpperCase(),I=n=>({admin:"bg-red-100 text-red-800",council:"bg-purple-100 text-purple-800",driver:"bg-blue-100 text-blue-800",mechanic:"bg-green-100 text-green-800",parent:"bg-gray-100 text-gray-800",support:"bg-orange-100 text-orange-800"})[n]||"bg-gray-100 text-gray-800";return $?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{open:t,onOpenChange:r,children:e.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Je,{children:[e.jsxs(Ke,{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{children:"User Authorization Settings"})]}),e.jsxs(Ze,{children:["Manage ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name,"'s access permissions and role-based controls."]})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(le,{className:"w-16 h-16",children:[e.jsx(ie,{src:a.avatar_url,alt:`${a.first_name} ${a.last_name}`}),e.jsx(ce,{className:"bg-blue-100 text-blue-800 text-lg font-semibold",children:E(a.first_name,a.last_name)})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[a.first_name," ",a.last_name]}),e.jsx("p",{className:"text-gray-600",children:a.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(M,{className:I(a.role),variant:"secondary",children:a.role.charAt(0).toUpperCase()+a.role.slice(1)}),e.jsx(M,{variant:a.employment_status==="active"?"default":"secondary",children:a.employment_status})]})]})]})})}),e.jsxs(es,{defaultValue:"permissions",className:"w-full",children:[e.jsxs(ss,{className:"grid w-full grid-cols-2",children:[e.jsx(H,{value:"permissions",children:"Permissions"}),e.jsx(H,{value:"templates",children:"Quick Templates"})]}),e.jsx(Y,{value:"permissions",className:"space-y-4",children:S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading permissions..."})]}):e.jsx("div",{className:"grid gap-4",children:Z.map(({key:n,label:s,icon:o,description:u})=>{const f=g[n];return f?e.jsxs(x,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(q,{className:"text-base",children:s}),e.jsx(W,{className:"text-sm",children:u})]})]})}),e.jsx(h,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{id:`${n}-view`,checked:f.can_view,onCheckedChange:A=>w(n,"can_view",A)}),e.jsx(F,{htmlFor:`${n}-view`,className:"text-sm",children:"View"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{id:`${n}-create`,checked:f.can_create,onCheckedChange:A=>w(n,"can_create",A)}),e.jsx(F,{htmlFor:`${n}-create`,className:"text-sm",children:"Create"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{id:`${n}-edit`,checked:f.can_edit,onCheckedChange:A=>w(n,"can_edit",A)}),e.jsx(F,{htmlFor:`${n}-edit`,className:"text-sm",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{id:`${n}-delete`,checked:f.can_delete,onCheckedChange:A=>w(n,"can_delete",A)}),e.jsx(F,{htmlFor:`${n}-delete`,className:"text-sm",children:"Delete"})]})]})})]},n):null})})}),e.jsx(Y,{value:"templates",className:"space-y-4",children:e.jsxs(x,{children:[e.jsxs(V,{children:[e.jsx(q,{children:"Permission Templates"}),e.jsx(W,{children:"Apply predefined permission sets based on common roles. This will override current settings."})]}),e.jsx(h,{className:"space-y-4",children:Object.entries(ee).map(([n,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Standard permissions for ",n," role users"]})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>O(n),children:"Apply Template"})]},n))})]})})]}),e.jsx(as,{}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx(C,{onClick:()=>j(!0),disabled:!p||m,className:"flex-1",children:m?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(us,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]})}),e.jsxs(C,{variant:"outline",onClick:z,disabled:!p||m,className:"flex-1",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(C,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})]}),p&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(rs,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-800",children:"You have unsaved changes. Don't forget to save your updates."})]})]})]})}),e.jsx(Rs,{open:R,onOpenChange:j,children:e.jsxs(Te,{children:[e.jsxs(Pe,{children:[e.jsx($e,{children:"Confirm Permission Changes"}),e.jsxs(Ee,{children:["Are you sure you want to save these permission changes for ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name,"? This will update their access rights immediately and the changes will be logged for security purposes."]})]}),e.jsxs(Re,{children:[e.jsx(ke,{children:"Cancel"}),e.jsx(Fe,{onClick:L,disabled:m,children:m?"Saving...":"Save Changes"})]})]})})]}):null},Us=()=>{const a=ds(),{profile:t}=ne(),[r,i]=l.useState(""),[c,g]=l.useState("all"),[d,S]=l.useState("active"),[_,m]=l.useState(null),[N,R]=l.useState(!1),j=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="council",{data:p=[],isLoading:y,refetch:$}=ms({queryKey:["staff-directory",t==null?void 0:t.organization_id],queryFn:async()=>{if(!(t!=null&&t.organization_id))return[];const{data:s,error:o}=await U.from("profiles").select("id, first_name, last_name, email, phone, role, employment_status, avatar_url, city, state").eq("organization_id",t.organization_id).eq("is_active",!0).order("first_name");if(o)throw o;return s},enabled:!!(t!=null&&t.organization_id)});l.useEffect(()=>{if(!(t!=null&&t.organization_id))return;const s=U.channel("staff-directory-changes").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`organization_id=eq.${t.organization_id}`},()=>{$()}).subscribe();return()=>{U.removeChannel(s)}},[t==null?void 0:t.organization_id,$]);const D=l.useMemo(()=>p.filter(s=>{const o=r===""||`${s.first_name} ${s.last_name}`.toLowerCase().includes(r.toLowerCase())||s.email.toLowerCase().includes(r.toLowerCase())||s.role.toLowerCase().includes(r.toLowerCase()),u=c==="all"||s.role===c,f=d==="all"||s.employment_status===d;return o&&u&&f}),[p,r,c,d]),w=l.useMemo(()=>[...new Set(p.map(o=>o.role))].sort(),[p]),O=s=>({admin:"bg-red-500/10 text-red-700 border border-red-200",council:"bg-purple-500/10 text-purple-700 border border-purple-200",driver:"bg-blue-500/10 text-blue-700 border border-blue-200",mechanic:"bg-green-500/10 text-green-700 border border-green-200",parent:"bg-gray-500/10 text-gray-700 border border-gray-200",support:"bg-orange-500/10 text-orange-700 border border-orange-200"})[s]||"bg-gray-500/10 text-gray-700 border border-gray-200",L=s=>({active:"bg-green-500/10 text-green-700 border border-green-200",pending:"bg-yellow-500/10 text-yellow-700 border border-yellow-200",inactive:"bg-gray-500/10 text-gray-700 border border-gray-200",terminated:"bg-red-500/10 text-red-700 border border-red-200"})[s]||"bg-gray-500/10 text-gray-700 border border-gray-200",z=(s,o)=>`${(s==null?void 0:s.charAt(0))||""}${(o==null?void 0:o.charAt(0))||""}`.toUpperCase(),E=s=>s.charAt(0).toUpperCase()+s.slice(1),I=s=>(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="council"||s==="admin"||s==="council",n=s=>{j&&(m(s),R(!0))};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading staff directory..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4 mb-6",children:e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>a("/settings"),className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Settings"})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(B,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Staff Directory"})]}),e.jsx("p",{className:"text-gray-600",children:"Connect with your team members and colleagues"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Staff"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.filter(s=>s.employment_status==="active").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:w.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Roles"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Showing"})]})})})]}),e.jsxs(x,{className:"bg-white shadow-lg",children:[e.jsx(V,{children:e.jsxs(q,{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:"Search & Filter"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search Staff"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(xs,{placeholder:"Search by name, email, or role...",value:r,onChange:s=>i(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Role"}),e.jsxs(Q,{value:c,onValueChange:g,children:[e.jsx(J,{children:e.jsx(K,{})}),e.jsxs(X,{children:[e.jsx(T,{value:"all",children:"All Roles"}),w.map(s=>e.jsx(T,{value:s,children:E(s)},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Status"}),e.jsxs(Q,{value:d,onValueChange:S,children:[e.jsx(J,{children:e.jsx(K,{})}),e.jsxs(X,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:D.map(s=>e.jsx(x,{className:"bg-white shadow-sm hover:shadow-lg transition-all duration-200 border border-gray-200 hover:border-gray-300",children:e.jsx(h,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(le,{className:"w-12 h-12 md:w-16 md:h-16",children:[e.jsx(ie,{src:s.avatar_url,alt:`${s.first_name} ${s.last_name}`}),e.jsx(ce,{className:"bg-blue-100 text-blue-800 text-sm md:text-lg font-semibold",children:z(s.first_name,s.last_name)})]}),j&&e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>n(s),className:"p-1 h-8 w-8 hover:bg-gray-100",children:e.jsx(oe,{className:"w-4 h-4 text-gray-400 hover:text-blue-600"})})]}),e.jsx("div",{children:e.jsxs("h3",{className:`font-semibold text-base md:text-lg text-gray-900 leading-tight ${j?"cursor-pointer hover:text-blue-600 transition-colors":""}`,onClick:()=>j&&n(s),children:[s.first_name," ",s.last_name]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{className:`${O(s.role)} text-xs font-medium px-2 py-1`,children:E(s.role)}),e.jsx(M,{className:`${L(s.employment_status)} text-xs font-medium px-2 py-1`,children:s.employment_status})]}),I(s.role)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(hs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate text-xs md:text-sm",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(gs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs md:text-sm",children:s.phone})]})]}),(s.city||s.state)&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ps,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{className:"truncate text-xs md:text-sm",children:[s.city,s.city&&s.state&&", ",s.state]})]})]})})},s.id))}),D.length===0&&e.jsx(x,{className:"bg-white shadow-lg",children:e.jsx(h,{className:"pt-12 pb-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Staff Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members match your current search and filter criteria."}),e.jsx(C,{variant:"outline",onClick:()=>{i(""),g("all"),S("active")},children:"Clear Filters"})]})})}),e.jsx(x,{className:"bg-blue-50 border-blue-200",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(js,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Privacy Notice:"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Contact information is only displayed based on your role and organization permissions. This directory is for internal use only and should not be shared outside the organization."})]})]})})}),e.jsx(Es,{user:_,open:N,onOpenChange:R})]})})};export{Us as default};
