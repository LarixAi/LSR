import{c as Me,m as _e,r as _,a3 as k,J as h,a1 as qe,j as e,H as Ne,n as d,e as x,k as u,aa as M,U as ve,b as Ie,ap as we,C as q,O as Te,Q as Le,V as D,aO as Ve,S as ye,aP as I,l as be,Y as E,g as p,b5 as Oe,b6 as He,b7 as $e,v as Be,B as m,an as Je,h as w,K as J,i as y,d as Qe,ai as j,q as a,I as g,M as Ge,A as Ke,z as Ye,aM as Q,ak as G}from"./main-DVuL102c.js";import{S as l}from"./switch-Ct9qaOvk.js";import{D as K}from"./database-BkhDcnAk.js";import{S as T}from"./save-D41s1EFm.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=Me("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),We=()=>{const{user:U,profile:s,refreshProfile:C}=_e(),[L,F]=_.useState(!1);return{updating:L,updateProfile:async P=>{if(!U||!s)return k.error("You must be logged in to update your profile"),{error:new Error("Not authenticated")};F(!0);try{const{error:n}=await h.from("profiles").update(P).eq("id",U.id);if(n)throw n;return await C(),k.success("Profile updated successfully"),{error:null}}catch(n){return console.error("Error updating profile:",n),k.error("Failed to update profile: "+n.message),{error:n}}finally{F(!1)}},updatePassword:async P=>{if(!U)return k.error("You must be logged in to update your password"),{error:new Error("Not authenticated")};try{const{error:n}=await h.auth.updateUser({password:P});if(n)throw n;return k.success("Password updated successfully"),{error:null}}catch(n){return console.error("Error updating password:",n),k.error("Failed to update password: "+n.message),{error:n}}}}},ts=()=>{var Y,W,Z,X,ee,se;const{user:U,profile:s}=_e(),{updating:C,updateProfile:L,updatePassword:F}=We(),{toast:A}=qe(),[N,P]=_.useState(!1),[n,Ce]=_.useState(!1),[V,Pe]=_.useState(!1),[O,Se]=_.useState(!1),[S,H]=_.useState({first_name:(s==null?void 0:s.first_name)||"",last_name:(s==null?void 0:s.last_name)||"",phone:""}),[f,R]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),ke=async()=>{if(!S.first_name.trim()||!S.last_name.trim()){A({title:"Validation Error",description:"First name and last name are required.",variant:"destructive"});return}const{error:t}=await L({first_name:S.first_name.trim(),last_name:S.last_name.trim()});t||P(!1)},Ae=async()=>{if(!f.newPassword||!f.confirmPassword){A({title:"Validation Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(f.newPassword!==f.confirmPassword){A({title:"Validation Error",description:"New passwords do not match.",variant:"destructive"});return}if(f.newPassword.length<6){A({title:"Validation Error",description:"Password must be at least 6 characters long.",variant:"destructive"});return}const{error:t}=await F(f.newPassword);t||R({currentPassword:"",newPassword:"",confirmPassword:""})},ze=t=>{switch(t){case"admin":return"bg-red-100 text-red-800";case"council":return"bg-blue-100 text-blue-800";case"driver":return"bg-green-100 text-green-800";case"parent":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},De=t=>{switch(t){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};if(!s)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"Loading profile..."})})});const{data:i}=Ne({queryKey:["admin-stats",s==null?void 0:s.organization_id],queryFn:async()=>{var le,ne,ce,de,oe,me,xe,he,ue,je,fe,ge,pe;if(!(s!=null&&s.organization_id)||(s==null?void 0:s.role)!=="admin")return null;const[t,r,z,te,c,B,Ee]=await Promise.all([h.from("vehicles").select("id, status").eq("organization_id",s.organization_id),h.from("profiles").select("id, employment_status").eq("organization_id",s.organization_id).eq("role","driver"),h.from("routes").select("id, status").eq("organization_id",s.organization_id),h.from("incidents").select("id, severity, created_at").eq("organization_id",s.organization_id).gte("created_at",new Date(Date.now()-30*24*60*60*1e3).toISOString()),h.from("support_tickets").select("id, status, priority").eq("organization_id",s.organization_id),h.from("vehicle_checks").select("id, created_at").eq("organization_id",s.organization_id).gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()),h.from("profiles").select("id").eq("organization_id",s.organization_id).eq("role","mechanic")]),ae=((le=t.data)==null?void 0:le.filter(v=>v.status==="active").length)||0,ie=((ne=r.data)==null?void 0:ne.filter(v=>v.employment_status==="active").length)||0,re=((ce=z.data)==null?void 0:ce.filter(v=>v.status==="active").length)||0,Ue=((de=te.data)==null?void 0:de.length)||0,Fe=((oe=c.data)==null?void 0:oe.filter(v=>v.status==="open").length)||0,Re=((me=B.data)==null?void 0:me.length)||0;return{totalVehicles:((xe=t.data)==null?void 0:xe.length)||0,activeVehicles:ae,totalDrivers:((he=r.data)==null?void 0:he.length)||0,activeDrivers:ie,totalRoutes:((ue=z.data)==null?void 0:ue.length)||0,activeRoutes:re,totalMechanics:((je=Ee.data)==null?void 0:je.length)||0,recentIncidents:Ue,openTickets:Fe,weeklyChecks:Re,systemHealth:{vehicleUtilization:totalVehicles>0?Math.round(ae/(((fe=t.data)==null?void 0:fe.length)||1)*100):0,driverUtilization:totalDrivers>0?Math.round(ie/(((ge=r.data)==null?void 0:ge.length)||1)*100):0,routeEfficiency:totalRoutes>0?Math.round(re/(((pe=z.data)==null?void 0:pe.length)||1)*100):0}}},enabled:!!(s!=null&&s.organization_id)&&(s==null?void 0:s.role)==="admin"}),{data:$}=Ne({queryKey:["admin-activity",s==null?void 0:s.organization_id],queryFn:async()=>{if(!(s!=null&&s.organization_id)||(s==null?void 0:s.role)!=="admin")return[];const[t,r,z]=await Promise.all([h.from("profiles").select("first_name, last_name, role, created_at").eq("organization_id",s.organization_id).gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(5),h.from("incidents").select("id, type, severity, created_at").eq("organization_id",s.organization_id).gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(3),h.from("vehicle_checks").select("id, vehicle_id, created_at").eq("organization_id",s.organization_id).gte("created_at",new Date(Date.now()-3*24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(5)]);return[...(t.data||[]).map(c=>({type:"user_registered",message:`${c.first_name} ${c.last_name} registered as ${c.role}`,timestamp:c.created_at,severity:"info"})),...(r.data||[]).map(c=>({type:"incident",message:`New ${c.severity} ${c.type} incident reported`,timestamp:c.created_at,severity:c.severity})),...(z.data||[]).map(c=>({type:"vehicle_check",message:"Vehicle check completed",timestamp:c.created_at,severity:"info"}))].sort((c,B)=>new Date(B.timestamp).getTime()-new Date(c.timestamp).getTime()).slice(0,10)},enabled:!!(s!=null&&s.organization_id)&&(s==null?void 0:s.role)==="admin"}),o=(s==null?void 0:s.role)==="admin";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[o&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"System administrator dashboard and settings"})]})]}),e.jsxs(d,{className:"bg-red-100 text-red-800",children:[e.jsx(b,{className:"w-4 h-4 mr-1"}),"Administrator"]})]}),!o&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Profile"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your account settings and preferences"})]}),o&&i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fleet Status"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.activeVehicles,"/",i.totalVehicles]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(Y=i.systemHealth)==null?void 0:Y.vehicleUtilization,"% active"]})]})]}),e.jsx(K,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx(M,{value:(W=i.systemHealth)==null?void 0:W.vehicleUtilization,className:"mt-3 h-2"})]})}),e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Workforce"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.activeDrivers,"/",i.totalDrivers]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",i.totalMechanics," mechanics"]})]})]}),e.jsx(ve,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx(M,{value:(Z=i.systemHealth)==null?void 0:Z.driverUtilization,className:"mt-3 h-2"})]})}),e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Operations"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.activeRoutes,"/",i.totalRoutes]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.weeklyChecks," checks this week"]})]})]}),e.jsx(Ie,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsx(M,{value:(X=i.systemHealth)==null?void 0:X.routeEfficiency,className:"mt-3 h-2"})]})}),e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Issues"}),e.jsx("p",{className:"text-2xl font-bold",children:i.openTickets+i.recentIncidents}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i.recentIncidents>0?"bg-red-500":"bg-green-500"}`}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.recentIncidents," incidents (30d)"]})]})]}),e.jsx(we,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[i.openTickets>0&&e.jsxs(d,{variant:"secondary",className:"text-xs",children:[i.openTickets," tickets"]}),i.recentIncidents>0&&e.jsxs(d,{variant:"destructive",className:"text-xs",children:[i.recentIncidents," incidents"]}),i.openTickets===0&&i.recentIncidents===0&&e.jsxs(d,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"All clear"]})]})]})})]}),e.jsxs(Te,{defaultValue:"profile",className:"space-y-6",children:[e.jsxs(Le,{className:`grid w-full ${o?"grid-cols-5":"grid-cols-4"}`,children:[e.jsxs(D,{value:"profile",className:"flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile"})]}),o&&e.jsxs(D,{value:"admin",className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Admin"})]}),e.jsxs(D,{value:"security",className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Security"})]}),e.jsxs(D,{value:"notifications",className:"flex items-center space-x-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Notifications"})]}),e.jsxs(D,{value:"preferences",className:"flex items-center space-x-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Preferences"})]})]}),e.jsx(E,{value:"profile",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx(x,{children:e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Oe,{className:"w-20 h-20",children:[e.jsx(He,{src:s.avatar_url||""}),e.jsxs($e,{className:"text-lg",children:[(ee=s.first_name)==null?void 0:ee[0],(se=s.last_name)==null?void 0:se[0]]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[s.first_name," ",s.last_name]}),o&&e.jsx(b,{className:"w-5 h-5 text-red-600"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("p",{children:s.email})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[e.jsxs(d,{className:ze(s.role),children:[o&&e.jsx(b,{className:"w-3 h-3 mr-1"}),s.role.charAt(0).toUpperCase()+s.role.slice(1)]}),e.jsxs(d,{className:De(s.employment_status||"active"),children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),s.employment_status||"Active"]})]})]})]}),e.jsxs(m,{variant:"outline",onClick:()=>P(!N),className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:N?"Cancel":"Edit"})]})]})})}),o&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"System Overview"]}),e.jsx(y,{children:"Real-time system status and organization details"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Organization Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Organization ID"}),e.jsx("span",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:s.organization_id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Admin Since"}),e.jsx("span",{className:"text-sm",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Active"}),e.jsxs(d,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Online now"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Access Level"}),e.jsxs(d,{className:"bg-red-100 text-red-800 text-xs",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"Full Admin"]})]})]})]}),e.jsx(j,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"System Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Platform Status"}),e.jsxs(d,{className:"bg-green-100 text-green-800",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Operational"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Database"}),e.jsxs(d,{className:"bg-green-100 text-green-800",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Backup"}),e.jsx("span",{className:"text-sm",children:"2 hours ago"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Server Load"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{value:23,className:"w-16 h-2"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"23%"})]})]})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Recent Activity"]}),e.jsx(y,{children:"Latest system events and user activities"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[$&&$.length>0?$.slice(0,8).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${t.severity==="high"||t.severity==="critical"?"bg-red-500":t.severity==="medium"?"bg-yellow-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-foreground",children:t.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(t.timestamp).toLocaleString()})]}),e.jsx(d,{variant:"secondary",className:`text-xs ${t.type==="incident"?"bg-red-100 text-red-800":t.type==="user_registered"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.type.replace("_"," ")})]},r)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(J,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]}),e.jsx(j,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(m,{variant:"outline",size:"sm",className:"text-xs",children:"View All Activity"})})]})})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(w,{children:"Personal Information"}),e.jsx(y,{children:"Update your personal details and contact information"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"first_name",children:"First Name"}),e.jsx(g,{id:"first_name",value:S.first_name,onChange:t=>H(r=>({...r,first_name:t.target.value})),disabled:!N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"last_name",children:"Last Name"}),e.jsx(g,{id:"last_name",value:S.last_name,onChange:t=>H(r=>({...r,last_name:t.target.value})),disabled:!N})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"email",children:"Email"}),e.jsx(g,{id:"email",value:s.email,disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"phone",children:"Phone Number"}),e.jsx(g,{id:"phone",value:"",onChange:t=>H(r=>({...r,phone:t.target.value})),disabled:!N,placeholder:"Phone number not available"})]}),N&&e.jsx("div",{className:"flex space-x-2 pt-4",children:e.jsxs(m,{onClick:ke,disabled:C,className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:C?"Saving...":"Save Changes"})]})})]})]})]})}),o&&e.jsx(E,{value:"admin",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Administrator Settings"]}),e.jsx(y,{children:"System-wide configuration and administrative controls"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable system maintenance"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Debug Logging"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable detailed system logs"})]}),e.jsx(l,{defaultChecked:!1})]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Auto-approve Drivers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically approve driver registrations"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Require 2FA"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Force two-factor authentication"})]}),e.jsx(l,{defaultChecked:!1})]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(m,{variant:"outline",className:"justify-start",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Export Data"]}),e.jsxs(m,{variant:"outline",className:"justify-start",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Audit Logs"]}),e.jsxs(m,{variant:"outline",className:"justify-start",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Health Report"]}),e.jsxs(m,{variant:"outline",className:"justify-start",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Manage Users"]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Operations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Compliance Monitoring"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitor driver compliance and violations"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Real-time Tracking"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable GPS tracking for all vehicles"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Automated Reporting"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate daily/weekly reports automatically"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Emergency Protocols"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable emergency response system"})]}),e.jsx(l,{defaultChecked:!0})]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"System Integrations"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Supabase Database"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected & Operational"})]})]}),e.jsx(d,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ge,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Google Maps API"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Route optimization enabled"})]})]}),e.jsx(d,{className:"bg-blue-100 text-blue-800",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-4 h-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Notification Service"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Push notifications & SMS"})]})]}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800",children:"Configured"})]})]})})]}),e.jsxs(Ke,{children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Administrative changes can affect system performance. Review changes carefully before applying."})]})]})]})})}),e.jsx(E,{value:"security",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(w,{children:"Security Settings"}),e.jsx(y,{children:"Manage your password and security preferences"})]}),e.jsx(u,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Change Password"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"current_password",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"current_password",type:n?"text":"password",value:f.currentPassword,onChange:t=>R(r=>({...r,currentPassword:t.target.value})),placeholder:"Enter current password"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>Ce(!n),children:n?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"new_password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"new_password",type:V?"text":"password",value:f.newPassword,onChange:t=>R(r=>({...r,newPassword:t.target.value})),placeholder:"Enter new password"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>Pe(!V),children:V?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"confirm_password",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"confirm_password",type:O?"text":"password",value:f.confirmPassword,onChange:t=>R(r=>({...r,confirmPassword:t.target.value})),placeholder:"Confirm new password"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>Se(!O),children:O?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsxs(m,{onClick:Ae,disabled:C,className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:C?"Updating...":"Update Password"})]})]})})]})}),e.jsx(E,{value:"notifications",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Notification Preferences"]}),e.jsx(y,{children:o?"Configure system-wide and personal notification settings":"Choose how you want to be notified about updates and activities"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive urgent alerts via SMS"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Push Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Browser push notifications"})]}),e.jsx(l,{defaultChecked:!0})]})]}),e.jsx(j,{})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Administrative Alerts"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"System Alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical system notifications"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Security Alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Login attempts and security events"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"User Activity"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New registrations and user actions"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"System Health"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance and maintenance alerts"})]}),e.jsx(l,{defaultChecked:!0})]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"quiet-hours-start",children:"Quiet Hours Start"}),e.jsx(g,{id:"quiet-hours-start",type:"time",defaultValue:"22:00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"quiet-hours-end",children:"Quiet Hours End"}),e.jsx(g,{id:"quiet-hours-end",type:"time",defaultValue:"07:00"})]})]})]}),e.jsxs(m,{className:"w-full",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Save Notification Preferences"]})]})]})}),e.jsx(E,{value:"preferences",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Application Preferences"]}),e.jsx(y,{children:o?"Customize your administration experience and system defaults":"Customize your application experience"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Display"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Dark Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use dark theme"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Compact View"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show more information in less space"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"items-per-page",children:"Items per page"}),e.jsxs("select",{id:"items-per-page",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",defaultValue:"20",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]}),e.jsx(j,{})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Administrative Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Auto-approve New Users"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically approve new user registrations"})]}),e.jsx(l,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium",children:"Show Advanced Options"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display advanced configuration options by default"})]}),e.jsx(l,{defaultChecked:!1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"default-user-role",children:"Default New User Role"}),e.jsxs("select",{id:"default-user-role",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",defaultValue:"driver",children:[e.jsx("option",{value:"driver",children:"Driver"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"mechanic",children:"Mechanic"})]})]})]}),e.jsx(j,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Language & Region"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"language",children:"Language"}),e.jsxs("select",{id:"language",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",defaultValue:"en",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"af",children:"Afrikaans"}),e.jsx("option",{value:"zu",children:"Zulu"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"timezone",children:"Timezone"}),e.jsxs("select",{id:"timezone",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",defaultValue:"Africa/Johannesburg",children:[e.jsx("option",{value:"Africa/Johannesburg",children:"SAST (UTC+2)"}),e.jsx("option",{value:"UTC",children:"UTC (UTC+0)"})]})]})]})]}),e.jsxs(m,{className:"w-full",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})]})]})})]})]})};export{ts as default};
