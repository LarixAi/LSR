import{J as t}from"./main-DVuL102c.js";const h=async(s,a,i,g,p)=>{try{const r=s.name.split(".").pop(),u=`${Date.now()}_${Math.random().toString(36).substring(2)}.${r}`,o=`${i}/${u}`;console.log("Uploading file:",{bucket:a,storagePath:o,fileSize:s.size}),console.log("Checking bucket access...");const{data:l,error:c}=await t.storage.listBuckets();c?console.error("Bucket list error:",c):console.log("Available buckets:",l==null?void 0:l.map(d=>d.name));const{data:f,error:e}=await t.storage.from(a).upload(o,s,{cacheControl:"3600",upsert:!1});if(e)return console.error("Upload error:",e),console.error("Upload error details:",{code:e.code,message:e.message,details:e.details,hint:e.hint}),{success:!1,error:e.message};const{data:{publicUrl:n}}=t.storage.from(a).getPublicUrl(o);return console.log("File uploaded successfully:",{storagePath:o,publicUrl:n}),{success:!0,fileUrl:n,storagePath:o}}catch(r){return console.error("File upload failed:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}};export{h as u};
