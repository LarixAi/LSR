import{m as c,H as _,J as d}from"./main-DVuL102c.js";const a=()=>[{id:"1",question:"Are there any fuel, oil, or fluid leaks under the vehicle?",category:"exterior",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:1,guidance:"Check for any visible leaks under the vehicle. Look for oil, fuel, coolant, or other fluid stains on the ground. Pay attention to the engine area, transmission, and fuel tank.",question_set_id:"default"},{id:"2",question:"Is the windscreen clean and free from cracks or damage?",category:"exterior",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:2,guidance:"Inspect the windscreen for cracks, chips, or damage. Ensure it's clean and provides clear visibility. Check for any delamination or distortion.",question_set_id:"default"},{id:"3",question:"Are the windscreen wipers and washers working correctly?",category:"exterior",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!1,has_notes:!0,order_index:3,guidance:"Test the wipers by turning them on. Check that they clear the windscreen effectively. Test the washer fluid spray and ensure it reaches the windscreen.",question_set_id:"default"},{id:"4",question:"Are the headlights (main/dip) working and lenses clean?",category:"lights",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:4,guidance:"Turn on the headlights and check both main beam and dipped beam. Ensure lenses are clean and not cracked. Check that both lights are working.",question_set_id:"default"},{id:"5",question:"Are the front indicators including side repeaters working?",category:"lights",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!1,has_notes:!0,order_index:5,guidance:"Test all front indicators including side repeaters. Ensure they flash at the correct rate and are visible from all angles.",question_set_id:"default"},{id:"6",question:"Is the horn working clearly?",category:"general",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!1,has_notes:!0,order_index:6,guidance:"Test the horn by pressing it. Ensure it produces a clear, audible sound that can be heard from outside the vehicle.",question_set_id:"default"},{id:"7",question:"Are mirrors fitted, secure, adjusted, and not cracked?",category:"exterior",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:7,guidance:"Check all mirrors are securely fitted and properly adjusted. Ensure they're not cracked or damaged. Test that they provide adequate rearward visibility.",question_set_id:"default"},{id:"8",question:"Is the front registration plate present, clean, and secure?",category:"exterior",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:8,guidance:"Verify the front registration plate is present, clean, and securely attached. Check that all numbers and letters are clearly visible and not obscured.",question_set_id:"default"},{id:"9",question:"Are the tyres in good condition with adequate tread depth and proper inflation?",category:"tires",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:9,guidance:"Inspect all tyres on the passenger side. Check tread depth (minimum 1.6mm), look for cuts, bulges, or damage. Check tyre pressure and ensure valve caps are present.",question_set_id:"default"},{id:"10",question:"Are the wheel nuts secure with no cracks, rust marks, or missing nuts?",category:"tires",question_type:"yes_no",is_required:!0,is_critical:!0,has_photo:!0,has_notes:!0,order_index:10,guidance:"Check all wheel nuts are present and properly tightened. Look for any signs of rust, cracks, or missing nuts. Ensure wheel covers are secure.",question_set_id:"default"}],l=n=>{const{profile:r}=c();return _({queryKey:["vehicle-check-questions",r==null?void 0:r.organization_id,n],queryFn:async()=>{var u;if(!(r!=null&&r.organization_id))return console.log("No organization ID, using default questions"),a();try{if(n){const{data:i,error:e}=await d.from("inspection_questions").select("*").eq("question_set_id",n).order("order_index",{ascending:!0});if(e)throw console.error("Error fetching specific question set:",e),e;if(i&&i.length>0)return console.log(`Using questions from set ${n}:`,i.length,"questions"),i.map(t=>({id:t.id,question:t.question,category:t.category,question_type:t.question_type,is_required:t.is_required,is_critical:t.is_critical,has_photo:t.has_photo,has_notes:t.has_notes,order_index:t.order_index,guidance:t.guidance,question_set_id:t.question_set_id}))}const{data:s,error:o}=await d.from("inspection_question_sets").select(`
            id,
            questions:inspection_questions(*)
          `).eq("organization_id",r.organization_id).eq("is_active",!0).eq("is_default",!0).order("created_at",{ascending:!1}).limit(1);if(o)throw console.error("Error fetching default question sets:",o),o;if(s&&s.length>0&&((u=s[0].questions)==null?void 0:u.length)>0){const i=s[0].questions;return console.log("Using default organization questions:",i.length,"questions"),i.sort((e,t)=>e.order_index-t.order_index).map(e=>({id:e.id,question:e.question,category:e.category,question_type:e.question_type,is_required:e.is_required,is_critical:e.is_critical,has_photo:e.has_photo,has_notes:e.has_notes,order_index:e.order_index,guidance:e.guidance,question_set_id:e.question_set_id}))}return console.log("No admin questions found, using default fallback questions"),a()}catch(s){return console.error("Error fetching vehicle check questions:",s),console.log("Falling back to default questions"),a()}},enabled:!0,staleTime:5*60*1e3,cacheTime:10*60*1e3})};export{l as u};
