import{q as U,r as u,j as e,N as C,H as x,D as I,b as D,B as c,d as T,e as P,f as L,Y as i,I as o,i as n,n as t,F as v,v as F,k as N,l as y,M as H,a0 as q,E as r}from"./main-piTIAPSx.js";import{T as J}from"./textarea-mxcr8nPj.js";import{S as m,a as j,b as p,c as g,d as l}from"./select-Brm_N20Q.js";import{T as _,a as Y,b as f,c as b}from"./tabs-N5TLptOb.js";import{P as z}from"./plus-CMGcTuiR.js";import{C as G}from"./camera-DB1Hu7y8.js";import{U as W}from"./upload-CgVQC7ku.js";import{S as K}from"./search-HDsNrIL9.js";import"./index-Pp_niZQ8.js";const re=()=>{const{user:M,profile:w,loading:k}=U(),[E,B]=u.useState(""),[V,A]=u.useState(!1),[a,O]=u.useState(null);if(k)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading incidents..."})]})});if(!M||!w)return e.jsx(C,{to:"/auth",replace:!0});if(w.role!=="driver")return e.jsx(C,{to:"/dashboard",replace:!0});const d=[{id:"1",type:"Vehicle Breakdown",severity:"medium",status:"resolved",date:"2024-01-10",time:"14:30",location:"M25 Junction 15",vehicleNumber:"LSR-001",description:"Engine overheating warning light appeared during route. Pulled over safely and contacted control.",passengerCount:18,injuryReported:!1,damageReported:!0,reportedBy:"John Smith",followUpRequired:!1,resolution:"Vehicle towed to depot. Coolant leak repaired. Vehicle back in service."},{id:"2",type:"Traffic Accident",severity:"high",status:"under_investigation",date:"2024-01-08",time:"08:15",location:"High Street, Elmwood",vehicleNumber:"LSR-001",description:"Minor collision with parked car while maneuvering in tight space. No passengers on board.",passengerCount:0,injuryReported:!1,damageReported:!0,reportedBy:"John Smith",followUpRequired:!0,policeReference:"POL2024010801",insuranceClaim:"INS2024010802"},{id:"3",type:"Passenger Incident",severity:"low",status:"resolved",date:"2024-01-05",time:"16:45",location:"Oakwood Primary School",vehicleNumber:"LSR-001",description:"Child complained of feeling unwell during journey. Administered first aid and contacted parent.",passengerCount:22,injuryReported:!1,damageReported:!1,reportedBy:"John Smith",followUpRequired:!1,resolution:"Parent collected child. Child recovered fully. No further action required."}],S=s=>{switch(s){case"resolved":return e.jsx(r,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Resolved"});case"under_investigation":return e.jsx(r,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Under Investigation"});case"pending":return e.jsx(r,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"Pending"});case"closed":return e.jsx(r,{className:"bg-gray-100 text-gray-800 hover:bg-gray-100",children:"Closed"});default:return e.jsx(r,{variant:"secondary",children:s})}},R=s=>{switch(s){case"low":return e.jsx(r,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Low"});case"medium":return e.jsx(r,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Medium"});case"high":return e.jsx(r,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"High"});case"critical":return e.jsx(r,{className:"bg-red-200 text-red-900 hover:bg-red-200",children:"Critical"});default:return e.jsx(r,{variant:"secondary",children:s})}},h={totalIncidents:d.length,resolvedIncidents:d.filter(s=>s.status==="resolved").length,pendingIncidents:d.filter(s=>s.status==="under_investigation"||s.status==="pending").length,thisMonthIncidents:d.filter(s=>new Date(s.date).getMonth()===new Date().getMonth()).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-red-600"}),"Incident Reports"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Report and track safety incidents"})]}),e.jsxs(I,{open:V,onOpenChange:A,children:[e.jsx(D,{asChild:!0,children:e.jsxs(c,{className:"bg-red-600 hover:bg-red-700",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Report Incident"]})}),e.jsxs(T,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(P,{children:e.jsx(L,{children:"Report New Incident"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"incident-type",children:"Incident Type"}),e.jsxs(m,{children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Select type"})}),e.jsxs(g,{children:[e.jsx(l,{value:"breakdown",children:"Vehicle Breakdown"}),e.jsx(l,{value:"accident",children:"Traffic Accident"}),e.jsx(l,{value:"passenger",children:"Passenger Incident"}),e.jsx(l,{value:"medical",children:"Medical Emergency"}),e.jsx(l,{value:"security",children:"Security Issue"}),e.jsx(l,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"severity",children:"Severity Level"}),e.jsxs(m,{children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Select severity"})}),e.jsxs(g,{children:[e.jsx(l,{value:"low",children:"Low - Minor issue"}),e.jsx(l,{value:"medium",children:"Medium - Significant issue"}),e.jsx(l,{value:"high",children:"High - Serious issue"}),e.jsx(l,{value:"critical",children:"Critical - Emergency"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",children:"Date"}),e.jsx(o,{id:"date",type:"date",defaultValue:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"time",children:"Time"}),e.jsx(o,{id:"time",type:"time",defaultValue:new Date().toTimeString().split(" ")[0].substring(0,5)})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"location",children:"Location"}),e.jsx(o,{id:"location",placeholder:"Where did the incident occur?"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"vehicle",children:"Vehicle Number"}),e.jsxs(m,{children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Select vehicle"})}),e.jsxs(g,{children:[e.jsx(l,{value:"LSR-001",children:"LSR-001"}),e.jsx(l,{value:"LSR-002",children:"LSR-002"}),e.jsx(l,{value:"LSR-003",children:"LSR-003"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"passenger-count",children:"Number of Passengers on Board"}),e.jsx(o,{id:"passenger-count",type:"number",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",children:"Incident Description"}),e.jsx(J,{id:"description",placeholder:"Provide a detailed description of what happened...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"injury",className:"rounded"}),e.jsx(i,{htmlFor:"injury",children:"Injury Reported"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"damage",className:"rounded"}),e.jsx(i,{htmlFor:"damage",children:"Property Damage"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"police",className:"rounded"}),e.jsx(i,{htmlFor:"police",children:"Police Involved"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"emergency",className:"rounded"}),e.jsx(i,{htmlFor:"emergency",children:"Emergency Services Called"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Attach Photos/Documents"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Upload photos or documents"}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Choose Files"]})]})]}),e.jsx(c,{className:"w-full bg-red-600 hover:bg-red-700",children:"Submit Incident Report"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(n,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Incidents"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalIncidents})]})]})})}),e.jsx(n,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.pendingIncidents})]})]})})}),e.jsx(n,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.resolvedIncidents})]})]})})}),e.jsx(n,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold",children:h.thisMonthIncidents})]})]})})})]}),e.jsxs(_,{defaultValue:"my-incidents",className:"space-y-6",children:[e.jsxs(Y,{className:"grid w-full grid-cols-3",children:[e.jsx(f,{value:"my-incidents",children:"My Incidents"}),e.jsx(f,{value:"emergency-contacts",children:"Emergency Contacts"}),e.jsx(f,{value:"safety-guidelines",children:"Safety Guidelines"})]}),e.jsx(b,{value:"my-incidents",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(N,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"My Incident Reports"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(o,{placeholder:"Search incidents...",value:E,onChange:s=>B(s.target.value),className:"pl-10"})]}),e.jsxs(m,{children:[e.jsx(j,{className:"w-48",children:e.jsx(p,{placeholder:"Filter by status"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"All Status"}),e.jsx(l,{value:"resolved",children:"Resolved"}),e.jsx(l,{value:"under_investigation",children:"Under Investigation"}),e.jsx(l,{value:"pending",children:"Pending"})]})]})]})]}),e.jsx(t,{children:e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.type}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),s.date," at ",s.time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),s.location]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[R(s.severity),S(s.status)]})]}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Vehicle: ",s.vehicleNumber]}),e.jsxs("span",{children:["Passengers: ",s.passengerCount]}),s.injuryReported&&e.jsx("span",{className:"text-red-600 font-medium",children:"Injury Reported"}),s.damageReported&&e.jsx("span",{className:"text-orange-600 font-medium",children:"Damage Reported"})]}),e.jsxs(I,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>O(s),children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"View Details"]})}),e.jsxs(T,{className:"max-w-2xl",children:[e.jsx(P,{children:e.jsxs(L,{children:["Incident Details - ",a==null?void 0:a.type]})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Basic Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date & Time:"}),e.jsxs("span",{children:[a.date," at ",a.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vehicle:"}),e.jsx("span",{children:a.vehicleNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Passengers:"}),e.jsx("span",{children:a.passengerCount})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Status & Severity"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Severity:"}),e.jsx("span",{children:R(a.severity)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{children:S(a.status)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Injury:"}),e.jsx("span",{children:a.injuryReported?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Damage:"}),e.jsx("span",{children:a.damageReported?"Yes":"No"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:a.description})]}),a.resolution&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resolution"}),e.jsx("p",{className:"text-sm text-gray-600 bg-green-50 p-3 rounded",children:a.resolution})]}),(a.policeReference||a.insuranceClaim)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"References"}),e.jsxs("div",{className:"text-sm space-y-1",children:[a.policeReference&&e.jsxs("div",{children:["Police Ref: ",a.policeReference]}),a.insuranceClaim&&e.jsxs("div",{children:["Insurance Claim: ",a.insuranceClaim]})]})]})]})]})]})]})]},s.id))})})]})}),e.jsx(b,{value:"emergency-contacts",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(N,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Emergency Contacts"]})}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Emergency Services"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Emergency (Police/Fire/Ambulance)"}),e.jsx("span",{className:"font-bold text-red-600",children:"999"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"NHS 111"}),e.jsx("span",{className:"font-bold text-blue-600",children:"111"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"LSR Logistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Control Room (24/7)"}),e.jsx("span",{className:"font-bold text-green-600",children:"+44 20 1234 5678"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Fleet Manager"}),e.jsx("span",{className:"font-bold",children:"+44 20 1234 5679"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Safety Officer"}),e.jsx("span",{className:"font-bold",children:"+44 20 1234 5680"})]})]})]})]})})]})}),e.jsx(b,{value:"safety-guidelines",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(N,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Safety Guidelines"]})}),e.jsx(t,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Safety Documentation"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Access safety procedures, emergency protocols, and incident reporting guidelines."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(c,{className:"bg-red-600 hover:bg-red-700",children:"Download Safety Manual"}),e.jsx(c,{variant:"outline",children:"Emergency Procedures"})]})]})})]})})]})]})};export{re as default};
