import{a3 as i,j as e,V as S,q as y,J as D,r as M,i as v,k as w,p as T,l as b,E as A,B as f,n as C,X as q,H as j,N as R}from"./main-piTIAPSx.js";import{T as I,a as L,b as N,c as p}from"./tabs-N5TLptOb.js";import{u as B}from"./useQuery-Dbdyc74j.js";import{u as h}from"./useMutation-B8vlA97s.js";import{I as F}from"./info-IsFyPzEb.js";import{C as Q}from"./circle-check-big-CD0jvDn0.js";const K=({size:a="md",variant:r="spinner",text:n,fullScreen:l=!1,className:s})=>{const m={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},c={sm:"text-sm",md:"text-base",lg:"text-lg"},o=i("flex items-center justify-center",l&&"min-h-screen",s),u=()=>e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(S,{className:i("animate-spin text-primary",m[a])}),n&&e.jsx("p",{className:i("text-muted-foreground",c[a]),children:n})]})}),x=()=>e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:i("rounded-full bg-primary animate-pulse",m[a])}),n&&e.jsx("p",{className:i("text-muted-foreground",c[a]),children:n})]})}),d=()=>e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(t=>e.jsx("div",{className:i("rounded-full bg-primary animate-pulse",a==="sm"?"h-2 w-2":a==="md"?"h-3 w-3":"h-4 w-4"),style:{animationDelay:`${t*.2}s`,animationDuration:"1s"}},t))}),n&&e.jsx("p",{className:i("text-muted-foreground",c[a]),children:n})]})});switch(r){case"pulse":return x();case"dots":return d();default:return u()}},_=()=>{const{user:a}=y(),r=D(),[n,l]=M.useState("all"),{data:s,isLoading:m}=B({queryKey:["notifications",a==null?void 0:a.id,n],queryFn:async()=>{if(!a)return[];const t=[{id:"1",type:"info",title:"Welcome to the platform",message:"Your account has been successfully set up.",read:!1,created_at:new Date().toISOString()},{id:"2",type:"success",title:"Profile updated",message:"Your profile information has been updated successfully.",read:!0,created_at:new Date(Date.now()-864e5).toISOString()}];return n==="unread"?t.filter(k=>!k.read):t},enabled:!!a}),c=h({mutationFn:async t=>{console.log("Marking notification as read:",t)},onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),o=h({mutationFn:async()=>{console.log("Marking all notifications as read")},onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),u=h({mutationFn:async t=>{console.log("Deleting notification:",t)},onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]})}}),x=t=>{switch(t){case"success":return e.jsx(Q,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(j,{className:"w-5 h-5 text-yellow-600"});case"error":return e.jsx(j,{className:"w-5 h-5 text-red-600"});default:return e.jsx(F,{className:"w-5 h-5 text-blue-600"})}},d=(s==null?void 0:s.filter(t=>!t.read).length)||0;return m?e.jsx(K,{}):e.jsxs(v,{className:"w-full max-w-4xl",children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-6 h-6 text-primary"}),e.jsx(b,{children:"Notification Center"}),d>0&&e.jsx(A,{variant:"destructive",className:"ml-2",children:d})]}),e.jsx("div",{className:"space-x-2",children:e.jsx(f,{variant:"outline",size:"sm",onClick:()=>o.mutate(),disabled:d===0,children:"Mark All Read"})})]})}),e.jsx(C,{children:e.jsxs(I,{defaultValue:"all",className:"w-full",children:[e.jsxs(L,{className:"grid w-full grid-cols-2",children:[e.jsxs(N,{value:"all",onClick:()=>l("all"),children:["All (",(s==null?void 0:s.length)||0,")"]}),e.jsxs(N,{value:"unread",onClick:()=>l("unread"),children:["Unread (",d,")"]})]}),e.jsx(p,{value:"all",className:"mt-4",children:e.jsx(g,{notifications:s||[],onMarkAsRead:c.mutate,onDelete:u.mutate,getIcon:x})}),e.jsx(p,{value:"unread",className:"mt-4",children:e.jsx(g,{notifications:(s==null?void 0:s.filter(t=>!t.read))||[],onMarkAsRead:c.mutate,onDelete:u.mutate,getIcon:x})})]})})]})},g=({notifications:a,onMarkAsRead:r,onDelete:n,getIcon:l})=>a.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No notifications to display"}):e.jsx("div",{className:"space-y-3",children:a.map(s=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border ${s.read?"bg-background":"bg-muted/50"}`,children:[e.jsx("div",{className:"mt-1",children:l(s.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!s.read&&e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>r(s.id),children:"Mark Read"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>n(s.id),children:e.jsx(q,{className:"w-4 h-4"})})]})]})})]},s.id))});function E(){return e.jsxs(v,{children:[e.jsx(w,{children:e.jsx(b,{children:"Notification Test"})}),e.jsx(C,{children:e.jsx("p",{children:"Notification testing functionality will be available here."})})]})}const $=()=>{const{user:a,profile:r,loading:n}=y();return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading notification center..."})]})}):!a||!r?e.jsx(R,{to:"/auth",replace:!0}):r.organization_id?e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(E,{})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Organization Required"}),e.jsx("p",{className:"text-gray-600",children:"You must be assigned to an organization to access notifications."})]})})};export{$ as default};
