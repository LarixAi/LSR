import{c as me,q as ce,J as je,s as G,r as Q,j as e,N as Z,B as r,ax as ue,o as X,h as $,D as ge,b as pe,d as ve,e as Ne,f as ye,Y as l,I as i,i as c,n as d,a1 as fe,v as D,O as be,H as M,F as q,k as f,l as b,E as K,a0 as ee,w as se,C as we,P as ae}from"./main-piTIAPSx.js";import{T as R}from"./textarea-mxcr8nPj.js";import{S as T,a as A,b as F,c as P,d as a}from"./select-Brm_N20Q.js";import{T as Ce,a as Se,b as te,c as u,d as Qe,e as g}from"./table-CV1HM_JF.js";import{T as De,a as Te,b as w,c as C}from"./tabs-N5TLptOb.js";import{P as Ae}from"./progress-nJfMQ3MC.js";import{u as Fe}from"./useQuery-Dbdyc74j.js";import{u as Pe}from"./useMutation-B8vlA97s.js";import{P as Ve}from"./plus-CMGcTuiR.js";import{S as le}from"./send-CbMnoHMq.js";import{C as re}from"./circle-check-big-CD0jvDn0.js";import{T as Le}from"./target-CwAJPPi1.js";import{S as ze}from"./search-HDsNrIL9.js";import{S as ke}from"./square-pen-DnuZJKej.js";import{D as Ee}from"./download-C4W0Vf38.js";import{A as ie}from"./arrow-right-D4j6qhn0.js";import{P as Me}from"./phone-D7pMV1Uy.js";import{A as ne}from"./award-_zpSLze8.js";import"./index-Pp_niZQ8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=me("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Re=()=>{const{profile:n}=ce(),V=je(),{data:x=[],isLoading:p}=Fe({queryKey:["quotations-data",n==null?void 0:n.organization_id],queryFn:async()=>{if(!(n!=null&&n.organization_id))return[];const{data:h,error:v}=await G.from("quotations").select("*").eq("organization_id",n.organization_id).order("created_at",{ascending:!1});return v?(console.error("Error fetching quotations:",v),[]):h||[]},enabled:!!(n!=null&&n.organization_id)}),U=Pe({mutationFn:async()=>{if(!(n!=null&&n.organization_id))return;const{error:h}=await G.from("quotations").delete().eq("organization_id",n.organization_id);if(h)throw h},onSuccess:()=>{V.invalidateQueries({queryKey:["quotations-data"]})}}),_=(()=>{const h=x.length,v=x.reduce((t,y)=>t+(y.total_amount||0),0),z=x.filter(t=>t.status==="accepted").length,I=x.filter(t=>t.status==="pending").length,B=x.filter(t=>t.status==="rejected").length,k=x.filter(t=>t.status==="draft").length,N=x.filter(t=>t.valid_until?new Date(t.valid_until)<new Date:!1).length,H=h>0?v/h:0,S=z,o=h-k,Y=o>0?S/o*100:0;return{totalQuotations:h,totalValue:v,acceptedQuotes:z,pendingQuotes:I,rejectedQuotes:B,draftQuotes:k,expiredQuotes:N,averageValue:H,winRate:Y,pendingValue:x.filter(t=>t.status==="pending").reduce((t,y)=>t+(y.total_amount||0),0),acceptedValue:x.filter(t=>t.status==="accepted").reduce((t,y)=>t+(y.total_amount||0),0)}})();return{quotations:x,isLoading:p,clearAllQuotations:U,stats:_,hasData:x.length>0}},ls=()=>{const{user:n,profile:V,loading:x}=ce(),[p,U]=Q.useState(""),[L,_]=Q.useState("all"),[h,v]=Q.useState("all"),[z,I]=Q.useState("all"),[B,k]=Q.useState(!1),{quotations:N,isLoading:H,clearAllQuotations:S,stats:o,hasData:Y}=Re(),t=async()=>{if(confirm(`Are you sure you want to clear all quotation data?

This will permanently delete:
- All quotation records
- All customer quotes
- All sales pipeline data

This action cannot be undone.`))try{await S.mutateAsync(),ae({title:"Success!",description:"All quotation data has been cleared from the database."})}catch(j){console.error("Error clearing quotations:",j),ae({title:"Error",description:"Failed to clear quotation data. Please try again.",variant:"destructive"})}};if(x||H)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-lg",children:"Loading quotation management..."})]})});if(!n||!V)return e.jsx(Z,{to:"/auth",replace:!0});if(!["admin","council"].includes(V.role))return e.jsx(Z,{to:"/unauthorized",replace:!0});const y=s=>{const j={draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-orange-100 text-orange-800",converted:"bg-emerald-100 text-emerald-800"};return e.jsx(K,{className:j[s]||"bg-gray-100 text-gray-800",children:s})},de=s=>{const j={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx(K,{className:j[s]||"bg-gray-100 text-gray-800",children:s})},oe=s=>{switch(s){case"accepted":case"converted":return e.jsx(re,{className:"w-4 h-4 text-green-600"});case"rejected":return e.jsx(M,{className:"w-4 h-4 text-red-600"});case"expired":return e.jsx(D,{className:"w-4 h-4 text-orange-600"});case"pending":case"sent":return e.jsx(D,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(q,{className:"w-4 h-4 text-gray-600"})}},xe=s=>s>=75?"text-green-600":s>=50?"text-yellow-600":s>=25?"text-orange-600":"text-red-600",W=s=>{const j=new Date(s),O=new Date,E=Math.ceil((j.getTime()-O.getTime())/(1e3*60*60*24));return E<=7&&E>0},he=N.filter(s=>{const j=s.quoteNumber.toLowerCase().includes(p.toLowerCase())||s.customerName.toLowerCase().includes(p.toLowerCase())||s.contactPerson.toLowerCase().includes(p.toLowerCase())||s.serviceType.toLowerCase().includes(p.toLowerCase()),O=L==="all"||s.status===L,E=h==="all"||s.priority===h;return j&&O&&E}),m={totalQuotes:o.totalQuotations,totalValue:o.totalValue,acceptedValue:o.acceptedValue,pendingValue:o.pendingValue,acceptedCount:o.acceptedQuotes,pendingCount:o.pendingQuotes,rejectedCount:o.rejectedQuotes,draftCount:o.draftQuotes,expiringSoon:o.expiredQuotes,avgQuoteValue:o.averageValue,conversionRate:o.winRate};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-blue-600"}),"Quotation Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create, track, and convert customer quotations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{onClick:t,variant:"destructive",className:"inline-flex items-center",disabled:S.isPending,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),S.isPending?"Clearing...":"Clear All Data"]}),e.jsxs(r,{variant:"outline",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(r,{variant:"outline",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs(ge,{open:B,onOpenChange:k,children:[e.jsx(pe,{asChild:!0,children:e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Create Quote"]})}),e.jsxs(ve,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ne,{children:e.jsx(ye,{children:"Create New Quotation"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"customer-name",children:"Customer Name"}),e.jsx(i,{id:"customer-name",placeholder:"Company or individual name"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"contact-person",children:"Contact Person"}),e.jsx(i,{id:"contact-person",placeholder:"Primary contact name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email Address"}),e.jsx(i,{id:"email",type:"email",placeholder:"contact@company.com"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number"}),e.jsx(i,{id:"phone",placeholder:"+44 20 1234 5678"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(R,{id:"address",placeholder:"Full address",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quote Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"quote-number",children:"Quote Number"}),e.jsx(i,{id:"quote-number",placeholder:"QUO-2024-XXX"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"service-type",children:"Service Type"}),e.jsxs(T,{children:[e.jsx(A,{children:e.jsx(F,{placeholder:"Select service type"})}),e.jsxs(P,{children:[e.jsx(a,{value:"school",children:"School Transport"}),e.jsx(a,{value:"medical",children:"Medical Transport"}),e.jsx(a,{value:"corporate",children:"Corporate Shuttle"}),e.jsx(a,{value:"charter",children:"Charter Service"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"passengers",children:"Passengers"}),e.jsx(i,{id:"passengers",type:"number",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"duration",children:"Duration"}),e.jsx(i,{id:"duration",placeholder:"e.g., 6 months"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"frequency",children:"Frequency"}),e.jsx(i,{id:"frequency",placeholder:"e.g., Daily"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"valid-until",children:"Valid Until"}),e.jsx(i,{id:"valid-until",type:"date"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"priority",children:"Priority"}),e.jsxs(T,{children:[e.jsx(A,{children:e.jsx(F,{placeholder:"Select priority"})}),e.jsxs(P,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Service Details"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Service Description"}),e.jsx(R,{id:"description",placeholder:"Detailed description of services",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"route-details",children:"Route Details"}),e.jsx(R,{id:"route-details",placeholder:"Route information, pickup points, etc.",rows:2})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"base-amount",children:"Base Amount (£)"}),e.jsx(i,{id:"base-amount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"discount",children:"Discount (£)"}),e.jsx(i,{id:"discount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),e.jsx(i,{id:"vat-rate",type:"number",step:"0.01",placeholder:"20.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vat-amount",children:"VAT Amount (£)"}),e.jsx(i,{id:"vat-amount",type:"number",step:"0.01",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"total-amount",children:"Total Amount (£)"}),e.jsx(i,{id:"total-amount",type:"number",step:"0.01",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"probability",children:"Win Probability (%)"}),e.jsx(i,{id:"probability",type:"number",min:"0",max:"100",placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"competitor-quotes",children:"Competitor Quotes"}),e.jsx(i,{id:"competitor-quotes",type:"number",min:"0",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",children:"Notes & Special Requirements"}),e.jsx(R,{id:"notes",placeholder:"Additional information, terms, conditions...",rows:3})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{className:"flex-1 bg-gray-600 hover:bg-gray-700",children:"Save as Draft"}),e.jsxs(r,{className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Send Quote"]}),e.jsx(r,{className:"flex-1 bg-green-600 hover:bg-green-700",children:"Save & Follow Up"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-6",children:[e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Quotes"}),e.jsx("p",{className:"text-2xl font-bold",children:m.totalQuotes})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-8 h-8 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["£",m.totalValue.toLocaleString()]})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Won Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",m.acceptedValue.toLocaleString()]})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Value"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["£",m.pendingValue.toLocaleString()]})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[m.conversionRate.toFixed(1),"%"]})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-8 h-8 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Quote Value"}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:["£",m.avgQuoteValue.toLocaleString(void 0,{maximumFractionDigits:0})]})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m.expiringSoon})]})]})})}),e.jsx(c,{className:"lg:col-span-2",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Draft Quotes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:m.draftCount})]})]})})})]}),e.jsx(c,{children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quote Conversion Performance"}),e.jsx("p",{className:"text-gray-600",children:"Current quote-to-win conversion rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.conversionRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[m.acceptedCount," of ",N.filter(s=>s.status!=="draft").length," quotes won"]})]})]}),e.jsx(Ae,{value:m.conversionRate,className:"h-3"})]})}),e.jsxs(De,{defaultValue:"quotes",className:"space-y-6",children:[e.jsxs(Te,{className:"grid w-full grid-cols-6",children:[e.jsx(w,{value:"quotes",children:"All Quotes"}),e.jsx(w,{value:"pending",children:"Pending"}),e.jsx(w,{value:"expiring",children:"Expiring"}),e.jsx(w,{value:"won",children:"Won"}),e.jsx(w,{value:"analytics",children:"Analytics"}),e.jsx(w,{value:"settings",children:"Settings"})]}),e.jsx(C,{value:"quotes",className:"space-y-4",children:e.jsxs(c,{children:[e.jsxs(f,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Quotation Management"]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(i,{placeholder:"Search quotes, customers...",value:p,onChange:s=>U(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(T,{value:L,onValueChange:_,children:[e.jsx(A,{className:"w-40",children:e.jsx(F,{})}),e.jsxs(P,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"draft",children:"Draft"}),e.jsx(a,{value:"sent",children:"Sent"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"accepted",children:"Accepted"}),e.jsx(a,{value:"rejected",children:"Rejected"}),e.jsx(a,{value:"expired",children:"Expired"}),e.jsx(a,{value:"converted",children:"Converted"})]})]}),e.jsxs(T,{value:h,onValueChange:v,children:[e.jsx(A,{className:"w-40",children:e.jsx(F,{})}),e.jsxs(P,{children:[e.jsx(a,{value:"all",children:"All Priority"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"low",children:"Low"})]})]}),e.jsxs(T,{value:z,onValueChange:I,children:[e.jsx(A,{className:"w-40",children:e.jsx(F,{})}),e.jsxs(P,{children:[e.jsx(a,{value:"all",children:"All Time"}),e.jsx(a,{value:"today",children:"Today"}),e.jsx(a,{value:"week",children:"This Week"}),e.jsx(a,{value:"month",children:"This Month"}),e.jsx(a,{value:"quarter",children:"This Quarter"})]})]})]})]}),e.jsx(d,{children:e.jsxs(Ce,{children:[e.jsx(Se,{children:e.jsxs(te,{children:[e.jsx(u,{children:"Quote"}),e.jsx(u,{children:"Customer"}),e.jsx(u,{children:"Service"}),e.jsx(u,{children:"Value"}),e.jsx(u,{children:"Status"}),e.jsx(u,{children:"Priority"}),e.jsx(u,{children:"Win %"}),e.jsx(u,{children:"Valid Until"}),e.jsx(u,{children:"Actions"})]})}),e.jsx(Qe,{children:he.map(s=>e.jsxs(te,{className:"hover:bg-gray-50",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[oe(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.quoteNumber}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(s.createdDate).toLocaleDateString()]})]})]})}),e.jsx(g,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contactPerson})]})}),e.jsx(g,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.serviceType}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.passengers," pax • ",s.frequency]})]})}),e.jsx(g,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:["£",s.totalAmount.toLocaleString()]}),s.discountAmount>0&&e.jsxs("p",{className:"text-sm text-green-600",children:["-£",s.discountAmount.toFixed(2)," discount"]})]})}),e.jsx(g,{children:y(s.status)}),e.jsx(g,{children:de(s.priority)}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-medium ${xe(s.estimatedProbability)}`,children:[s.estimatedProbability,"%"]}),s.competitorQuotes>0&&e.jsxs(K,{variant:"outline",className:"text-xs",children:[s.competitorQuotes," comp"]})]})}),e.jsx(g,{children:e.jsxs("div",{className:`${W(s.validUntil)?"text-orange-600 font-medium":""}`,children:[new Date(s.validUntil).toLocaleDateString(),W(s.validUntil)&&e.jsx("p",{className:"text-xs text-orange-600",children:"Expiring soon!"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{variant:"outline",size:"sm",title:"View Quote",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Edit Quote",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Send Email",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",title:"Download PDF",children:e.jsx(Ee,{className:"w-4 h-4"})}),s.status==="accepted"&&e.jsx(r,{variant:"outline",size:"sm",title:"Convert to Invoice",className:"bg-green-50",children:e.jsx(ie,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})}),e.jsx(C,{value:"pending",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-yellow-600"}),"Pending Quotes"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>s.status==="pending"||s.status==="sent").map(s=>e.jsx("div",{className:"border border-yellow-200 rounded-lg p-4 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.customerName," • ",s.contactPerson]}),e.jsxs("p",{className:"text-sm text-yellow-600",children:["Win probability: ",s.estimatedProbability,"%",s.followUpDate&&` • Follow up: ${new Date(s.followUpDate).toLocaleDateString()}`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold",children:["£",s.totalAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expires: ",new Date(s.validUntil).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Follow Up"]}),e.jsxs(r,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Call"]})]})]})},s.id))})})]})}),e.jsx(C,{value:"expiring",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-orange-600"}),"Expiring Quotes"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>W(s.validUntil)).map(s=>e.jsx("div",{className:"border border-orange-200 rounded-lg p-4 bg-orange-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{className:"w-6 h-6 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),e.jsxs("p",{className:"text-sm text-orange-600",children:["Expires in ",Math.ceil((new Date(s.validUntil).getTime()-Date.now())/(1e3*60*60*24))," days"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold",children:["£",s.totalAmount.toLocaleString()]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Extend"]}),e.jsxs(r,{size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Urgent Follow Up"]})]})]})},s.id))})})]})}),e.jsx(C,{value:"won",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600"}),"Won Quotes"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:N.filter(s=>s.status==="accepted"||s.status==="converted").map(s=>e.jsx("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ne,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.quoteNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),e.jsxs("p",{className:"text-sm text-green-600",children:["Accepted: ",s.acceptedDate?new Date(s.acceptedDate).toLocaleDateString():"N/A",s.status==="converted"&&s.invoiceId&&e.jsxs("span",{children:[" • Invoice: ",s.invoiceId]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["£",s.totalAmount.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.serviceType})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="accepted"&&e.jsxs(r,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Create Invoice"]}),s.status==="converted"&&e.jsxs(r,{size:"sm",variant:"outline",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"View Invoice"]})]})]})},s.id))})})]})}),e.jsx(C,{value:"analytics",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Quotation Analytics"]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Advanced Quote Analytics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Detailed analytics on conversion rates, win/loss analysis, and revenue forecasting."}),e.jsx(r,{className:"bg-blue-600 hover:bg-blue-700",children:"View Analytics Dashboard"})]})})]})}),e.jsx(C,{value:"settings",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Quotation Settings"]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quote Configuration"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure quote templates, approval workflows, and automated follow-ups."}),e.jsx(r,{className:"bg-blue-600 hover:bg-blue-700",children:"Configure Settings"})]})})]})})]})]})};export{ls as default};
