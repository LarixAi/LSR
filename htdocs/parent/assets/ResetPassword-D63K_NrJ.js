import{r as a,Q as b,u as y,a as v,j as s,i as P,k as C,S,l as A,m as E,n as k,Y as o,I as m,A as I,H as L,G as U,B as R,s as u}from"./main-piTIAPSx.js";import{C as T}from"./circle-check-big-CD0jvDn0.js";const D=()=>{const[d,x]=a.useState(""),[n,h]=a.useState(""),[l,i]=a.useState(!1),[p,w]=a.useState(!1),[c,t]=a.useState("");b();const j=y(),{toast:f}=v();a.useEffect(()=>{(async()=>{const{data:r,error:N}=await u.auth.getSession();N&&t("Invalid or expired reset link")})()},[]);const g=async e=>{if(e.preventDefault(),t(""),d!==n){t("Passwords do not match");return}if(d.length<6){t("Password must be at least 6 characters long");return}i(!0);try{const{error:r}=await u.auth.updateUser({password:d});if(r)throw r;w(!0),f({title:"Password Updated",description:"Your password has been successfully updated."}),setTimeout(()=>{j("/auth")},3e3)}catch(r){t(r.message||"Failed to update password")}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(P,{className:"shadow-xl",children:[s.jsxs(C,{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[s.jsx(S,{className:"w-6 h-6 text-blue-600"}),s.jsx(A,{className:"text-2xl font-bold",children:"Set New Password"})]}),s.jsx(E,{children:"Enter your new password below"})]}),s.jsx(k,{className:"px-8 pb-8",children:p?s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(T,{className:"w-16 h-16 text-green-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Password Updated!"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Your password has been successfully updated."}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Redirecting to login page..."})]})]}):s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"password",children:"New Password"}),s.jsx(m,{id:"password",type:"password",value:d,onChange:e=>x(e.target.value),disabled:l,required:!0,minLength:6,className:"mt-1",placeholder:"Enter new password"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(m,{id:"confirmPassword",type:"password",value:n,onChange:e=>h(e.target.value),disabled:l,required:!0,minLength:6,className:"mt-1",placeholder:"Confirm new password"})]}),c&&s.jsxs(I,{variant:"destructive",children:[s.jsx(L,{className:"h-4 w-4"}),s.jsx(U,{children:c})]}),s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[s.jsx("p",{className:"font-medium mb-1",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsx("li",{children:"• At least 6 characters long"}),s.jsx("li",{children:"• Mix of letters and numbers recommended"}),s.jsx("li",{children:"• Avoid common passwords"})]})]}),s.jsx(R,{type:"submit",className:"w-full",disabled:l,children:l?"Updating Password...":"Update Password"})]})})]})})})};export{D as default};
